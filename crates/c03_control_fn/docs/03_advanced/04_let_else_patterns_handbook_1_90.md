# 04. let-else æ¨¡å¼æ‰‹å†Œ (let-else Patterns - Rust 1.90)

> **æ–‡æ¡£ç±»å‹**ï¼šé«˜çº§  
> **éš¾åº¦ç­‰çº§**ï¼šâ­â­â­  
> **é¢„è®¡é˜…è¯»æ—¶é—´**ï¼š45åˆ†é’Ÿ  
> **å‰ç½®çŸ¥è¯†**ï¼šæ¨¡å¼åŒ¹é…ã€æ§åˆ¶æµåŸºç¡€

## ğŸ“– å†…å®¹æ¦‚è¿°

`let PATTERN = EXPR else { ... };` è¯­æ³•å…è®¸åœ¨è§£æ„å¤±è´¥æ—¶ç«‹å³æ‰§è¡Œ else åˆ†æ”¯ï¼Œå¸¸ç”¨äºå‚æ•°æ ¡éªŒã€æ—©é€€ã€å¾ªç¯è·³è¿‡ç­‰åœºæ™¯ã€‚æœ¬æ–‡æ¡£æä¾›å…¨é¢çš„ç”¨æ³•æŒ‡å—å’Œæœ€ä½³å®è·µã€‚

## ğŸ¯ å­¦ä¹ ç›®æ ‡

å®Œæˆæœ¬æ–‡æ¡£å­¦ä¹ åï¼Œä½ å°†èƒ½å¤Ÿï¼š

- [ ] æŒæ¡ let-else çš„è¯­æ³•å’Œè¯­ä¹‰
- [ ] åœ¨å‡½æ•°å‚æ•°æ ¡éªŒä¸­ä½¿ç”¨ let-else
- [ ] åœ¨å¾ªç¯ä¸­ä½¿ç”¨ let-else æå‰è·³è¿‡
- [ ] ç†è§£ let-else vs if let çš„é€‰æ‹©
- [ ] åº”ç”¨ let-else ç®€åŒ–é”™è¯¯å¤„ç†

## ğŸ“š ç›®å½•

- [04. let-else æ¨¡å¼æ‰‹å†Œ (let-else Patterns - Rust 1.90)](#04-let-else-æ¨¡å¼æ‰‹å†Œ-let-else-patterns---rust-190)
  - [ğŸ“– å†…å®¹æ¦‚è¿°](#-å†…å®¹æ¦‚è¿°)
  - [ğŸ¯ å­¦ä¹ ç›®æ ‡](#-å­¦ä¹ ç›®æ ‡)
  - [ğŸ“š ç›®å½•](#-ç›®å½•)
  - [4.1. å…¸å‹ç”¨æ³•ï¼šå‚æ•°æ ¡éªŒ + æ—©é€€](#41-å…¸å‹ç”¨æ³•å‚æ•°æ ¡éªŒ--æ—©é€€)
  - [åœ¨å¾ªç¯ä¸­ä½¿ç”¨ï¼šç»§ç»­/è·³å‡º](#åœ¨å¾ªç¯ä¸­ä½¿ç”¨ç»§ç»­è·³å‡º)

---

## 4.1. å…¸å‹ç”¨æ³•ï¼šå‚æ•°æ ¡éªŒ + æ—©é€€

```rust
fn get_port(s: &str) -> Result<u16, String> {
    let Some(rest) = s.strip_prefix("port=") else { return Err("missing".into()); };
    let Ok(n) = rest.parse::<u16>() else { return Err("nan".into()); };
    Ok(n)
}
```

## åœ¨å¾ªç¯ä¸­ä½¿ç”¨ï¼šç»§ç»­/è·³å‡º

```rust
fn collect_even(nums: &[i32]) -> Vec<i32> {
    let mut out = Vec::new();
    for &n in nums {
        let true = n % 2 == 0 else { continue };
        out.push(n);
    }
    out
}
```

---

å·¥ç¨‹å»ºè®®ï¼š

- å°†å¤±è´¥è·¯å¾„å‰ç½®ï¼Œä¿æŒä¸»è·¯å¾„ç›´è¡Œï¼›
- `else` å†…ä½¿ç”¨ `return/break/continue` æ˜ç¡®æ§åˆ¶æµï¼›
- ä¸ `?` äº’è¡¥ï¼šç»“æ„æ€§æ£€æŸ¥ï¼ˆlet-elseï¼‰ä¸é”™è¯¯ä¼ æ’­ï¼ˆ`?`ï¼‰ã€‚
