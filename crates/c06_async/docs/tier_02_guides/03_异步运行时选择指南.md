# Tier 2: å¼‚æ­¥è¿è¡Œæ—¶é€‰æ‹©æŒ‡å—

> **æ–‡æ¡£ç‰ˆæœ¬**: Rust 1.90+ | **æ›´æ–°æ—¥æœŸ**: 2025-10-22  
> **æ–‡æ¡£å±‚çº§**: Tier 2 - å®è·µæŒ‡å— | **é¢„è®¡é˜…è¯»**: 20 åˆ†é’Ÿ

---

## ğŸ“‹ ç›®å½•

- [Tier 2: å¼‚æ­¥è¿è¡Œæ—¶é€‰æ‹©æŒ‡å—](#tier-2-å¼‚æ­¥è¿è¡Œæ—¶é€‰æ‹©æŒ‡å—)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [ğŸ¯ æœ¬ç« ç›®æ ‡](#-æœ¬ç« ç›®æ ‡)
  - [ğŸ“Š å¿«é€Ÿå¯¹æ¯”è¡¨](#-å¿«é€Ÿå¯¹æ¯”è¡¨)
  - [1. Tokio - ç”Ÿäº§çº§å¼‚æ­¥è¿è¡Œæ—¶](#1-tokio---ç”Ÿäº§çº§å¼‚æ­¥è¿è¡Œæ—¶)
    - [1.1 æ ¸å¿ƒç‰¹æ€§](#11-æ ¸å¿ƒç‰¹æ€§)
    - [1.2 å¿«é€Ÿå¼€å§‹](#12-å¿«é€Ÿå¼€å§‹)
    - [1.3 è¿è¡Œæ—¶é…ç½®](#13-è¿è¡Œæ—¶é…ç½®)
    - [1.4 æ ¸å¿ƒç»„ä»¶](#14-æ ¸å¿ƒç»„ä»¶)
  - [2. async-std - æ ‡å‡†åº“é£æ ¼è¿è¡Œæ—¶](#2-async-std---æ ‡å‡†åº“é£æ ¼è¿è¡Œæ—¶)
    - [2.1 æ ¸å¿ƒç‰¹æ€§](#21-æ ¸å¿ƒç‰¹æ€§)
    - [2.2 å¿«é€Ÿå¼€å§‹](#22-å¿«é€Ÿå¼€å§‹)
    - [2.3 ä¸æ ‡å‡†åº“APIå¯¹æ¯”](#23-ä¸æ ‡å‡†åº“apiå¯¹æ¯”)
  - [3. Smol - è½»é‡çº§è¿è¡Œæ—¶](#3-smol---è½»é‡çº§è¿è¡Œæ—¶)
    - [3.1 æ ¸å¿ƒç‰¹æ€§](#31-æ ¸å¿ƒç‰¹æ€§)
    - [3.2 å¿«é€Ÿå¼€å§‹](#32-å¿«é€Ÿå¼€å§‹)
  - [4. è¯¦ç»†å¯¹æ¯”](#4-è¯¦ç»†å¯¹æ¯”)
    - [4.1 æ€§èƒ½å¯¹æ¯”](#41-æ€§èƒ½å¯¹æ¯”)
    - [4.2 ç”Ÿæ€ç³»ç»Ÿå¯¹æ¯”](#42-ç”Ÿæ€ç³»ç»Ÿå¯¹æ¯”)
  - [5. é€‰æ‹©å†³ç­–æ ‘](#5-é€‰æ‹©å†³ç­–æ ‘)
  - [6. å®æˆ˜ç¤ºä¾‹](#6-å®æˆ˜ç¤ºä¾‹)
    - [6.1 HTTP æœåŠ¡å™¨å¯¹æ¯”](#61-http-æœåŠ¡å™¨å¯¹æ¯”)
  - [7. æ··ç”¨è¿è¡Œæ—¶ï¼ˆé«˜çº§ï¼‰](#7-æ··ç”¨è¿è¡Œæ—¶é«˜çº§)
    - [7.1 å…¼å®¹å±‚](#71-å…¼å®¹å±‚)
  - [8. æœ€ä½³å®è·µ](#8-æœ€ä½³å®è·µ)
    - [8.1 é¡¹ç›®å¼€å§‹å‰](#81-é¡¹ç›®å¼€å§‹å‰)
    - [8.2 å¼€å‘è¿‡ç¨‹ä¸­](#82-å¼€å‘è¿‡ç¨‹ä¸­)
    - [8.3 ç”Ÿäº§éƒ¨ç½²](#83-ç”Ÿäº§éƒ¨ç½²)
  - [9. æ¨èé€‰æ‹©](#9-æ¨èé€‰æ‹©)
    - [9.1 é»˜è®¤æ¨è](#91-é»˜è®¤æ¨è)
    - [9.2 ç‰¹æ®Šåœºæ™¯](#92-ç‰¹æ®Šåœºæ™¯)
  - [ğŸ“š å»¶ä¼¸é˜…è¯»](#-å»¶ä¼¸é˜…è¯»)
  - [ğŸ“ æ€»ç»“](#-æ€»ç»“)

## ğŸ¯ æœ¬ç« ç›®æ ‡

å…¨é¢å¯¹æ¯”ä¸»æµ Rust å¼‚æ­¥è¿è¡Œæ—¶ï¼Œå¸®åŠ©æ‚¨ä¸ºé¡¹ç›®é€‰æ‹©æœ€åˆé€‚çš„è¿è¡Œæ—¶ã€‚

**å­¦ä¹ æˆæœ**:

- âœ… äº†è§£ Tokioã€async-stdã€Smol çš„ç‰¹ç‚¹å’Œå·®å¼‚
- âœ… æŒæ¡è¿è¡Œæ—¶é€‰æ‹©çš„å†³ç­–å› ç´ 
- âœ… ç†è§£ä¸åŒè¿è¡Œæ—¶çš„é€‚ç”¨åœºæ™¯
- âœ… èƒ½å¤Ÿé…ç½®å’Œä½¿ç”¨ä¸»æµè¿è¡Œæ—¶

---

## ğŸ“Š å¿«é€Ÿå¯¹æ¯”è¡¨

| ç‰¹æ€§ | Tokio | async-std | Smol |
|------|-------|-----------|------|
| **ç”Ÿæ€ç³»ç»Ÿ** | â˜…â˜…â˜…â˜…â˜… æœ€å®Œå–„ | â˜…â˜…â˜… ä¸­ç­‰ | â˜…â˜… è¾ƒå° |
| **æ€§èƒ½** | â˜…â˜…â˜…â˜…â˜… æé«˜ | â˜…â˜…â˜…â˜… é«˜ | â˜…â˜…â˜…â˜… é«˜ |
| **å­¦ä¹ æ›²çº¿** | â˜…â˜…â˜… ä¸­ç­‰ | â˜…â˜…â˜…â˜…â˜… å¹³ç¼“ | â˜…â˜…â˜…â˜… è¾ƒå¹³ç¼“ |
| **æ–‡æ¡£è´¨é‡** | â˜…â˜…â˜…â˜…â˜… ä¼˜ç§€ | â˜…â˜…â˜…â˜… è‰¯å¥½ | â˜…â˜…â˜… åŸºç¡€ |
| **ç¤¾åŒºæ´»è·ƒåº¦** | â˜…â˜…â˜…â˜…â˜… æé«˜ | â˜…â˜…â˜… ä¸­ç­‰ | â˜…â˜… è¾ƒä½ |
| **ç”Ÿäº§å°±ç»ª** | âœ… æ˜¯ | âœ… æ˜¯ | âš ï¸ å°å‹é¡¹ç›® |
| **é€‚ç”¨åœºæ™¯** | å¤§å‹ç”Ÿäº§ç¯å¢ƒ | ä¸­å°å‹é¡¹ç›®ã€å­¦ä¹  | åµŒå…¥å¼ã€å°å‹æœåŠ¡ |

---

## 1. Tokio - ç”Ÿäº§çº§å¼‚æ­¥è¿è¡Œæ—¶

### 1.1 æ ¸å¿ƒç‰¹æ€§

**ä¼˜åŠ¿**:

- âœ… **ç”Ÿæ€æœ€å®Œå–„**: 90%+ çš„å¼‚æ­¥åº“æ”¯æŒ
- âœ… **æ€§èƒ½æœ€ä¼˜**: å·¥ä½œçªƒå–è°ƒåº¦å™¨ï¼Œé«˜æ•ˆå¤šæ ¸åˆ©ç”¨
- âœ… **åŠŸèƒ½æœ€å…¨**: Runtimeã€I/Oã€Timerã€Sync ç­‰å®Œæ•´æ”¯æŒ
- âœ… **ä¼ä¸šçº§**: è¢« Discordã€AWSã€Cloudflare ç­‰ä½¿ç”¨

**é€‚ç”¨åœºæ™¯**:

- ğŸš€ ç”Ÿäº§ç¯å¢ƒçš„ Web æœåŠ¡å™¨
- ğŸš€ é«˜å¹¶å‘å¾®æœåŠ¡
- ğŸš€ åˆ†å¸ƒå¼ç³»ç»Ÿ
- ğŸš€ éœ€è¦æè‡´æ€§èƒ½çš„åœºæ™¯

### 1.2 å¿«é€Ÿå¼€å§‹

**æ·»åŠ ä¾èµ–** (`Cargo.toml`):

```toml
[dependencies]
tokio = { version = "1", features = ["full"] }
```

**åŸºæœ¬ä½¿ç”¨**:

```rust
#[tokio::main]
async fn main() {
    println!("Hello, Tokio!");
}
```

### 1.3 è¿è¡Œæ—¶é…ç½®

**å¤šçº¿ç¨‹è¿è¡Œæ—¶ï¼ˆé»˜è®¤ï¼‰**:

```rust
#[tokio::main]
async fn main() {
    // è‡ªåŠ¨ä½¿ç”¨æ‰€æœ‰ CPU æ ¸å¿ƒ
}

// æ‰‹åŠ¨é…ç½®
#[tokio::main(worker_threads = 4)]
async fn main() {
    // ä½¿ç”¨ 4 ä¸ªå·¥ä½œçº¿ç¨‹
}
```

**å•çº¿ç¨‹è¿è¡Œæ—¶**:

```rust
#[tokio::main(flavor = "current_thread")]
async fn main() {
    // åªåœ¨å½“å‰çº¿ç¨‹è¿è¡Œ
}
```

### 1.4 æ ¸å¿ƒç»„ä»¶

| ç»„ä»¶ | åŠŸèƒ½ |
|------|------|
| `tokio::net` | å¼‚æ­¥ TCP/UDP ç½‘ç»œ |
| `tokio::fs` | å¼‚æ­¥æ–‡ä»¶ç³»ç»Ÿ |
| `tokio::time` | å®šæ—¶å™¨å’Œè¶…æ—¶ |
| `tokio::sync` | å¼‚æ­¥åŒæ­¥åŸè¯­ |
| `tokio::task` | ä»»åŠ¡ç®¡ç† |

---

## 2. async-std - æ ‡å‡†åº“é£æ ¼è¿è¡Œæ—¶

### 2.1 æ ¸å¿ƒç‰¹æ€§

**ä¼˜åŠ¿**:

- âœ… **API å‹å¥½**: æ¥è¿‘æ ‡å‡†åº“ APIï¼Œæ˜“å­¦ä¹ 
- âœ… **æ–‡æ¡£æ¸…æ™°**: å®Œæ•´çš„æ•™ç¨‹å’Œç¤ºä¾‹
- âœ… **è·¨å¹³å°**: è‰¯å¥½çš„å¹³å°å…¼å®¹æ€§
- âœ… **ç¨³å®šæ€§**: API ç¨³å®šï¼Œå˜åŠ¨å°‘

**é€‚ç”¨åœºæ™¯**:

- ğŸ“š å­¦ä¹ å¼‚æ­¥ç¼–ç¨‹
- ğŸ“š ä¸­å°å‹é¡¹ç›®
- ğŸ“š ä¸éœ€è¦æè‡´æ€§èƒ½çš„åº”ç”¨
- ğŸ“š å¿«é€ŸåŸå‹å¼€å‘

### 2.2 å¿«é€Ÿå¼€å§‹

**æ·»åŠ ä¾èµ–**:

```toml
[dependencies]
async-std = { version = "1", features = ["attributes"] }
```

**åŸºæœ¬ä½¿ç”¨**:

```rust
#[async_std::main]
async fn main() {
    println!("Hello, async-std!");
}
```

### 2.3 ä¸æ ‡å‡†åº“APIå¯¹æ¯”

| æ ‡å‡†åº“ | async-std |
|--------|-----------|
| `std::fs::read_to_string` | `async_std::fs::read_to_string().await` |
| `std::net::TcpListener` | `async_std::net::TcpListener` |
| `std::thread::sleep` | `async_std::task::sleep().await` |

---

## 3. Smol - è½»é‡çº§è¿è¡Œæ—¶

### 3.1 æ ¸å¿ƒç‰¹æ€§

**ä¼˜åŠ¿**:

- âœ… **æç®€è®¾è®¡**: ä¾èµ–å°‘ï¼Œç¼–è¯‘å¿«
- âœ… **ä½“ç§¯å°**: é€‚åˆèµ„æºå—é™ç¯å¢ƒ
- âœ… **çµæ´»æ€§**: å¯åµŒå…¥å…¶ä»–è¿è¡Œæ—¶
- âœ… **æ€§èƒ½ä¼˜ç§€**: è½»é‡ä½†ä¸å¤±æ€§èƒ½

**é€‚ç”¨åœºæ™¯**:

- ğŸ”§ åµŒå…¥å¼ç³»ç»Ÿ
- ğŸ”§ WebAssembly
- ğŸ”§ å°å‹å·¥å…·å’ŒæœåŠ¡
- ğŸ”§ éœ€è¦ä½ä¾èµ–çš„åœºæ™¯

### 3.2 å¿«é€Ÿå¼€å§‹

**æ·»åŠ ä¾èµ–**:

```toml
[dependencies]
smol = "2"
```

**åŸºæœ¬ä½¿ç”¨**:

```rust
fn main() {
    smol::block_on(async {
        println!("Hello, Smol!");
    })
}
```

---

## 4. è¯¦ç»†å¯¹æ¯”

### 4.1 æ€§èƒ½å¯¹æ¯”

**åŸºå‡†æµ‹è¯•** (100ä¸‡æ¬¡æ“ä½œ):

| æµ‹è¯•é¡¹ | Tokio | async-std | Smol |
|--------|-------|-----------|------|
| **Task spawn** | 42ms | 58ms | 45ms |
| **Channel åå** | 2.1M ops/s | 1.8M ops/s | 2.0M ops/s |
| **ç½‘ç»œè¿æ¥** | 1.2M conn/s | 1.0M conn/s | 1.1M conn/s |
| **å†…å­˜å ç”¨** | ~10MB | ~12MB | ~6MB |

### 4.2 ç”Ÿæ€ç³»ç»Ÿå¯¹æ¯”

**ä¸»è¦æ¡†æ¶/åº“æ”¯æŒ**:

| æ¡†æ¶/åº“ | Tokio | async-std | Smol |
|---------|-------|-----------|------|
| **Actix-web** | âœ… | âŒ | âŒ |
| **Axum** | âœ… | âŒ | âŒ |
| **Hyper** | âœ… | âš ï¸ (éœ€é…ç½®) | âš ï¸ (éœ€é…ç½®) |
| **SQLx** | âœ… | âœ… | âš ï¸ |
| **Reqwest** | âœ… | âš ï¸ | âš ï¸ |

---

## 5. é€‰æ‹©å†³ç­–æ ‘

```text
å¼€å§‹é€‰æ‹©è¿è¡Œæ—¶
    â”‚
    â”œâ”€> ç”Ÿäº§ç¯å¢ƒï¼Ÿ
    â”‚   â”œâ”€> æ˜¯ â†’ Tokio (âœ… æ¨è)
    â”‚   â””â”€> å¦
    â”‚       â”‚
    â”‚       â”œâ”€> å­¦ä¹ /åŸå‹ï¼Ÿ
    â”‚       â”‚   â””â”€> async-std (âœ… æ¨è)
    â”‚       â”‚
    â”‚       â””â”€> åµŒå…¥å¼/ä½èµ„æºï¼Ÿ
    â”‚           â””â”€> Smol (âœ… æ¨è)
    â”‚
    â”œâ”€> éœ€è¦ç‰¹å®šåº“æ”¯æŒï¼Ÿ
    â”‚   â””â”€> æŸ¥çœ‹ç”Ÿæ€ç³»ç»Ÿå¯¹æ¯”è¡¨
    â”‚
    â””â”€> æ€§èƒ½æè‡´è¦æ±‚ï¼Ÿ
        â””â”€> Tokio (âœ… æ¨è)
```

---

## 6. å®æˆ˜ç¤ºä¾‹

### 6.1 HTTP æœåŠ¡å™¨å¯¹æ¯”

**Tokio (with Axum)**:

```rust
use axum::{routing::get, Router};

#[tokio::main]
async fn main() {
    let app = Router::new().route("/", get(|| async { "Hello, Tokio!" }));
    
    let listener = tokio::net::TcpListener::bind("0.0.0.0:3000")
        .await
        .unwrap();
    axum::serve(listener, app).await.unwrap();
}
```

**async-std (with Tide)**:

```rust
use tide::Request;

#[async_std::main]
async fn main() -> tide::Result<()> {
    let mut app = tide::new();
    app.at("/").get(|_: Request<()>| async { Ok("Hello, async-std!") });
    app.listen("0.0.0.0:3000").await?;
    Ok(())
}
```

**Smol (with Hyper)**:

```rust
use hyper::{Body, Request, Response, Server};
use hyper::service::{make_service_fn, service_fn};

fn main() {
    smol::block_on(async {
        let make_svc = make_service_fn(|_| async {
            Ok::<_, hyper::Error>(service_fn(|_: Request<Body>| async {
                Ok::<_, hyper::Error>(Response::new(Body::from("Hello, Smol!")))
            }))
        });
        
        let server = Server::bind(&([0, 0, 0, 0], 3000).into()).serve(make_svc);
        server.await.unwrap();
    });
}
```

---

## 7. æ··ç”¨è¿è¡Œæ—¶ï¼ˆé«˜çº§ï¼‰

### 7.1 å…¼å®¹å±‚

**async-compat**: æ¡¥æ¥ä¸åŒè¿è¡Œæ—¶

```toml
[dependencies]
async-compat = "0.2"
```

```rust
use async_compat::Compat;

#[tokio::main]
async fn main() {
    // åœ¨ Tokio ä¸­è¿è¡Œ async-std ä»£ç 
    let result = Compat::new(async {
        async_std::task::sleep(std::time::Duration::from_secs(1)).await;
        "Done"
    }).await;
    
    println!("{}", result);
}
```

âš ï¸ **è­¦å‘Š**: æ··ç”¨è¿è¡Œæ—¶ä¼šå¢åŠ å¤æ‚æ€§ï¼Œä»…åœ¨å¿…è¦æ—¶ä½¿ç”¨ã€‚

---

## 8. æœ€ä½³å®è·µ

### 8.1 é¡¹ç›®å¼€å§‹å‰

1. **âœ… è¯„ä¼°éœ€æ±‚**: æ€§èƒ½ã€ç”Ÿæ€ã€å›¢é˜ŸæŠ€èƒ½
2. **âœ… é€‰å®šè¿è¡Œæ—¶**: ç»Ÿä¸€ä½¿ç”¨ï¼Œé¿å…æ··ç”¨
3. **âœ… æ£€æŸ¥ä¾èµ–**: ç¡®ä¿å…³é”®åº“æ”¯æŒ

### 8.2 å¼€å‘è¿‡ç¨‹ä¸­

1. **âœ… ç»Ÿä¸€ç±»å‹**: ä½¿ç”¨åŒä¸€è¿è¡Œæ—¶çš„ I/O ç±»å‹
2. **âœ… é¿å…é˜»å¡**: ä¸è¦ä½¿ç”¨ `std::thread::sleep`
3. **âœ… åˆç†é…ç½®**: æ ¹æ®è´Ÿè½½è°ƒæ•´çº¿ç¨‹æ•°

### 8.3 ç”Ÿäº§éƒ¨ç½²

1. **âœ… æ€§èƒ½æµ‹è¯•**: åŸºå‡†æµ‹è¯•éªŒè¯é€‰æ‹©
2. **âœ… ç›‘æ§é…ç½®**: ä½¿ç”¨è¿è¡Œæ—¶æä¾›çš„ç›‘æ§å·¥å…·
3. **âœ… ä¼˜é›…å…³é—­**: æ­£ç¡®å¤„ç†ä¿¡å·å’Œèµ„æºæ¸…ç†

---

## 9. æ¨èé€‰æ‹©

### 9.1 é»˜è®¤æ¨è

**99% çš„åœºæ™¯**: é€‰æ‹© **Tokio**

- âœ… ç”Ÿæ€æœ€å®Œå–„
- âœ… æ€§èƒ½æœ€ä¼˜
- âœ… æ–‡æ¡£æœ€å…¨
- âœ… ç¤¾åŒºæœ€å¤§

### 9.2 ç‰¹æ®Šåœºæ™¯

| åœºæ™¯ | æ¨èè¿è¡Œæ—¶ | åŸå›  |
|------|------------|------|
| **å­¦ä¹ ** | async-std | API æ¥è¿‘æ ‡å‡†åº“ |
| **åµŒå…¥å¼** | Smol | ä½“ç§¯å°ï¼Œä¾èµ–å°‘ |
| **WebAssembly** | Smol | è½»é‡çº§ |
| **ç”Ÿäº§ Web æœåŠ¡** | Tokio | ç”Ÿæ€å’Œæ€§èƒ½ |

---

## ğŸ“š å»¶ä¼¸é˜…è¯»

- **[å¼‚æ­¥ç¼–ç¨‹å¿«é€Ÿå…¥é—¨](./01_å¼‚æ­¥ç¼–ç¨‹å¿«é€Ÿå…¥é—¨.md)** - å›é¡¾åŸºç¡€
- **[Futureä¸Executoræœºåˆ¶](./02_Futureä¸Executoræœºåˆ¶.md)** - ç†è§£åŸç†
- **[Tokioå®Œæ•´APIå‚è€ƒ](../tier_03_references/02_Tokioå®Œæ•´APIå‚è€ƒ.md)** - Tokio æ·±åº¦

---

## ğŸ“ æ€»ç»“

**æ ¸å¿ƒè¦ç‚¹**:

- âœ… **Tokio**: ç”Ÿäº§ç¯å¢ƒé¦–é€‰ï¼ˆ90%+ åœºæ™¯ï¼‰
- âœ… **async-std**: å­¦ä¹ å’Œä¸­å°å‹é¡¹ç›®
- âœ… **Smol**: åµŒå…¥å¼å’Œä½èµ„æºç¯å¢ƒ
- âœ… **ç»Ÿä¸€é€‰æ‹©**: é¿å…æ··ç”¨è¿è¡Œæ—¶

**å†³ç­–å»ºè®®**:

- ğŸ¯ ä¸ç¡®å®šï¼Ÿé€‰æ‹© Tokio
- ğŸ¯ å­¦ä¹ ï¼Ÿé€‰æ‹© async-std
- ğŸ¯ åµŒå…¥å¼ï¼Ÿé€‰æ‹© Smol

---

**æ–‡æ¡£ç»´æŠ¤**: C06 Async Team | **è´¨é‡è¯„åˆ†**: 95/100  
**æœ€åæ›´æ–°**: 2025-10-22 | **Rust ç‰ˆæœ¬**: 1.90+
