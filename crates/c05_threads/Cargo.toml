[package]
name = "c05_threads"
version = "0.1.0"
edition = "2024"
resolver = "3"
rust-version = "1.92"
[dependencies]
crossbeam = { workspace = true }
crossbeam-channel = "0.5.15"
crossbeam-queue = "0.3.12"
crossbeam-utils = "0.8.21"
crossbeam-epoch = "0.9.18"
crossbeam-deque = "0.8.6"
rayon = { workspace = true }
parking_lot = { workspace = true }
dashmap = { workspace = true }
# 2025-12-11: 更新至 0.12.0 (最新稳定版本)
flume = "0.12.0"
tokio = { workspace = true, optional = true }
# async-std 已移除，使用 tokio 替代 (async-std 已弃用)
num_cpus = { workspace = true }
libc = { workspace = true }
windows = { version = "0.62.1", features = ["Win32_System_Threading"], optional = true }
once_cell = { workspace = true }
anyhow = { workspace = true }
thiserror = { workspace = true }

[features]
default = ["std"]
std = []
tokio = ["tokio/full"]
# async-std 特性已移除，使用 tokio 替代
windows = ["windows/Win32_System_Threading"]
unstable = []
# added to satisfy cfg(feature = ...) usage in code
custom_ring_buffers = []
work_stealing_examples = []

[lib]
name = "c05_threads"
path = "src/lib.rs"

[[bin]]
name = "c05_threads"
path = "src/bin/main.rs"

[dev-dependencies]
criterion = { workspace = true }
loom = { version = "0.7.2", default-features = false }
tokio = { version = "1.47", features = ["full"] }

[[bench]]
name = "priority_channels_bench"
harness = false

[[bench]]
name = "backpressure_bench"
harness = false

[[bench]]
name = "rust_192_benchmarks"
harness = false
