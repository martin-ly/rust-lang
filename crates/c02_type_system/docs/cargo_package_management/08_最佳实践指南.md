# Cargo æœ€ä½³å®è·µæŒ‡å—

**ç‰ˆæœ¬**: Rust 1.92.0
**æœ€åæ›´æ–°**: 2025-12-11

---

## ğŸ“‹ ç›®å½•

- [Cargo æœ€ä½³å®è·µæŒ‡å—](#cargo-æœ€ä½³å®è·µæŒ‡å—)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [ğŸ¯ æœ€ä½³å®è·µåŸåˆ™](#-æœ€ä½³å®è·µåŸåˆ™)
  - [1. é¡¹ç›®ç»„ç»‡æœ€ä½³å®è·µ](#1-é¡¹ç›®ç»„ç»‡æœ€ä½³å®è·µ)
    - [ç›®å½•ç»“æ„](#ç›®å½•ç»“æ„)
    - [å‘½åè§„èŒƒ](#å‘½åè§„èŒƒ)
    - [æ¨¡å—ç»„ç»‡](#æ¨¡å—ç»„ç»‡)
  - [2. ä¾èµ–ç®¡ç†æœ€ä½³å®è·µ](#2-ä¾èµ–ç®¡ç†æœ€ä½³å®è·µ)
    - [ç‰ˆæœ¬é€‰æ‹©](#ç‰ˆæœ¬é€‰æ‹©)
    - [ä¾èµ–æœ€å°åŒ–](#ä¾èµ–æœ€å°åŒ–)
    - [å®šæœŸå®¡è®¡](#å®šæœŸå®¡è®¡)
  - [3. ç‰¹æ€§è®¾è®¡æœ€ä½³å®è·µ](#3-ç‰¹æ€§è®¾è®¡æœ€ä½³å®è·µ)
    - [ç‰¹æ€§å‘½å](#ç‰¹æ€§å‘½å)
    - [ç‰¹æ€§ç»„åˆ](#ç‰¹æ€§ç»„åˆ)
    - [é»˜è®¤ç‰¹æ€§](#é»˜è®¤ç‰¹æ€§)
  - [4. æ„å»ºä¼˜åŒ–æœ€ä½³å®è·µ](#4-æ„å»ºä¼˜åŒ–æœ€ä½³å®è·µ)
    - [å¼€å‘æ„å»º](#å¼€å‘æ„å»º)
    - [å‘å¸ƒæ„å»º](#å‘å¸ƒæ„å»º)
    - [ç¼“å­˜åˆ©ç”¨](#ç¼“å­˜åˆ©ç”¨)
  - [5. æµ‹è¯•æœ€ä½³å®è·µ](#5-æµ‹è¯•æœ€ä½³å®è·µ)
    - [æµ‹è¯•ç»„ç»‡](#æµ‹è¯•ç»„ç»‡)
    - [æµ‹è¯•è¦†ç›–](#æµ‹è¯•è¦†ç›–)
    - [æ€§èƒ½æµ‹è¯•](#æ€§èƒ½æµ‹è¯•)
  - [6. æ–‡æ¡£æœ€ä½³å®è·µ](#6-æ–‡æ¡£æœ€ä½³å®è·µ)
    - [ä»£ç æ–‡æ¡£](#ä»£ç æ–‡æ¡£)
    - [README ç¼–å†™](#readme-ç¼–å†™)
    - [ç¤ºä¾‹ä»£ç ](#ç¤ºä¾‹ä»£ç )
  - [7. å‘å¸ƒæœ€ä½³å®è·µ](#7-å‘å¸ƒæœ€ä½³å®è·µ)
    - [ç‰ˆæœ¬ç®¡ç†](#ç‰ˆæœ¬ç®¡ç†)
    - [CHANGELOG](#changelog)
    - [å‘å¸ƒæ£€æŸ¥](#å‘å¸ƒæ£€æŸ¥)
  - [8. å®‰å…¨æœ€ä½³å®è·µ](#8-å®‰å…¨æœ€ä½³å®è·µ)
    - [ä¾èµ–å®‰å…¨](#ä¾èµ–å®‰å…¨)
    - [ä»£ç å®‰å…¨](#ä»£ç å®‰å…¨)
    - [ä¾›åº”é“¾å®‰å…¨](#ä¾›åº”é“¾å®‰å…¨)
  - [9. æ€§èƒ½æœ€ä½³å®è·µ](#9-æ€§èƒ½æœ€ä½³å®è·µ)
    - [ç¼–è¯‘æ—¶ä¼˜åŒ–](#ç¼–è¯‘æ—¶ä¼˜åŒ–)
    - [è¿è¡Œæ—¶ä¼˜åŒ–](#è¿è¡Œæ—¶ä¼˜åŒ–)
    - [åˆ†æå·¥å…·](#åˆ†æå·¥å…·)
  - [10. CI/CD æœ€ä½³å®è·µ](#10-cicd-æœ€ä½³å®è·µ)
    - [GitHub Actions](#github-actions)
    - [æµ‹è¯•çŸ©é˜µ](#æµ‹è¯•çŸ©é˜µ)
    - [è‡ªåŠ¨å‘å¸ƒ](#è‡ªåŠ¨å‘å¸ƒ)
  - [ğŸ“š å®è·µæ¸…å•](#-å®è·µæ¸…å•)
    - [é¡¹ç›®å¯åŠ¨æ¸…å•](#é¡¹ç›®å¯åŠ¨æ¸…å•)
    - [å¼€å‘è¿‡ç¨‹æ¸…å•](#å¼€å‘è¿‡ç¨‹æ¸…å•)
    - [å‘å¸ƒå‰æ¸…å•](#å‘å¸ƒå‰æ¸…å•)
  - [ğŸ” åæ¨¡å¼è­¦ç¤º](#-åæ¨¡å¼è­¦ç¤º)
    - [âŒ ä¸è¦è¿™æ ·åš](#-ä¸è¦è¿™æ ·åš)
  - [ğŸ“– å»¶ä¼¸é˜…è¯»](#-å»¶ä¼¸é˜…è¯»)
    - [å®˜æ–¹èµ„æº](#å®˜æ–¹èµ„æº)
    - [ç¤¾åŒºèµ„æº](#ç¤¾åŒºèµ„æº)

---

## ğŸ¯ æœ€ä½³å®è·µåŸåˆ™

**æ ¸å¿ƒåŸåˆ™**:

1. **ç®€å•ä¼˜å…ˆ** (Simplicity First): ä»æœ€ç®€å•çš„è§£å†³æ–¹æ¡ˆå¼€å§‹
2. **éµå¾ªçº¦å®š** (Follow Conventions): éµå¾ª Rust ç¤¾åŒºçº¦å®š
3. **æ˜¾å¼ä¼˜äºéšå¼** (Explicit Over Implicit): æ˜ç¡®è¡¨è¾¾æ„å›¾
4. **å®‰å…¨ç¬¬ä¸€** (Safety First): ä¼˜å…ˆè€ƒè™‘å®‰å…¨æ€§
5. **æ€§èƒ½å¹³è¡¡** (Performance Balance): åœ¨å¯ç»´æŠ¤æ€§å’Œæ€§èƒ½é—´å¹³è¡¡
6. **æŒç»­æ”¹è¿›** (Continuous Improvement): å®šæœŸå®¡æŸ¥å’Œä¼˜åŒ–

---

## 1. é¡¹ç›®ç»„ç»‡æœ€ä½³å®è·µ

### ç›®å½•ç»“æ„

**âœ… æ¨èç»“æ„**:

```text
my-project/
â”œâ”€â”€ Cargo.toml              # é¡¹ç›®æ¸…å•
â”œâ”€â”€ Cargo.lock              # ä¾èµ–é”å®šï¼ˆæäº¤åˆ° Gitï¼‰
â”œâ”€â”€ README.md               # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ LICENSE                 # è®¸å¯è¯
â”œâ”€â”€ CHANGELOG.md            # å˜æ›´æ—¥å¿—
â”œâ”€â”€ .gitignore              # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ src/                    # æºä»£ç 
â”‚   â”œâ”€â”€ lib.rs              # åº“æ ¹ï¼ˆå¦‚æœæ˜¯åº“ï¼‰
â”‚   â”œâ”€â”€ main.rs             # äºŒè¿›åˆ¶æ ¹ï¼ˆå¦‚æœæ˜¯åº”ç”¨ï¼‰
â”‚   â”œâ”€â”€ bin/                # é¢å¤–äºŒè¿›åˆ¶
â”‚   â”œâ”€â”€ config/             # é…ç½®æ¨¡å—
â”‚   â”œâ”€â”€ models/             # æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ utils/              # å·¥å…·å‡½æ•°
â”œâ”€â”€ tests/                  # é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ common/             # æµ‹è¯•å…¬å…±ä»£ç 
â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â””â”€â”€ integration_test.rs
â”œâ”€â”€ benches/                # æ€§èƒ½æµ‹è¯•
â”‚   â””â”€â”€ benchmarks.rs
â”œâ”€â”€ examples/               # ç¤ºä¾‹ä»£ç 
â”‚   â””â”€â”€ basic.rs
â””â”€â”€ docs/                   # é¢å¤–æ–‡æ¡£
    â””â”€â”€ architecture.md
```

### å‘½åè§„èŒƒ

```toml
[package]
# âœ… å¥½ï¼šä½¿ç”¨ kebab-case
name = "my-awesome-lib"

# âŒ å·®ï¼šä½¿ç”¨å…¶ä»–å‘½åé£æ ¼
name = "MyAwesomeLib"       # PascalCase
name = "my_awesome_lib"     # snake_case
```

```rust
// âœ… å¥½ï¼šæ¨¡å—ä½¿ç”¨ snake_case
mod user_service;
mod data_store;

// âœ… å¥½ï¼šç±»å‹ä½¿ç”¨ PascalCase
struct UserData;
enum RequestType;

// âœ… å¥½ï¼šå‡½æ•°ä½¿ç”¨ snake_case
fn calculate_total() {}
fn get_user_by_id() {}

// âœ… å¥½ï¼šå¸¸é‡ä½¿ç”¨ SCREAMING_SNAKE_CASE
const MAX_CONNECTIONS: usize = 100;
```

### æ¨¡å—ç»„ç»‡

```rust
// src/lib.rs

//! # My Awesome Library
//!
//! åº“çš„é¡¶å±‚æ–‡æ¡£

// å…¬å¼€ API
pub mod api;
pub mod models;

// å†…éƒ¨æ¨¡å—
mod internal;
mod utils;

// é‡å¯¼å‡ºå¸¸ç”¨ç±»å‹
pub use api::{Client, Config};
pub use models::{User, Post};
```

---

## 2. ä¾èµ–ç®¡ç†æœ€ä½³å®è·µ

### ç‰ˆæœ¬é€‰æ‹©

```toml
[dependencies]
# âœ… å¥½ï¼šä½¿ç”¨è„±å­—ç¬¦ç‰ˆæœ¬ï¼ˆé»˜è®¤ï¼‰
serde = "1.0"               # ^1.0.0

# âœ… å¥½ï¼šå…³é”®ä¾èµ–ä½¿ç”¨æ³¢æµªå·ç‰ˆæœ¬
critical = "~1.0.0"         # 1.0.x

# âš ï¸ è°¨æ…ï¼šåªåœ¨å¿…è¦æ—¶ä½¿ç”¨ç²¾ç¡®ç‰ˆæœ¬
exact = "=1.0.0"

# âŒ é¿å…ï¼šä½¿ç”¨é€šé…ç¬¦
wildcard = "*"              # ä¸å¯é¢„æµ‹
```

### ä¾èµ–æœ€å°åŒ–

```toml
[dependencies]
# âœ… å¥½ï¼šåªå¯ç”¨éœ€è¦çš„ç‰¹æ€§
tokio = { version = "1.48", features = ["rt", "sync"] }

# âŒ å·®ï¼šå¯ç”¨æ‰€æœ‰ç‰¹æ€§
tokio = { version = "1.48", features = ["full"] }

# âœ… å¥½ï¼šç¦ç”¨ä¸éœ€è¦çš„é»˜è®¤ç‰¹æ€§
serde = { version = "1.0", default-features = false, features = ["derive"] }
```

### å®šæœŸå®¡è®¡

```bash
# âœ… æ¯å‘¨è¿è¡Œä¸€æ¬¡
cargo audit

# âœ… æ£€æŸ¥è¿‡æ—¶ä¾èµ–
cargo outdated

# âœ… æ›´æ–°ä¾èµ–
cargo update

# âœ… æŸ¥çœ‹ä¾èµ–æ ‘
cargo tree

# âœ… æ£€æŸ¥é‡å¤ä¾èµ–
cargo tree --duplicates
```

---

## 3. ç‰¹æ€§è®¾è®¡æœ€ä½³å®è·µ

### ç‰¹æ€§å‘½å

```toml
[features]
# âœ… å¥½ï¼šæ¸…æ™°çš„ç‰¹æ€§åç§°
default = ["std"]
std = []                    # æ ‡å‡†åº“æ”¯æŒ
alloc = []                  # å †åˆ†é…æ”¯æŒ
async = ["tokio"]           # å¼‚æ­¥æ”¯æŒ
json = ["serde_json"]       # JSON åºåˆ—åŒ–

# âŒ å·®ï¼šæ¨¡ç³Šçš„ç‰¹æ€§åç§°
feature1 = []
stuff = []
```

### ç‰¹æ€§ç»„åˆ

```toml
[features]
# âœ… å¥½ï¼šæä¾›åˆç†çš„ç‰¹æ€§ç»„åˆ
default = ["std"]
std = ["alloc"]             # std ä¾èµ– alloc
full = ["std", "async", "json"]  # å®Œæ•´ç‰¹æ€§é›†
minimal = []                # æœ€å°ç‰¹æ€§é›†

# âœ… å¥½ï¼šå¯é€‰ä¾èµ–
async = ["dep:tokio"]
json = ["dep:serde_json"]
```

### é»˜è®¤ç‰¹æ€§

```toml
[features]
# âœ… å¥½ï¼šé»˜è®¤ç‰¹æ€§åº”è¯¥æ˜¯æœ€å¸¸ç”¨çš„
default = ["std"]

# âŒ å·®ï¼šé»˜è®¤ç‰¹æ€§åŒ…å«å¤ªå¤šå†…å®¹
default = ["full"]          # å¯èƒ½åŒ…å«ä¸éœ€è¦çš„åŠŸèƒ½
```

---

## 4. æ„å»ºä¼˜åŒ–æœ€ä½³å®è·µ

### å¼€å‘æ„å»º

```toml
[profile.dev]
# âœ… æ¨èï¼šé€‚åº¦ä¼˜åŒ–ï¼ŒåŠ å¿«æ„å»º
opt-level = 1               # è½»åº¦ä¼˜åŒ–
incremental = true          # å¢é‡ç¼–è¯‘
debug = true                # è°ƒè¯•ä¿¡æ¯

# âœ… ä¼˜åŒ–ä¾èµ–çš„æ„å»º
[profile.dev.package."*"]
opt-level = 2               # ä¾èµ–ä½¿ç”¨æ›´é«˜ä¼˜åŒ–
```

### å‘å¸ƒæ„å»º

```toml
[profile.release]
# âœ… æ¨èï¼šæœ€å¤§åŒ–æ€§èƒ½
opt-level = 3               # æœ€å¤§ä¼˜åŒ–
lto = "fat"                 # å…¨å±€é“¾æ¥æ—¶ä¼˜åŒ–
codegen-units = 1           # å•ä»£ç ç”Ÿæˆå•å…ƒ
strip = true                # å»é™¤ç¬¦å·
panic = "abort"             # panic æ—¶ä¸­æ­¢
```

### ç¼“å­˜åˆ©ç”¨

```bash
# âœ… ä½¿ç”¨ sccache åŠ é€Ÿ
export RUSTC_WRAPPER=sccache

# âœ… ä½¿ç”¨ mold é“¾æ¥å™¨ï¼ˆLinuxï¼‰
export RUSTFLAGS="-C link-arg=-fuse-ld=mold"

# âœ… CI ä¸­ç¼“å­˜ target ç›®å½•
# .github/workflows/ci.yml
- uses: actions/cache@v3
  with:
    path: |
      ~/.cargo/bin/
      ~/.cargo/registry/index/
      ~/.cargo/registry/cache/
      ~/.cargo/git/db/
      target/
```

---

## 5. æµ‹è¯•æœ€ä½³å®è·µ

### æµ‹è¯•ç»„ç»‡

```rust
// src/lib.rs

pub fn add(a: i32, b: i32) -> i32 {
    a + b
}

// âœ… å¥½ï¼šå•å…ƒæµ‹è¯•ä¸ä»£ç åœ¨ä¸€èµ·
#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_add() {
        assert_eq!(add(1, 2), 3);
    }

    #[test]
    #[should_panic]
    fn test_overflow() {
        add(i32::MAX, 1);
    }
}
```

```rust
// tests/integration_test.rs

// âœ… å¥½ï¼šé›†æˆæµ‹è¯•åœ¨ç‹¬ç«‹æ–‡ä»¶
use my_lib::add;

#[test]
fn test_public_api() {
    assert_eq!(add(2, 3), 5);
}
```

### æµ‹è¯•è¦†ç›–

```bash
# âœ… ä½¿ç”¨ tarpaulin æ£€æŸ¥è¦†ç›–ç‡
cargo install cargo-tarpaulin
cargo tarpaulin --out Html

# âœ… ç›®æ ‡ï¼šè‡³å°‘ 80% è¦†ç›–ç‡
```

### æ€§èƒ½æµ‹è¯•

```rust
// benches/benchmarks.rs

use criterion::{black_box, criterion_group, criterion_main, Criterion};
use my_lib::add;

// âœ… å¥½ï¼šä½¿ç”¨ criterion è¿›è¡ŒåŸºå‡†æµ‹è¯•
fn bench_add(c: &mut Criterion) {
    c.bench_function("add", |b| {
        b.iter(|| add(black_box(1), black_box(2)))
    });
}

criterion_group!(benches, bench_add);
criterion_main!(benches);
```

---

## 6. æ–‡æ¡£æœ€ä½³å®è·µ

### ä»£ç æ–‡æ¡£

````rust
//! # My Library
//!
//! è¿™æ˜¯åº“çš„é¡¶å±‚æ–‡æ¡£ã€‚
//!
//! ## å¿«é€Ÿå¼€å§‹
//!
//! ```
//! use my_lib::add;
//!
//! let result = add(1, 2);
//! assert_eq!(result, 3);
//! ```

/// âœ… å¥½ï¼šå®Œæ•´çš„å‡½æ•°æ–‡æ¡£
///
/// æ·»åŠ ä¸¤ä¸ªæ•°å­—ã€‚
///
/// # å‚æ•°
///
/// * `a` - ç¬¬ä¸€ä¸ªæ•°å­—
/// * `b` - ç¬¬äºŒä¸ªæ•°å­—
///
/// # è¿”å›å€¼
///
/// ä¸¤æ•°ä¹‹å’Œ
///
/// # ç¤ºä¾‹
///
/// ```
/// use my_lib::add;
///
/// let result = add(2, 3);
/// assert_eq!(result, 5);
/// ```
///
/// # Panics
///
/// å½“ç»“æœæº¢å‡ºæ—¶ panic
pub fn add(a: i32, b: i32) -> i32 {
    a.checked_add(b).expect("overflow")
}
````

### README ç¼–å†™

````markdown
# My Project

[![Crates.io](https://img.shields.io/crates/v/my-project.svg)](https://crates.io/crates/my-project)
[![Documentation](https://docs.rs/my-project/badge.svg)](https://docs.rs/my-project)
[![License](https://img.shields.io/crates/l/my-project.svg)](LICENSE)

ä¸€å¥è¯æè¿°é¡¹ç›®ã€‚

## ç‰¹æ€§

- ç‰¹æ€§ 1
- ç‰¹æ€§ 2
- ç‰¹æ€§ 3

## å¿«é€Ÿå¼€å§‹

```toml
[dependencies]
my-project = "0.1"
```

```rust
use my_project::*;

fn main() {
    // ç¤ºä¾‹ä»£ç 
}
```

## æ–‡æ¡£

æŸ¥çœ‹ [å®Œæ•´æ–‡æ¡£](https://docs.rs/my-project)

## è®¸å¯è¯

MIT
````

### ç¤ºä¾‹ä»£ç 

````rust
// examples/basic.rs

//! âœ… å¥½ï¼šç¤ºä¾‹åº”è¯¥å®Œæ•´å¯è¿è¡Œ
//!
//! è¿è¡Œæ­¤ç¤ºä¾‹ï¼š
//! ```bash
//! cargo run --example basic
//! ```

use my_lib::add;

fn main() {
    // ç®€å•ç¤ºä¾‹
    let result = add(1, 2);
    println!("1 + 2 = {}", result);

    // å¤æ‚ç¤ºä¾‹
    let numbers = vec![1, 2, 3, 4, 5];
    let sum = numbers.iter()
        .fold(0, |acc, &x| add(acc, x));
    println!("Sum: {}", sum);
}
````

---

## 7. å‘å¸ƒæœ€ä½³å®è·µ

### ç‰ˆæœ¬ç®¡ç†

```toml
[package]
# âœ… éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬
version = "1.2.3"
#         â”‚ â”‚ â”‚
#         â”‚ â”‚ â””â”€ PATCH: å‘åå…¼å®¹çš„ä¿®å¤
#         â”‚ â””â”€â”€â”€ MINOR: å‘åå…¼å®¹çš„æ–°åŠŸèƒ½
#         â””â”€â”€â”€â”€â”€ MAJOR: ä¸å…¼å®¹çš„å˜æ›´
```

### CHANGELOG

```markdown
# Changelog

## [Unreleased]

### Added

- æ–°åŠŸèƒ½

### Changed

- å˜æ›´

### Fixed

- ä¿®å¤

## [1.0.0] - 2025-01-15

### Added

- åˆå§‹å‘å¸ƒ
```

### å‘å¸ƒæ£€æŸ¥

```bash
# âœ… å‘å¸ƒå‰æ£€æŸ¥æ¸…å•

# 1. è¿è¡Œæ‰€æœ‰æµ‹è¯•
cargo test --all-features

# 2. æ£€æŸ¥ä»£ç æ ¼å¼
cargo fmt -- --check

# 3. è¿è¡Œ Clippy
cargo clippy -- -D warnings

# 4. æ£€æŸ¥æ–‡æ¡£
cargo doc --no-deps --open

# 5. è¯•è¿è¡Œå‘å¸ƒ
cargo publish --dry-run

# 6. æ£€æŸ¥åŒ…å†…å®¹
cargo package --list

# 7. å®é™…å‘å¸ƒ
cargo publish
```

---

## 8. å®‰å…¨æœ€ä½³å®è·µ

### ä¾èµ–å®‰å…¨

```bash
# âœ… å®šæœŸå®¡è®¡
cargo audit

# âœ… ä½¿ç”¨ deny æ£€æŸ¥ç­–ç•¥
cargo install cargo-deny
cargo deny check
```

```toml
# deny.toml

[advisories]
vulnerability = "deny"
unmaintained = "warn"
unsound = "warn"

[licenses]
unlicensed = "deny"
allow = [
    "MIT",
    "Apache-2.0",
]

[bans]
multiple-versions = "warn"
```

### ä»£ç å®‰å…¨

```rust
// âœ… å¥½ï¼šé¿å… unsafe
pub fn safe_function(data: &[u8]) -> Vec<u8> {
    data.to_vec()
}

// âš ï¸ å¿…è¦æ—¶ä½¿ç”¨ unsafeï¼Œå¹¶æ·»åŠ å®‰å…¨è¯´æ˜
/// # Safety
///
/// è°ƒç”¨è€…å¿…é¡»ç¡®ä¿ ptr æŒ‡å‘æœ‰æ•ˆçš„å†…å­˜
pub unsafe fn unsafe_function(ptr: *const u8, len: usize) -> Vec<u8> {
    std::slice::from_raw_parts(ptr, len).to_vec()
}
```

### ä¾›åº”é“¾å®‰å…¨

```toml
# âœ… é”å®šå…³é”®ä¾èµ–ç‰ˆæœ¬
[dependencies]
security-critical = "=1.0.0"

# âœ… ä½¿ç”¨ cargo-vet
# https://github.com/mozilla/cargo-vet
```

---

## 9. æ€§èƒ½æœ€ä½³å®è·µ

### ç¼–è¯‘æ—¶ä¼˜åŒ–

```toml
[profile.release]
opt-level = 3
lto = "fat"
codegen-units = 1

# âœ… é’ˆå¯¹ CPU ä¼˜åŒ–
[profile.release.package."*"]
opt-level = 3

# âœ… ä½¿ç”¨ç¼–è¯‘æ—¶ç‰¹æ€§æ£€æŸ¥
```

```rust
// âœ… ä½¿ç”¨ const è®¡ç®—
const fn calculate_size() -> usize {
    100 * std::mem::size_of::<u64>()
}
```

### è¿è¡Œæ—¶ä¼˜åŒ–

```rust
// âœ… å¥½ï¼šé¢„åˆ†é…å®¹é‡
let mut vec = Vec::with_capacity(1000);

// âŒ å·®ï¼šåŠ¨æ€å¢é•¿
let mut vec = Vec::new();

// âœ… å¥½ï¼šä½¿ç”¨è¿­ä»£å™¨
let sum: i32 = numbers.iter().sum();

// âŒ å·®ï¼šæ‰‹åŠ¨å¾ªç¯
let mut sum = 0;
for &n in &numbers {
    sum += n;
}
```

### åˆ†æå·¥å…·

```bash
# âœ… ä½¿ç”¨ flamegraph
cargo install flamegraph
cargo flamegraph

# âœ… ä½¿ç”¨ criterion åŸºå‡†æµ‹è¯•
cargo bench

# âœ… ä½¿ç”¨ cargo-bloat æ£€æŸ¥äºŒè¿›åˆ¶å¤§å°
cargo install cargo-bloat
cargo bloat --release
```

---

## 10. CI/CD æœ€ä½³å®è·µ

### GitHub Actions

```yaml
# .github/workflows/ci.yml

name: CI

on: [push, pull_request]

jobs:
  test:
    name: Test
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [ubuntu-latest, windows-latest, macos-latest]
        rust: [stable, beta, nightly]

    steps:
      - uses: actions/checkout@v3

      - uses: actions-rs/toolchain@v1
        with:
          toolchain: ${{ matrix.rust }}

      - uses: actions/cache@v3
        with:
          path: |
            ~/.cargo/
            target/
          key: ${{ runner.os }}-cargo-${{ hashFiles('**/Cargo.lock') }}

      - name: Build
        run: cargo build --verbose

      - name: Test
        run: cargo test --verbose

      - name: Clippy
        run: cargo clippy -- -D warnings

      - name: Format
        run: cargo fmt -- --check
```

### æµ‹è¯•çŸ©é˜µ

```yaml
strategy:
  matrix:
    os: [ubuntu-latest, windows-latest, macos-latest]
    rust: [stable, beta]
    features: [default, full, minimal]
```

### è‡ªåŠ¨å‘å¸ƒ

```yaml
# .github/workflows/release.yml

name: Release

on:
  push:
    tags:
      - "v*"

jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions-rs/toolchain@v1
        with:
          toolchain: stable
      - run: cargo publish --token ${{ secrets.CARGO_TOKEN }}
```

---

## ğŸ“š å®è·µæ¸…å•

### é¡¹ç›®å¯åŠ¨æ¸…å•

- [ ] ä½¿ç”¨ `cargo new` åˆ›å»ºé¡¹ç›®
- [ ] æ·»åŠ  LICENSE æ–‡ä»¶
- [ ] ç¼–å†™ README.md
- [ ] è®¾ç½® .gitignore
- [ ] é…ç½® Cargo.toml å…ƒæ•°æ®
- [ ] è®¾ç½® CI/CD

### å¼€å‘è¿‡ç¨‹æ¸…å•

- [ ] ç¼–å†™å•å…ƒæµ‹è¯•
- [ ] ç¼–å†™é›†æˆæµ‹è¯•
- [ ] æ·»åŠ æ–‡æ¡£æ³¨é‡Š
- [ ] è¿è¡Œ `cargo clippy`
- [ ] è¿è¡Œ `cargo fmt`
- [ ] æ£€æŸ¥æµ‹è¯•è¦†ç›–ç‡

### å‘å¸ƒå‰æ¸…å•

- [ ] æ›´æ–°ç‰ˆæœ¬å·
- [ ] æ›´æ–° CHANGELOG.md
- [ ] è¿è¡Œæ‰€æœ‰æµ‹è¯•
- [ ] æ£€æŸ¥æ–‡æ¡£
- [ ] è¿è¡Œ `cargo audit`
- [ ] `cargo publish --dry-run`
- [ ] åˆ›å»º Git tag
- [ ] å‘å¸ƒåˆ° crates.io

---

## ğŸ” åæ¨¡å¼è­¦ç¤º

### âŒ ä¸è¦è¿™æ ·åš

1. **è¿‡åº¦ä½¿ç”¨ `unsafe`**

   ```rust
   // âŒ ä¸å¿…è¦çš„ unsafe
   unsafe {
       let x = 42;
   }
   ```

2. **å¿½ç•¥é”™è¯¯**

   ```rust
   // âŒ å¿½ç•¥ Result
   file.read_to_string(&mut contents).unwrap();

   // âœ… æ­£ç¡®å¤„ç†é”™è¯¯
   file.read_to_string(&mut contents)?;
   ```

3. **è¿‡åº¦ä¾èµ–**

   ```toml
   # âŒ ä¾èµ–å¤ªå¤š
   [dependencies]
   # 50+ ä¸ªä¾èµ–

   # âœ… æœ€å°åŒ–ä¾èµ–
   [dependencies]
   # åªæ·»åŠ å¿…è¦çš„ä¾èµ–
   ```

4. **ä¸é”å®šç‰ˆæœ¬**

   ```bash
   # âŒ ä¸æäº¤ Cargo.lockï¼ˆåº”ç”¨é¡¹ç›®ï¼‰
   echo "Cargo.lock" >> .gitignore

   # âœ… æäº¤ Cargo.lockï¼ˆåº”ç”¨é¡¹ç›®ï¼‰
   git add Cargo.lock
   ```

---

## ğŸ“– å»¶ä¼¸é˜…è¯»

### å®˜æ–¹èµ„æº

- [Rust API Guidelines](https://rust-lang.github.io/api-guidelines/)
- [The Cargo Book](https://doc.rust-lang.org/cargo/)
- [Rust Performance Book](https://nnethercote.github.io/perf-book/)

### ç¤¾åŒºèµ„æº

- [blessed.rs](https://blessed.rs/) - æ¨èçš„ crate
- [lib.rs](https://lib.rs/) - Crate æœç´¢
- [This Week in Rust](https://this-week-in-rust.org/)

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**æœ€åæ›´æ–°**: 2025-12-11
**é€‚ç”¨ç‰ˆæœ¬**: Rust 1.92.0+

_æœ€ä½³å®è·µæ˜¯ç»éªŒçš„ç»“æ™¶ã€‚_ ğŸ¦€âœ¨
