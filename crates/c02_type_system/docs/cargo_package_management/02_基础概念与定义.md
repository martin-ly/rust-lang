# Cargo åŸºç¡€æ¦‚å¿µä¸å®šä¹‰

## ğŸ“‹ ç›®å½•

- [Cargo åŸºç¡€æ¦‚å¿µä¸å®šä¹‰](#cargo-åŸºç¡€æ¦‚å¿µä¸å®šä¹‰)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [ğŸ¯ æ¦‚å¿µä½“ç³»æ¦‚è§ˆ](#-æ¦‚å¿µä½“ç³»æ¦‚è§ˆ)
  - [1. Packageï¼ˆåŒ…ï¼‰](#1-packageåŒ…)
    - [å®šä¹‰](#å®šä¹‰)
    - [ç»“æ„](#ç»“æ„)
    - [æ¸…å•æ–‡ä»¶ (Cargo.toml)](#æ¸…å•æ–‡ä»¶-cargotoml)
    - [Package ç±»å‹](#package-ç±»å‹)
      - [åº“ Package](#åº“-package)
      - [äºŒè¿›åˆ¶ Package](#äºŒè¿›åˆ¶-package)
  - [2. Crateï¼ˆå•å…ƒåŒ…ï¼‰](#2-crateå•å…ƒåŒ…)
    - [2.1 å®šä¹‰](#21-å®šä¹‰)
    - [2.2 Crate ç±»å‹](#22-crate-ç±»å‹)
      - [åº“ Crate (Library Crate)](#åº“-crate-library-crate)
      - [äºŒè¿›åˆ¶ Crate (Binary Crate)](#äºŒè¿›åˆ¶-crate-binary-crate)
    - [Crate æ ¹](#crate-æ ¹)
    - [å…³ç³»ç¤ºä¾‹](#å…³ç³»ç¤ºä¾‹)
  - [3. Moduleï¼ˆæ¨¡å—ï¼‰](#3-moduleæ¨¡å—)
    - [3.1 å®šä¹‰](#31-å®šä¹‰)
    - [æ¨¡å—å£°æ˜](#æ¨¡å—å£°æ˜)
      - [å†…è”æ¨¡å—](#å†…è”æ¨¡å—)
      - [æ–‡ä»¶æ¨¡å—](#æ–‡ä»¶æ¨¡å—)
    - [å¯è§æ€§æ§åˆ¶](#å¯è§æ€§æ§åˆ¶)
    - [æ¨¡å—è·¯å¾„](#æ¨¡å—è·¯å¾„)
  - [4. Workspaceï¼ˆå·¥ä½œç©ºé—´ï¼‰](#4-workspaceå·¥ä½œç©ºé—´)
    - [4.1 å®šä¹‰](#41-å®šä¹‰)
    - [å·¥ä½œç©ºé—´ç»“æ„](#å·¥ä½œç©ºé—´ç»“æ„)
    - [é…ç½®](#é…ç½®)
    - [ä¼˜åŠ¿](#ä¼˜åŠ¿)
  - [5. Targetï¼ˆæ„å»ºç›®æ ‡ï¼‰](#5-targetæ„å»ºç›®æ ‡)
    - [5.1 å®šä¹‰](#51-å®šä¹‰)
    - [Target ç±»å‹](#target-ç±»å‹)
    - [5.2 é…ç½®](#52-é…ç½®)
  - [6. Profileï¼ˆæ„å»ºé…ç½®ï¼‰](#6-profileæ„å»ºé…ç½®)
    - [6.1 å®šä¹‰](#61-å®šä¹‰)
    - [å†…ç½® Profile](#å†…ç½®-profile)
    - [è‡ªå®šä¹‰ Profile](#è‡ªå®šä¹‰-profile)
  - [7. Featureï¼ˆç‰¹æ€§ï¼‰](#7-featureç‰¹æ€§)
    - [7.1 å®šä¹‰](#71-å®šä¹‰)
    - [ç‰¹æ€§å£°æ˜](#ç‰¹æ€§å£°æ˜)
    - [ç‰¹æ€§ä½¿ç”¨](#ç‰¹æ€§ä½¿ç”¨)
  - [8. Dependencyï¼ˆä¾èµ–ï¼‰](#8-dependencyä¾èµ–)
    - [8.1 å®šä¹‰](#81-å®šä¹‰)
    - [ä¾èµ–ç±»å‹](#ä¾èµ–ç±»å‹)
    - [ä¾èµ–æ¥æº](#ä¾èµ–æ¥æº)
  - [ğŸ”— æ¦‚å¿µå…³ç³»å›¾](#-æ¦‚å¿µå…³ç³»å›¾)
  - [ğŸ“Š æ¦‚å¿µå¯¹æ¯”è¡¨](#-æ¦‚å¿µå¯¹æ¯”è¡¨)
  - [ğŸ’¡ å¸¸è§è¯¯è§£](#-å¸¸è§è¯¯è§£)
    - [è¯¯è§£ 1: Package = Crate](#è¯¯è§£-1-package--crate)
    - [è¯¯è§£ 2: Module = File](#è¯¯è§£-2-module--file)
    - [è¯¯è§£ 3: Workspace å¿…éœ€](#è¯¯è§£-3-workspace-å¿…éœ€)
  - [ğŸ¯ å®æˆ˜ç†è§£](#-å®æˆ˜ç†è§£)
    - [åœºæ™¯ 1: å•ä¸€äºŒè¿›åˆ¶é¡¹ç›®](#åœºæ™¯-1-å•ä¸€äºŒè¿›åˆ¶é¡¹ç›®)
    - [åœºæ™¯ 2: åº“é¡¹ç›®](#åœºæ™¯-2-åº“é¡¹ç›®)
    - [åœºæ™¯ 3: æ··åˆé¡¹ç›®](#åœºæ™¯-3-æ··åˆé¡¹ç›®)
    - [åœºæ™¯ 4: å·¥ä½œç©ºé—´é¡¹ç›®](#åœºæ™¯-4-å·¥ä½œç©ºé—´é¡¹ç›®)
  - [ğŸ“š æ·±å…¥å­¦ä¹ ](#-æ·±å…¥å­¦ä¹ )
    - [ä¸‹ä¸€æ­¥é˜…è¯»](#ä¸‹ä¸€æ­¥é˜…è¯»)
    - [å®è·µå»ºè®®](#å®è·µå»ºè®®)

---

## ğŸ¯ æ¦‚å¿µä½“ç³»æ¦‚è§ˆ

Cargo çš„æ ¸å¿ƒæ¦‚å¿µæ„æˆäº†ä¸€ä¸ªå±‚æ¬¡åˆ†æ˜çš„ä½“ç³»ï¼š

```mermaid
graph TD
    A[Workspace å·¥ä½œç©ºé—´] --> B[Package åŒ…1]
    A --> C[Package åŒ…2]
    B --> D[Crate åº“]
    B --> E[Crate äºŒè¿›åˆ¶]
    D --> F[Module æ¨¡å—1]
    D --> G[Module æ¨¡å—2]
    E --> H[Module main]
    B --> I[Dependencies ä¾èµ–]
    B --> J[Features ç‰¹æ€§]
    B --> K[Profiles é…ç½®]
```

---

## 1. Packageï¼ˆåŒ…ï¼‰

### å®šä¹‰

**Packageï¼ˆåŒ…ï¼‰** æ˜¯ Cargo çš„åŸºæœ¬ç»„ç»‡å•ä½ï¼Œæ˜¯ä¸€ä¸ªåŒ…å« `Cargo.toml` æ–‡ä»¶çš„ç›®å½•ã€‚

**æ ¸å¿ƒç‰¹å¾**:

- å¿…é¡»åŒ…å«ä¸€ä¸ª `Cargo.toml` æ–‡ä»¶
- å¯ä»¥åŒ…å« 0 ä¸ªæˆ– 1 ä¸ªåº“ crate
- å¯ä»¥åŒ…å«ä»»æ„æ•°é‡çš„äºŒè¿›åˆ¶ crate
- è‡³å°‘åŒ…å«ä¸€ä¸ª crateï¼ˆåº“æˆ–äºŒè¿›åˆ¶ï¼‰

### ç»“æ„

```text
my-package/
â”œâ”€â”€ Cargo.toml          # Package æ¸…å•ï¼ˆå¿…éœ€ï¼‰
â”œâ”€â”€ Cargo.lock          # ä¾èµ–é”å®šæ–‡ä»¶ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ src/                # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ lib.rs          # åº“ crate æ ¹ï¼ˆå¯é€‰ï¼‰
â”‚   â”œâ”€â”€ main.rs         # é»˜è®¤äºŒè¿›åˆ¶ crate æ ¹ï¼ˆå¯é€‰ï¼‰
â”‚   â””â”€â”€ bin/            # é¢å¤–äºŒè¿›åˆ¶ crateï¼ˆå¯é€‰ï¼‰
â”‚       â”œâ”€â”€ tool1.rs
â”‚       â””â”€â”€ tool2.rs
â”œâ”€â”€ tests/              # é›†æˆæµ‹è¯•ï¼ˆå¯é€‰ï¼‰
â”‚   â””â”€â”€ integration_test.rs
â”œâ”€â”€ benches/            # æ€§èƒ½æµ‹è¯•ï¼ˆå¯é€‰ï¼‰
â”‚   â””â”€â”€ benchmark.rs
â”œâ”€â”€ examples/           # ç¤ºä¾‹ä»£ç ï¼ˆå¯é€‰ï¼‰
â”‚   â””â”€â”€ example1.rs
â””â”€â”€ target/             # æ„å»ºè¾“å‡ºç›®å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
```

### æ¸…å•æ–‡ä»¶ (Cargo.toml)

```toml
[package]
name = "my-package"        # Package åç§°ï¼ˆå¿…éœ€ï¼‰
version = "0.1.0"         # ç‰ˆæœ¬å·ï¼ˆå¿…éœ€ï¼‰
edition = "2024"          # Rust ç‰ˆæœ¬ï¼ˆå¿…éœ€ï¼‰
authors = ["Author"]      # ä½œè€…
description = "..."       # æè¿°
license = "MIT"           # è®¸å¯è¯
repository = "..."        # ä»“åº“åœ°å€
rust-version = "1.93"     # æœ€ä½ Rust ç‰ˆæœ¬

# ä¾èµ–
[dependencies]
serde = "1.0"

# å¼€å‘ä¾èµ–
[dev-dependencies]
proptest = "1.0"

# æ„å»ºä¾èµ–
[build-dependencies]
cc = "1.0"
```

### Package ç±»å‹

#### åº“ Package

```bash
cargo new my-lib --lib
```

ç”Ÿæˆç»“æ„ï¼š

```text
my-lib/
â”œâ”€â”€ Cargo.toml
â””â”€â”€ src/
    â””â”€â”€ lib.rs        # åº“ crate æ ¹
```

#### äºŒè¿›åˆ¶ Package

```bash
cargo new my-app
```

ç”Ÿæˆç»“æ„ï¼š

```text
my-app/
â”œâ”€â”€ Cargo.toml
â””â”€â”€ src/
    â””â”€â”€ main.rs       # äºŒè¿›åˆ¶ crate æ ¹
```

---

## 2. Crateï¼ˆå•å…ƒåŒ…ï¼‰

### 2.1 å®šä¹‰

**Crateï¼ˆå•å…ƒåŒ…ï¼‰** æ˜¯ Rust ç¼–è¯‘å™¨çš„ç¼–è¯‘å•å…ƒï¼Œæ˜¯ä»£ç çš„é€»è¾‘ç»„ç»‡å•ä½ã€‚

**æ ¸å¿ƒç‰¹å¾**:

- Rust ç¼–è¯‘å™¨ä¸€æ¬¡ç¼–è¯‘ä¸€ä¸ª crate
- æ¯ä¸ª crate æœ‰ä¸€ä¸ªæ ¹æ¨¡å—
- Crate æ˜¯æ¨¡å—æ ‘çš„æ ¹èŠ‚ç‚¹

### 2.2 Crate ç±»å‹

#### åº“ Crate (Library Crate)

```rust
// src/lib.rs
pub fn public_function() {
    println!("è¿™æ˜¯ä¸€ä¸ªå…¬å…±å‡½æ•°");
}

fn private_function() {
    println!("è¿™æ˜¯ä¸€ä¸ªç§æœ‰å‡½æ•°");
}

pub mod submodule {
    pub fn another_function() {
        println!("å­æ¨¡å—å‡½æ•°");
    }
}
```

**ç‰¹ç‚¹**:

- ä¾›å…¶ä»– crate ä½¿ç”¨
- å®šä¹‰å…¬å…± API
- ç¼–è¯‘ä¸º `.rlib` æ–‡ä»¶

#### äºŒè¿›åˆ¶ Crate (Binary Crate)

```rust
// src/main.rs
fn main() {
    println!("Hello, world!");
}
```

**ç‰¹ç‚¹**:

- å¯ç‹¬ç«‹è¿è¡Œçš„ç¨‹åº
- å¿…é¡»æœ‰ `main` å‡½æ•°
- ç¼–è¯‘ä¸ºå¯æ‰§è¡Œæ–‡ä»¶

### Crate æ ¹

| Crate ç±»å‹           | é»˜è®¤æ ¹æ–‡ä»¶      | è¯´æ˜             |
| :--- | :--- | :--- || åº“ crate             | `src/lib.rs`    | Package çš„åº“ API |
| äºŒè¿›åˆ¶ crateï¼ˆé»˜è®¤ï¼‰ | `src/main.rs`   | é»˜è®¤å¯æ‰§è¡Œæ–‡ä»¶   |
| äºŒè¿›åˆ¶ crateï¼ˆé¢å¤–ï¼‰ | `src/bin/*.rs`  | é¢å¤–å¯æ‰§è¡Œæ–‡ä»¶   |
| é›†æˆæµ‹è¯•             | `tests/*.rs`    | æµ‹è¯• crate       |
| æ€§èƒ½æµ‹è¯•             | `benches/*.rs`  | åŸºå‡†æµ‹è¯• crate   |
| ç¤ºä¾‹                 | `examples/*.rs` | ç¤ºä¾‹ crate       |

### å…³ç³»ç¤ºä¾‹

```toml
# Cargo.toml
[package]
name = "my-project"     # Package åç§°

# è¿™ä¸ª package åŒ…å«ï¼š
# 1. åº“ crate: src/lib.rs    (åç§°: my-project)
# 2. äºŒè¿›åˆ¶ crate: src/main.rs  (åç§°: my-project)
# 3. é¢å¤–äºŒè¿›åˆ¶: src/bin/tool.rs  (åç§°: tool)

[[bin]]
name = "custom-binary"
path = "src/custom.rs"
```

---

## 3. Moduleï¼ˆæ¨¡å—ï¼‰

### 3.1 å®šä¹‰

**Moduleï¼ˆæ¨¡å—ï¼‰** æ˜¯ Rust ä¸­ä»£ç çš„ç»„ç»‡å•ä½ï¼Œç”¨äºæ§åˆ¶ä½œç”¨åŸŸå’Œéšç§æ€§ã€‚

**æ ¸å¿ƒç‰¹å¾**:

- ç»„ç»‡ä»£ç ç»“æ„
- æ§åˆ¶å¯è§æ€§
- ç®¡ç†å‘½åç©ºé—´

### æ¨¡å—å£°æ˜

#### å†…è”æ¨¡å—

```rust
// src/lib.rs
mod network {
    fn connect() {
        println!("è¿æ¥ç½‘ç»œ");
    }

    pub fn public_connect() {
        connect();  // åŒæ¨¡å—å¯è®¿é—®
    }
}
```

#### æ–‡ä»¶æ¨¡å—

```text
src/
â”œâ”€â”€ lib.rs
â”œâ”€â”€ network.rs          # network æ¨¡å—
â””â”€â”€ network/            # network æ¨¡å—ï¼ˆç›®å½•å½¢å¼ï¼‰
    â”œâ”€â”€ mod.rs          # æ¨¡å—æ ¹
    â”œâ”€â”€ client.rs       # å­æ¨¡å—
    â””â”€â”€ server.rs       # å­æ¨¡å—
```

```rust
// src/lib.rs
mod network;            // å£°æ˜ network æ¨¡å—

// src/network.rs æˆ– src/network/mod.rs
pub mod client;
pub mod server;

pub fn connect() {}
```

### å¯è§æ€§æ§åˆ¶

```rust
mod my_mod {
    pub fn public_fn() {}              // å…¬å¼€
    fn private_fn() {}                 // ç§æœ‰ï¼ˆé»˜è®¤ï¼‰
    pub(crate) fn crate_fn() {}        // crate å†…å¯è§
    pub(super) fn parent_fn() {}       // çˆ¶æ¨¡å—å¯è§
    pub(in crate::my_mod) fn limited() {}  // ç‰¹å®šè·¯å¾„å¯è§
}
```

### æ¨¡å—è·¯å¾„

```rust
// ç»å¯¹è·¯å¾„
crate::network::client::connect();

// ç›¸å¯¹è·¯å¾„
self::utils::helper();    // å½“å‰æ¨¡å—
super::parent_fn();       // çˆ¶æ¨¡å—

// ä½¿ç”¨ use ç®€åŒ–
use crate::network::client;
client::connect();

// é‡å‘½å
use std::io::Result as IoResult;
```

---

## 4. Workspaceï¼ˆå·¥ä½œç©ºé—´ï¼‰

### 4.1 å®šä¹‰

**Workspaceï¼ˆå·¥ä½œç©ºé—´ï¼‰** æ˜¯ä¸€ç»„å…±äº«ç›¸åŒ `Cargo.lock` å’Œè¾“å‡ºç›®å½•çš„ package é›†åˆã€‚

**æ ¸å¿ƒç‰¹å¾**:

- å¤šä¸ªç›¸å…³ package çš„å®¹å™¨
- å…±äº«ä¾èµ–ç‰ˆæœ¬
- ç»Ÿä¸€æ„å»ºè¾“å‡º
- ç®€åŒ–ä¾èµ–ç®¡ç†

### å·¥ä½œç©ºé—´ç»“æ„

```text
my-workspace/
â”œâ”€â”€ Cargo.toml          # å·¥ä½œç©ºé—´æ¸…å•
â”œâ”€â”€ Cargo.lock          # å…±äº«çš„ä¾èµ–é”å®š
â”œâ”€â”€ target/             # å…±äº«çš„æ„å»ºè¾“å‡º
â”œâ”€â”€ crate1/             # æˆå‘˜ package 1
â”‚   â”œâ”€â”€ Cargo.toml
â”‚   â””â”€â”€ src/
â”œâ”€â”€ crate2/             # æˆå‘˜ package 2
â”‚   â”œâ”€â”€ Cargo.toml
â”‚   â””â”€â”€ src/
â””â”€â”€ crate3/             # æˆå‘˜ package 3
    â”œâ”€â”€ Cargo.toml
    â””â”€â”€ src/
```

### é…ç½®

```toml
# æ ¹ Cargo.toml
[workspace]
members = [
    "crate1",
    "crate2",
    "crate3",
]

exclude = [
    "old-crate",
]

resolver = "3"          # Rust 1.93.0+ æ¨è

# å·¥ä½œç©ºé—´çº§åˆ«é…ç½®
[workspace.package]
version = "0.1.0"
edition = "2024"
license = "MIT"

# å·¥ä½œç©ºé—´çº§åˆ«ä¾èµ–
[workspace.dependencies]
tokio = { version = "1.48", features = ["full"] }
serde = { version = "1.0", features = ["derive"] }
```

### ä¼˜åŠ¿

1. **ç»Ÿä¸€ä¾èµ–**: æ‰€æœ‰æˆå‘˜ä½¿ç”¨ç›¸åŒç‰ˆæœ¬
2. **ç®€åŒ–ç®¡ç†**: ä¸€æ¬¡æ›´æ–°ï¼Œå…¨éƒ¨ç”Ÿæ•ˆ
3. **åŠ é€Ÿæ„å»º**: å…±äº«ç¼–è¯‘ç¼“å­˜
4. **ç®€åŒ–æµ‹è¯•**: `cargo test --workspace`

---

## 5. Targetï¼ˆæ„å»ºç›®æ ‡ï¼‰

### 5.1 å®šä¹‰

**Targetï¼ˆæ„å»ºç›®æ ‡ï¼‰** æ˜¯ package ä¸­å¯ä»¥è¢«æ„å»ºçš„ç»„ä»¶ã€‚

### Target ç±»å‹

| Target ç±»å‹ | è¯´æ˜     | é…ç½®          |
| :--- | :--- | :--- || `lib`       | åº“       | `[lib]`       |
| `bin`       | äºŒè¿›åˆ¶   | `[[bin]]`     |
| `example`   | ç¤ºä¾‹     | `[[example]]` |
| `test`      | é›†æˆæµ‹è¯• | `[[test]]`    |
| `bench`     | æ€§èƒ½æµ‹è¯• | `[[bench]]`   |

### 5.2 é…ç½®

```toml
[lib]
name = "my_lib"
path = "src/lib.rs"
crate-type = ["lib"]    # æˆ– "dylib", "staticlib", "cdylib"

[[bin]]
name = "my_app"
path = "src/main.rs"
required-features = ["cli"]

[[example]]
name = "demo"
path = "examples/demo.rs"
required-features = ["demo-feature"]

[[test]]
name = "integration"
path = "tests/integration.rs"

[[bench]]
name = "performance"
path = "benches/perf.rs"
harness = false         # ä½¿ç”¨è‡ªå®šä¹‰æµ‹è¯•æ¡†æ¶
```

---

## 6. Profileï¼ˆæ„å»ºé…ç½®ï¼‰

### 6.1 å®šä¹‰

**Profileï¼ˆæ„å»ºé…ç½®ï¼‰** å®šä¹‰äº†ç¼–è¯‘å™¨è®¾ç½®ï¼Œæ§åˆ¶æ„å»ºè¡Œä¸ºå’Œè¾“å‡ºç‰¹æ€§ã€‚

### å†…ç½® Profile

```toml
# å¼€å‘æ„å»º
[profile.dev]
opt-level = 0           # ä¸ä¼˜åŒ–
debug = true            # åŒ…å«è°ƒè¯•ä¿¡æ¯
overflow-checks = true  # æ£€æŸ¥æº¢å‡º

# å‘å¸ƒæ„å»º
[profile.release]
opt-level = 3           # æœ€å¤§ä¼˜åŒ–
debug = false           # ä¸åŒ…å«è°ƒè¯•ä¿¡æ¯
lto = false             # ä¸å¯ç”¨ LTOï¼ˆå¯é…ç½®ï¼‰

# æµ‹è¯•æ„å»º
[profile.test]
opt-level = 0
debug = true

# åŸºå‡†æµ‹è¯•æ„å»º
[profile.bench]
opt-level = 3
debug = false
```

### è‡ªå®šä¹‰ Profile

```toml
# Rust 1.93.0+ æ”¯æŒè‡ªå®šä¹‰ profile
[profile.release-with-debug]
inherits = "release"    # ç»§æ‰¿ release é…ç½®
debug = true            # è¦†ç›–è°ƒè¯•ä¿¡æ¯è®¾ç½®

# ä½¿ç”¨
# cargo build --profile release-with-debug
```

---

## 7. Featureï¼ˆç‰¹æ€§ï¼‰

### 7.1 å®šä¹‰

**Featureï¼ˆç‰¹æ€§ï¼‰** æ˜¯æ¡ä»¶ç¼–è¯‘çš„æœºåˆ¶ï¼Œå…è®¸å¯é€‰åœ°å¯ç”¨ä»£ç å’Œä¾èµ–ã€‚

### ç‰¹æ€§å£°æ˜

```toml
[features]
# é»˜è®¤ç‰¹æ€§
default = ["std"]

# åŸºç¡€ç‰¹æ€§
std = []
alloc = []

# åŠŸèƒ½ç‰¹æ€§
json = ["dep:serde_json"]
yaml = ["dep:serde_yaml"]
full = ["json", "yaml", "advanced"]

# é«˜çº§ç‰¹æ€§
advanced = []
```

### ç‰¹æ€§ä½¿ç”¨

```rust
// æ¡ä»¶ç¼–è¯‘
#[cfg(feature = "json")]
pub mod json_support {
    // åªåœ¨å¯ç”¨ json ç‰¹æ€§æ—¶ç¼–è¯‘
}

// ä»£ç ä¸­æ£€æŸ¥
if cfg!(feature = "advanced") {
    // è¿è¡Œæ—¶åˆ†æ”¯
}
```

```bash
# å¯ç”¨ç‰¹æ€§
cargo build --features "json,yaml"
cargo build --all-features
cargo build --no-default-features --features json
```

---

## 8. Dependencyï¼ˆä¾èµ–ï¼‰

### 8.1 å®šä¹‰

**Dependencyï¼ˆä¾èµ–ï¼‰** æ˜¯ package ä¾èµ–çš„å¤–éƒ¨ crateã€‚

### ä¾èµ–ç±»å‹

```toml
# æ™®é€šä¾èµ–ï¼ˆè¿è¡Œæ—¶éœ€è¦ï¼‰
[dependencies]
serde = "1.0"

# å¼€å‘ä¾èµ–ï¼ˆä»…æµ‹è¯•å’Œå¼€å‘ï¼‰
[dev-dependencies]
proptest = "1.0"
criterion = "0.5"

# æ„å»ºä¾èµ–ï¼ˆæ„å»ºè„šæœ¬éœ€è¦ï¼‰
[build-dependencies]
cc = "1.0"

# å¹³å°ç‰¹å®šä¾èµ–
[target.'cfg(unix)'.dependencies]
libc = "0.2"

[target.'cfg(windows)'.dependencies]
winapi = "0.3"
```

### ä¾èµ–æ¥æº

```toml
[dependencies]
# crates.ioï¼ˆé»˜è®¤ï¼‰
serde = "1.0"

# è·¯å¾„ä¾èµ–
my-lib = { path = "../my-lib" }

# Git ä¾èµ–
experimental = { git = "https://github.com/user/repo" }
experimental2 = { git = "https://github.com/user/repo", branch = "main" }
experimental3 = { git = "https://github.com/user/repo", tag = "v1.0" }
experimental4 = { git = "https://github.com/user/repo", rev = "abc123" }

# å·¥ä½œç©ºé—´ç»§æ‰¿
tokio = { workspace = true }
```

---

## ğŸ”— æ¦‚å¿µå…³ç³»å›¾

```mermaid
graph LR
    A[Workspace] --> B[Package 1]
    A --> C[Package 2]
    B --> D[Lib Crate]
    B --> E[Bin Crate 1]
    B --> F[Bin Crate 2]
    D --> G[Module A]
    D --> H[Module B]
    G --> I[SubModule]
    B --> J[Dependencies]
    B --> K[Features]
    B --> L[Profiles]
    B --> M[Targets]
```

---

## ğŸ“Š æ¦‚å¿µå¯¹æ¯”è¡¨

| æ¦‚å¿µ           | ä½œç”¨åŸŸ       | æ•°é‡é™åˆ¶        | ä¸»è¦ç”¨é€”     |
| :--- | :--- | :--- | :--- || **Workspace**  | å¤šä¸ª package | 1 ä¸ªå·¥ä½œç©ºé—´    | ç»„ç»‡ç›¸å…³é¡¹ç›® |
| **Package**    | å¤šä¸ª crate   | N ä¸ª package    | å‘å¸ƒå•ä½     |
| **Crate**      | å¤šä¸ª module  | 1 åº“ + N äºŒè¿›åˆ¶ | ç¼–è¯‘å•ä½     |
| **Module**     | ä»£ç å—       | æ— é™åˆ¶          | ä»£ç ç»„ç»‡     |
| **Target**     | Crate ç±»å‹   | å¤šä¸ª            | æ„å»ºäº§ç‰©     |
| **Feature**    | å¯é€‰åŠŸèƒ½     | æ— é™åˆ¶          | æ¡ä»¶ç¼–è¯‘     |
| **Dependency** | å¤–éƒ¨ crate   | æ— é™åˆ¶          | ä»£ç å¤ç”¨     |
| **Profile**    | ç¼–è¯‘é…ç½®     | 4 å†…ç½® + è‡ªå®šä¹‰ | æ„å»ºä¼˜åŒ–     |

---

## ğŸ’¡ å¸¸è§è¯¯è§£

### è¯¯è§£ 1: Package = Crate

âŒ **é”™è¯¯**: "ä¸€ä¸ª package å°±æ˜¯ä¸€ä¸ª crate"

âœ… **æ­£ç¡®**:

- ä¸€ä¸ª package å¯ä»¥åŒ…å«å¤šä¸ª crate
- Package æ˜¯ç‰©ç†ç»„ç»‡ï¼ŒCrate æ˜¯ç¼–è¯‘å•ä½

```text
my-package/
â”œâ”€â”€ src/lib.rs          # åº“ crate
â”œâ”€â”€ src/main.rs         # äºŒè¿›åˆ¶ crate
â””â”€â”€ src/bin/tool.rs     # å¦ä¸€ä¸ªäºŒè¿›åˆ¶ crate
                        # 1 package = 3 crates
```

### è¯¯è§£ 2: Module = File

âŒ **é”™è¯¯**: "ä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶"

âœ… **æ­£ç¡®**:

- æ¨¡å—å¯ä»¥åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å®šä¹‰å¤šä¸ª
- æ¨¡å—ä¹Ÿå¯ä»¥åˆ†æ•£åœ¨å¤šä¸ªæ–‡ä»¶ä¸­

```rust
// ä¸€ä¸ªæ–‡ä»¶å¤šä¸ªæ¨¡å—
mod mod1 {}
mod mod2 {}

// ä¸€ä¸ªæ¨¡å—å¤šä¸ªæ–‡ä»¶
mod network;        // å¯¹åº” network/ ç›®å½•
```

### è¯¯è§£ 3: Workspace å¿…éœ€

âŒ **é”™è¯¯**: "æ‰€æœ‰é¡¹ç›®éƒ½éœ€è¦å·¥ä½œç©ºé—´"

âœ… **æ­£ç¡®**:

- å• package é¡¹ç›®ä¸éœ€è¦å·¥ä½œç©ºé—´
- å·¥ä½œç©ºé—´ç”¨äºç®¡ç†å¤šä¸ªç›¸å…³ package

---

## ğŸ¯ å®æˆ˜ç†è§£

### åœºæ™¯ 1: å•ä¸€äºŒè¿›åˆ¶é¡¹ç›®

```bash
cargo new hello-world
```

**ç»“æ„**:

```text
hello-world/              # Package
â”œâ”€â”€ Cargo.toml
â””â”€â”€ src/
    â””â”€â”€ main.rs           # äºŒè¿›åˆ¶ Crate
```

**æ¦‚å¿µæ˜ å°„**:

- 1 ä¸ª Package: `hello-world`
- 1 ä¸ª Binary Crate: `hello-world`
- 1 ä¸ª Module: `main` (éšå¼)

### åœºæ™¯ 2: åº“é¡¹ç›®

```bash
cargo new my-lib --lib
```

**ç»“æ„**:

```text
my-lib/                   # Package
â”œâ”€â”€ Cargo.toml
â””â”€â”€ src/
    â””â”€â”€ lib.rs            # åº“ Crate
```

**æ¦‚å¿µæ˜ å°„**:

- 1 ä¸ª Package: `my-lib`
- 1 ä¸ª Library Crate: `my-lib`
- 1+ ä¸ª Module: è‡ªå®šä¹‰

### åœºæ™¯ 3: æ··åˆé¡¹ç›®

**ç»“æ„**:

```text
my-project/               # Package
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ lib.rs            # åº“ Crate
â”‚   â”œâ”€â”€ main.rs           # é»˜è®¤äºŒè¿›åˆ¶ Crate
â”‚   â””â”€â”€ bin/
â”‚       â”œâ”€â”€ tool1.rs      # é¢å¤–äºŒè¿›åˆ¶ Crate
â”‚       â””â”€â”€ tool2.rs      # é¢å¤–äºŒè¿›åˆ¶ Crate
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ integration.rs    # æµ‹è¯• Crate
â””â”€â”€ examples/
    â””â”€â”€ demo.rs           # ç¤ºä¾‹ Crate
```

**æ¦‚å¿µæ˜ å°„**:

- 1 ä¸ª Package
- 6 ä¸ª Crateï¼ˆ1 åº“ + 3 äºŒè¿›åˆ¶ + 1 æµ‹è¯• + 1 ç¤ºä¾‹ï¼‰

### åœºæ™¯ 4: å·¥ä½œç©ºé—´é¡¹ç›®

**ç»“æ„**:

```text
my-workspace/             # Workspace
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ common/               # Package 1
â”‚   â”œâ”€â”€ Cargo.toml
â”‚   â””â”€â”€ src/lib.rs
â”œâ”€â”€ server/               # Package 2
â”‚   â”œâ”€â”€ Cargo.toml
â”‚   â””â”€â”€ src/main.rs
â””â”€â”€ client/               # Package 3
    â”œâ”€â”€ Cargo.toml
    â””â”€â”€ src/main.rs
```

**æ¦‚å¿µæ˜ å°„**:

- 1 ä¸ª Workspace
- 3 ä¸ª Package
- 3+ ä¸ª Crate

---

## ğŸ“š æ·±å…¥å­¦ä¹ 

### ä¸‹ä¸€æ­¥é˜…è¯»

1. [03\_ä¾èµ–ç®¡ç†è¯¦è§£.md](./03_ä¾èµ–ç®¡ç†è¯¦è§£.md) - æ·±å…¥ç†è§£ä¾èµ–
2. [05\_å·¥ä½œç©ºé—´ç®¡ç†.md](./05_å·¥ä½œç©ºé—´ç®¡ç†.md) - å·¥ä½œç©ºé—´å®è·µ
3. [10\_å®æˆ˜æ¡ˆä¾‹é›†.md](./10_å®æˆ˜æ¡ˆä¾‹é›†.md) - å®é™…é¡¹ç›®ç¤ºä¾‹

### å®è·µå»ºè®®

1. åˆ›å»ºä¸åŒç±»å‹çš„é¡¹ç›®æ¥ç†è§£æ¦‚å¿µ
2. æŸ¥çœ‹çŸ¥åé¡¹ç›®çš„ç»“æ„ï¼ˆå¦‚ tokio, serdeï¼‰
3. å°è¯•æ„å»ºè‡ªå·±çš„å·¥ä½œç©ºé—´é¡¹ç›®

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**æœ€åæ›´æ–°**: 2026-01-26
**é€‚ç”¨ç‰ˆæœ¬**: Rust 1.93.0+

_ç†è§£æ¦‚å¿µæ˜¯æŒæ¡å·¥å…·çš„ç¬¬ä¸€æ­¥ã€‚_ ğŸ¦€ğŸ“š
