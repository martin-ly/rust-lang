# 4.4 Rust ç±»å‹ç³»ç»Ÿ - è·¨è¯­è¨€å¯¹æ¯”

> **æ–‡æ¡£ç±»å‹**: Tier 4 - é«˜çº§å±‚  
> **æ–‡æ¡£å®šä½**: Rust vs å…¶ä»–è¯­è¨€çš„ç±»å‹ç³»ç»Ÿå¯¹æ¯”  
> **é€‚ç”¨å¯¹è±¡**: é«˜çº§å¼€å‘è€…  
> **å‰ç½®çŸ¥è¯†**: å¤šç§ç¼–ç¨‹è¯­è¨€ç»éªŒ  
> **æœ€åæ›´æ–°**: 2025-10-22

---

## ğŸ“‹ ç›®å½•

- [4.4 Rust ç±»å‹ç³»ç»Ÿ - è·¨è¯­è¨€å¯¹æ¯”](#44-rust-ç±»å‹ç³»ç»Ÿ---è·¨è¯­è¨€å¯¹æ¯”)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [ğŸ¯ æ¦‚è¿°](#-æ¦‚è¿°)
  - [1. Rust vs C/C++](#1-rust-vs-cc)
    - [å†…å­˜ç®¡ç†](#å†…å­˜ç®¡ç†)
    - [ç©ºæŒ‡é’ˆ](#ç©ºæŒ‡é’ˆ)
  - [2. Rust vs Haskell](#2-rust-vs-haskell)
    - [çº¯åº¦](#çº¯åº¦)
    - [é«˜é˜¶ç±»å‹](#é«˜é˜¶ç±»å‹)
  - [3. Rust vs Go](#3-rust-vs-go)
    - [é”™è¯¯å¤„ç†](#é”™è¯¯å¤„ç†)
    - [æ³›å‹](#æ³›å‹)
  - [4. Rust vs Java/C#1](#4-rust-vs-javac1)
    - [Null å®‰å…¨](#null-å®‰å…¨)
    - [æ‰€æœ‰æƒ vs GC](#æ‰€æœ‰æƒ-vs-gc)
  - [5. Rust vs Swift](#5-rust-vs-swift)
    - [å†…å­˜ç®¡ç†1](#å†…å­˜ç®¡ç†1)
    - [Optional](#optional)
  - [6. Rust vs TypeScript](#6-rust-vs-typescript)
    - [ç±»å‹ç³»ç»Ÿ](#ç±»å‹ç³»ç»Ÿ)
    - [Null vs Option](#null-vs-option)
  - [7. ç±»å‹ç³»ç»Ÿç‰¹æ€§å¯¹æ¯”](#7-ç±»å‹ç³»ç»Ÿç‰¹æ€§å¯¹æ¯”)
  - [8. æ€»ç»“](#8-æ€»ç»“)
  - [9. å‚è€ƒèµ„æº](#9-å‚è€ƒèµ„æº)

---

## ğŸ¯ æ¦‚è¿°

**ç±»å‹ç³»ç»Ÿç‰¹æ€§å¯¹æ¯”**:

| è¯­è¨€ | ç±»å‹ç³»ç»Ÿ | å†…å­˜ç®¡ç† | ç©ºå®‰å…¨ | å¹¶å‘å®‰å…¨ |
|------|---------|---------|--------|----------|
| **Rust** | å¼ºé™æ€ + ä»¿å°„ | æ‰€æœ‰æƒ | âœ… Option | âœ… Send/Sync |
| **C++** | é™æ€ | æ‰‹åŠ¨/RAII | âŒ null | âŒ UB |
| **Haskell** | å¼ºé™æ€ + çº¯ | GC | âœ… Maybe | âœ… STM |
| **Go** | é™æ€ | GC | âŒ nil | âš ï¸ Channel |
| **Java** | å¼ºé™æ€ | GC | âŒ null | âš ï¸ synchronized |
| **Swift** | å¼ºé™æ€ | ARC | âœ… Optional | âš ï¸ actor |

---

## 1. Rust vs C/C++

### å†…å­˜ç®¡ç†

**C++**: æ‰‹åŠ¨ + RAII

```cpp
// C++: æ‰‹åŠ¨å†…å­˜ç®¡ç†
std::string* create_string() {
    return new std::string("hello");
}

void use_string() {
    auto s = create_string();
    std::cout << *s << std::endl;
    delete s;  // å¿…é¡»æ‰‹åŠ¨é‡Šæ”¾
}

// RAII
void use_string_raii() {
    auto s = std::make_unique<std::string>("hello");
    std::cout << *s << std::endl;
    // è‡ªåŠ¨é‡Šæ”¾
}
```

**Rust**: æ‰€æœ‰æƒ

```rust
// Rust: è‡ªåŠ¨å†…å­˜ç®¡ç†
fn create_string() -> String {
    String::from("hello")
}

fn use_string() {
    let s = create_string();
    println!("{}", s);
    // è‡ªåŠ¨é‡Šæ”¾ï¼Œæ— éœ€æ‰‹åŠ¨ç®¡ç†
}

fn main() {
    use_string();
}
```

### ç©ºæŒ‡é’ˆ

**C++**: null å¯èƒ½å¯¼è‡´å´©æºƒ

```cpp
// C++: å¯èƒ½çš„ null
std::string* find_user(int id) {
    if (id == 1) {
        return new std::string("Alice");
    }
    return nullptr;
}

void process() {
    auto user = find_user(2);
    std::cout << *user << std::endl;  // âŒ å´©æºƒï¼
}
```

**Rust**: Option å¼ºåˆ¶å¤„ç†

```rust
// Rust: å¼ºåˆ¶å¤„ç† None
fn find_user(id: i32) -> Option<String> {
    if id == 1 {
        Some(String::from("Alice"))
    } else {
        None
    }
}

fn process() {
    match find_user(2) {
        Some(user) => println!("{}", user),
        None => println!("User not found"),
    }
}

fn main() {
    process();
}
```

---

## 2. Rust vs Haskell

### çº¯åº¦

**Haskell**: é»˜è®¤çº¯å‡½æ•°

```haskell
-- Haskell: çº¯å‡½æ•°
add :: Int -> Int -> Int
add x y = x + y

-- IO å¿…é¡»æ˜ç¡®æ ‡è®°
printNumber :: Int -> IO ()
printNumber n = putStrLn (show n)
```

**Rust**: éçº¯ï¼Œä½†å¯æ§

```rust
// Rust: å¯å˜æ€§å¯æ§
fn add(x: i32, y: i32) -> i32 {
    x + y
}

fn print_number(n: i32) {
    println!("{}", n);  // å‰¯ä½œç”¨
}

fn main() {
    println!("{}", add(1, 2));
    print_number(3);
}
```

### é«˜é˜¶ç±»å‹

**Haskell**: åŸç”Ÿæ”¯æŒ HKT

```haskell
-- Haskell: Functor
class Functor f where
    fmap :: (a -> b) -> f a -> f b

instance Functor Maybe where
    fmap _ Nothing = Nothing
    fmap f (Just x) = Just (f x)
```

**Rust**: é€šè¿‡ Associated Types æ¨¡æ‹Ÿ

```rust
// Rust: æ— åŸç”Ÿ HKTï¼Œä½¿ç”¨å…³è”ç±»å‹
trait Functor {
    type Inner;
    type Mapped<T>;
    
    fn fmap<F, B>(self, f: F) -> Self::Mapped<B>
    where
        F: FnOnce(Self::Inner) -> B;
}

impl<T> Functor for Option<T> {
    type Inner = T;
    type Mapped<U> = Option<U>;
    
    fn fmap<F, B>(self, f: F) -> Option<B>
    where
        F: FnOnce(T) -> B,
    {
        self.map(f)
    }
}

fn main() {
    let some = Some(42);
    let result = some.fmap(|x| x * 2);
    println!("{:?}", result);
}
```

---

## 3. Rust vs Go

### é”™è¯¯å¤„ç†

**Go**: è¿”å›å€¼ + error

```go
// Go: è¿”å›å€¼å’Œ error
func readFile(path string) (string, error) {
    content, err := os.ReadFile(path)
    if err != nil {
        return "", err
    }
    return string(content), nil
}

func main() {
    content, err := readFile("file.txt")
    if err != nil {
        log.Fatal(err)
    }
    fmt.Println(content)
}
```

**Rust**: Result ç±»å‹

```rust
// Rust: Result<T, E>
use std::fs;
use std::io;

fn read_file(path: &str) -> Result<String, io::Error> {
    fs::read_to_string(path)
}

fn main() {
    match read_file("file.txt") {
        Ok(content) => println!("{}", content),
        Err(e) => eprintln!("Error: {}", e),
    }
}
```

### æ³›å‹

**Go**: 1.18+ æ³›å‹

```go
// Go: æ³›å‹ (1.18+)
func Max[T comparable](a, b T) T {
    if a > b {
        return a
    }
    return b
}

func main() {
    fmt.Println(Max(1, 2))
    fmt.Println(Max(1.5, 2.5))
}
```

**Rust**: å¼ºå¤§çš„æ³›å‹ç³»ç»Ÿ

```rust
// Rust: æ³›å‹ + Trait Bounds
fn max<T: PartialOrd>(a: T, b: T) -> T {
    if a > b { a } else { b }
}

fn main() {
    println!("{}", max(1, 2));
    println!("{}", max(1.5, 2.5));
}
```

---

## 4. Rust vs Java/C#1

### Null å®‰å…¨

**Java**: NullPointerException

```java
// Java: å¯èƒ½çš„ NullPointerException
String findUser(int id) {
    if (id == 1) {
        return "Alice";
    }
    return null;
}

void process() {
    String user = findUser(2);
    System.out.println(user.length());  // âŒ NPE!
}
```

**Rust**: ç¼–è¯‘æ—¶æ£€æŸ¥

```rust
// Rust: ç¼–è¯‘æ—¶å¼ºåˆ¶å¤„ç†
fn find_user(id: i32) -> Option<String> {
    if id == 1 {
        Some(String::from("Alice"))
    } else {
        None
    }
}

fn process() {
    if let Some(user) = find_user(2) {
        println!("{}", user.len());
    }
}

fn main() {
    process();
}
```

### æ‰€æœ‰æƒ vs GC

**Java**: åƒåœ¾å›æ”¶

```java
// Java: GC ç®¡ç†å†…å­˜
class Data {
    private String value;
    
    public Data(String value) {
        this.value = value;
    }
}

void process() {
    Data d1 = new Data("hello");
    Data d2 = d1;  // å…±äº«å¼•ç”¨
    System.out.println(d1.value);  // âœ… å¯ä»¥ä½¿ç”¨
    // GC è‡ªåŠ¨å›æ”¶
}
```

**Rust**: æ‰€æœ‰æƒè½¬ç§»

```rust
// Rust: æ‰€æœ‰æƒç³»ç»Ÿ
struct Data {
    value: String,
}

fn process() {
    let d1 = Data {
        value: String::from("hello"),
    };
    let d2 = d1;  // æ‰€æœ‰æƒè½¬ç§»
    // println!("{}", d1.value);  // âŒ d1 å·²å¤±æ•ˆ
    println!("{}", d2.value);  // âœ…
}

fn main() {
    process();
}
```

---

## 5. Rust vs Swift

### å†…å­˜ç®¡ç†1

**Swift**: ARC (Automatic Reference Counting)

```swift
// Swift: ARC
class Person {
    let name: String
    init(name: String) {
        self.name = name
    }
}

func process() {
    let person = Person(name: "Alice")
    let another = person  // å¼•ç”¨è®¡æ•° +1
    print(person.name)    // âœ… å¯ä»¥ä½¿ç”¨
    // ARC è‡ªåŠ¨ç®¡ç†
}
```

**Rust**: æ‰€æœ‰æƒ

```rust
// Rust: æ‰€æœ‰æƒ
struct Person {
    name: String,
}

fn process() {
    let person = Person {
        name: String::from("Alice"),
    };
    let another = person;  // æ‰€æœ‰æƒè½¬ç§»
    // println!("{}", person.name);  // âŒ å·²å¤±æ•ˆ
    println!("{}", another.name);  // âœ…
}

fn main() {
    process();
}
```

### Optional

**Swift**: Optional

```swift
// Swift: Optional
func findUser(id: Int) -> String? {
    if id == 1 {
        return "Alice"
    }
    return nil
}

func process() {
    if let user = findUser(2) {
        print(user)
    } else {
        print("Not found")
    }
}
```

**Rust**: Option

```rust
// Rust: Option<T>
fn find_user(id: i32) -> Option<String> {
    if id == 1 {
        Some(String::from("Alice"))
    } else {
        None
    }
}

fn process() {
    match find_user(2) {
        Some(user) => println!("{}", user),
        None => println!("Not found"),
    }
}

fn main() {
    process();
}
```

---

## 6. Rust vs TypeScript

### ç±»å‹ç³»ç»Ÿ

**TypeScript**: ç»“æ„åŒ–ç±»å‹

```typescript
// TypeScript: ç»“æ„åŒ–ç±»å‹
interface Point {
    x: number;
    y: number;
}

function distance(p: Point): number {
    return Math.sqrt(p.x * p.x + p.y * p.y);
}

// ä»»ä½•æœ‰ x, y çš„å¯¹è±¡éƒ½å¯ä»¥
const p1 = { x: 3, y: 4, z: 5 };
console.log(distance(p1));  // âœ… OK
```

**Rust**: åä¹‰ç±»å‹

```rust
// Rust: åä¹‰ç±»å‹
struct Point {
    x: f64,
    y: f64,
}

fn distance(p: Point) -> f64 {
    (p.x * p.x + p.y * p.y).sqrt()
}

fn main() {
    let p1 = Point { x: 3.0, y: 4.0 };
    println!("{}", distance(p1));
}
```

### Null vs Option

**TypeScript**: null/undefined

```typescript
// TypeScript: null/undefined
function findUser(id: number): string | null {
    if (id === 1) {
        return "Alice";
    }
    return null;
}

function process() {
    const user = findUser(2);
    console.log(user?.length);  // Optional chaining
}
```

**Rust**: Option

```rust
// Rust: Option
fn find_user(id: i32) -> Option<String> {
    if id == 1 {
        Some(String::from("Alice"))
    } else {
        None
    }
}

fn process() {
    if let Some(user) = find_user(2) {
        println!("{}", user.len());
    }
}

fn main() {
    process();
}
```

---

## 7. ç±»å‹ç³»ç»Ÿç‰¹æ€§å¯¹æ¯”

**å®Œæ•´å¯¹æ¯”è¡¨**:

| ç‰¹æ€§ | Rust | C++ | Haskell | Go | Java | Swift | TypeScript |
|------|------|-----|---------|----|----|-------|-----------|
| **å¼ºç±»å‹** | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âš ï¸ |
| **é™æ€ç±»å‹** | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… |
| **ç±»å‹æ¨æ–­** | âœ… | âš ï¸ | âœ… | âœ… | âš ï¸ | âœ… | âœ… |
| **æ³›å‹** | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… |
| **HKT** | âŒ | âŒ | âœ… | âŒ | âŒ | âŒ | âŒ |
| **Trait/Interface** | âœ… | âš ï¸ | âœ… | âœ… | âœ… | âœ… | âœ… |
| **æ‰€æœ‰æƒ** | âœ… | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ |
| **ç©ºå®‰å…¨** | âœ… | âŒ | âœ… | âŒ | âŒ | âœ… | âš ï¸ |
| **å¹¶å‘å®‰å…¨** | âœ… | âŒ | âœ… | âš ï¸ | âš ï¸ | âš ï¸ | âŒ |
| **é›¶æˆæœ¬æŠ½è±¡** | âœ… | âœ… | âŒ | âš ï¸ | âŒ | âŒ | âŒ |

---

## 8. æ€»ç»“

**Rust çš„ç‹¬ç‰¹ä¼˜åŠ¿**:

1. **æ‰€æœ‰æƒç³»ç»Ÿ**: ç¼–è¯‘æ—¶å†…å­˜å®‰å…¨
2. **ä»¿å°„ç±»å‹**: é›¶æˆæœ¬èµ„æºç®¡ç†
3. **å¼ºç±»å‹ + ç©ºå®‰å…¨**: æ¶ˆé™¤å¸¸è§é”™è¯¯
4. **å¹¶å‘å®‰å…¨**: Send/Sync ç¼–è¯‘æ—¶æ£€æŸ¥
5. **é›¶æˆæœ¬æŠ½è±¡**: æ€§èƒ½ + å®‰å…¨

**å„è¯­è¨€é€‚ç”¨åœºæ™¯**:

| è¯­è¨€ | é€‚ç”¨åœºæ™¯ |
|------|---------|
| **Rust** | ç³»ç»Ÿç¼–ç¨‹ã€æ€§èƒ½å…³é”®ã€é«˜å¯é æ€§ |
| **C++** | é—ç•™ä»£ç ã€æè‡´æ€§èƒ½ |
| **Haskell** | å‡½æ•°å¼ç¼–ç¨‹ã€ç±»å‹é©±åŠ¨å¼€å‘ |
| **Go** | å¾®æœåŠ¡ã€ç½‘ç»œç¼–ç¨‹ |
| **Java/C#** | ä¼ä¸šåº”ç”¨ã€å¤§å‹ç³»ç»Ÿ |
| **Swift** | iOS/macOS å¼€å‘ |
| **TypeScript** | Web å‰ç«¯ |

---

## 9. å‚è€ƒèµ„æº

**å¯¹æ¯”æ–‡ç« **:

- [Rust vs C++](https://www.thecodedmessage.com/posts/rust-vs-cpp/)
- [Rust vs Haskell](https://www.fpcomplete.com/blog/2018/11/haskell-and-rust/)

**ç›¸å…³æ–‡æ¡£**:

- [4.1 ç±»å‹ç†è®ºæ·±åº¦](./01_ç±»å‹ç†è®ºæ·±åº¦.md)
- [2.3 æ³›å‹ç¼–ç¨‹æŒ‡å—](../tier_02_guides/03_æ³›å‹ç¼–ç¨‹æŒ‡å—.md)

---

**æœ€åæ›´æ–°**: 2025-10-22  
**é€‚ç”¨ç‰ˆæœ¬**: Rust 1.90+  
**æ–‡æ¡£ç±»å‹**: Tier 4 - é«˜çº§å±‚

---

**ğŸŒ å®Œæˆè·¨è¯­è¨€å¯¹æ¯”å­¦ä¹ ï¼** ğŸ¦€
