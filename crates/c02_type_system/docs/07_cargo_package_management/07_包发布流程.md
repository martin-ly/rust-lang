# Cargo åŒ…å‘å¸ƒæµç¨‹

**ç‰ˆæœ¬**: Rust 1.90  
**æœ€åæ›´æ–°**: 2025-10-19

---

## ğŸ“‹ ç›®å½•

- [Cargo åŒ…å‘å¸ƒæµç¨‹](#cargo-åŒ…å‘å¸ƒæµç¨‹)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [ğŸ¯ å‘å¸ƒæµç¨‹æ¦‚è§ˆ](#-å‘å¸ƒæµç¨‹æ¦‚è§ˆ)
  - [1. å‘å¸ƒå‡†å¤‡](#1-å‘å¸ƒå‡†å¤‡)
    - [1.1 æ£€æŸ¥æ¸…å•](#11-æ£€æŸ¥æ¸…å•)
    - [1.2 å…ƒæ•°æ®å®Œå–„](#12-å…ƒæ•°æ®å®Œå–„)
    - [1.3 æ–‡æ¡£å®Œå–„](#13-æ–‡æ¡£å®Œå–„)
  - [2. ç‰ˆæœ¬ç®¡ç†](#2-ç‰ˆæœ¬ç®¡ç†)
    - [2.1 è¯­ä¹‰åŒ–ç‰ˆæœ¬](#21-è¯­ä¹‰åŒ–ç‰ˆæœ¬)
    - [2.2 ç‰ˆæœ¬æ›´æ–°ç­–ç•¥](#22-ç‰ˆæœ¬æ›´æ–°ç­–ç•¥)
    - [2.3 CHANGELOG](#23-changelog)
  - [3. åŒ…é…ç½®](#3-åŒ…é…ç½®)
    - [3.1 å¿…éœ€å­—æ®µ](#31-å¿…éœ€å­—æ®µ)
    - [3.2 æ¨èå­—æ®µ](#32-æ¨èå­—æ®µ)
    - [3.3 æ–‡ä»¶åŒ…å«/æ’é™¤](#33-æ–‡ä»¶åŒ…å«æ’é™¤)
  - [4. crates.io æ³¨å†Œ](#4-cratesio-æ³¨å†Œ)
    - [4.1 è´¦å·åˆ›å»º](#41-è´¦å·åˆ›å»º)
    - [4.2 API Token](#42-api-token)
    - [4.3 é…ç½®è®¤è¯](#43-é…ç½®è®¤è¯)
  - [5. å‘å¸ƒæµç¨‹](#5-å‘å¸ƒæµç¨‹)
    - [5.1 æœ¬åœ°éªŒè¯](#51-æœ¬åœ°éªŒè¯)
    - [5.2 è¯•å‘å¸ƒ](#52-è¯•å‘å¸ƒ)
    - [5.3 æ­£å¼å‘å¸ƒ](#53-æ­£å¼å‘å¸ƒ)
  - [6. æ–‡æ¡£å‘å¸ƒ](#6-æ–‡æ¡£å‘å¸ƒ)
    - [6.1 docs.rs é›†æˆ](#61-docsrs-é›†æˆ)
    - [6.2 æ–‡æ¡£é…ç½®](#62-æ–‡æ¡£é…ç½®)
    - [6.3 ç¤ºä¾‹ä»£ç ](#63-ç¤ºä¾‹ä»£ç )
  - [7. ç‰ˆæœ¬æ’¤å›](#7-ç‰ˆæœ¬æ’¤å›)
    - [7.1 æ’¤å›æ“ä½œ](#71-æ’¤å›æ“ä½œ)
    - [7.2 æ’¤å›ç­–ç•¥](#72-æ’¤å›ç­–ç•¥)
    - [7.3 æ›¿ä»£æ–¹æ¡ˆ](#73-æ›¿ä»£æ–¹æ¡ˆ)
  - [8. ç»´æŠ¤ç®¡ç†](#8-ç»´æŠ¤ç®¡ç†)
    - [8.1 æ‰€æœ‰è€…ç®¡ç†](#81-æ‰€æœ‰è€…ç®¡ç†)
    - [8.2 å®‰å…¨æ›´æ–°](#82-å®‰å…¨æ›´æ–°)
    - [8.3 å¼ƒç”¨æ ‡è®°](#83-å¼ƒç”¨æ ‡è®°)
  - [9. è‡ªåŠ¨åŒ–å‘å¸ƒ](#9-è‡ªåŠ¨åŒ–å‘å¸ƒ)
    - [9.1 CI/CD é›†æˆ](#91-cicd-é›†æˆ)
    - [9.2 è‡ªåŠ¨åŒ–è„šæœ¬](#92-è‡ªåŠ¨åŒ–è„šæœ¬)
    - [9.3 ç‰ˆæœ¬ç®¡ç†å·¥å…·](#93-ç‰ˆæœ¬ç®¡ç†å·¥å…·)
  - [10. æœ€ä½³å®è·µ](#10-æœ€ä½³å®è·µ)
    - [10.1 å‘å¸ƒå‰æ£€æŸ¥](#101-å‘å¸ƒå‰æ£€æŸ¥)
    - [10.2 å‘å¸ƒç­–ç•¥](#102-å‘å¸ƒç­–ç•¥)
    - [10.3 ç¤¾åŒºæ²Ÿé€š](#103-ç¤¾åŒºæ²Ÿé€š)
  - [ğŸ“Š å‘å¸ƒæµç¨‹å›¾](#-å‘å¸ƒæµç¨‹å›¾)
  - [ğŸ” å¸¸è§é—®é¢˜](#-å¸¸è§é—®é¢˜)
  - [ğŸ“– å»¶ä¼¸é˜…è¯»](#-å»¶ä¼¸é˜…è¯»)
    - [å®˜æ–¹æ–‡æ¡£](#å®˜æ–¹æ–‡æ¡£)
    - [å·¥å…·](#å·¥å…·)
    - [ç›¸å…³æ–‡æ¡£](#ç›¸å…³æ–‡æ¡£)

---

## ğŸ¯ å‘å¸ƒæµç¨‹æ¦‚è§ˆ

Cargo åŒ…å‘å¸ƒåˆ° crates.io çš„å®Œæ•´æµç¨‹ï¼š

```mermaid
graph TD
    A[å‡†å¤‡å‘å¸ƒ] --> B[ç‰ˆæœ¬ç®¡ç†]
    B --> C[å…ƒæ•°æ®å®Œå–„]
    C --> D[æœ¬åœ°æµ‹è¯•]
    D --> E[è¯•å‘å¸ƒ]
    E --> F{æ£€æŸ¥é€šè¿‡?}
    F -->|æ˜¯| G[æ­£å¼å‘å¸ƒ]
    F -->|å¦| A
    G --> H[æ–‡æ¡£å‘å¸ƒ]
    H --> I[ç‰ˆæœ¬æ ‡ç­¾]
    I --> J[ç¤¾åŒºå…¬å‘Š]
```

**æ ¸å¿ƒæ­¥éª¤**ï¼š

1. å‡†å¤‡ï¼šæ£€æŸ¥ä»£ç å’Œæ–‡æ¡£
2. é…ç½®ï¼šå®Œå–„åŒ…å…ƒæ•°æ®
3. æµ‹è¯•ï¼šæœ¬åœ°å’Œè¯•å‘å¸ƒéªŒè¯
4. å‘å¸ƒï¼šæ¨é€åˆ° crates.io
5. ç»´æŠ¤ï¼šæ–‡æ¡£ã€æ ‡ç­¾ã€å…¬å‘Š

---

## 1. å‘å¸ƒå‡†å¤‡

### 1.1 æ£€æŸ¥æ¸…å•

**ä»£ç è´¨é‡**ï¼š

```bash
# âœ… ç¼–è¯‘é€šè¿‡
cargo build --release

# âœ… æµ‹è¯•é€šè¿‡
cargo test --all-features

# âœ… æ–‡æ¡£æµ‹è¯•é€šè¿‡
cargo test --doc

# âœ… æ—  linter è­¦å‘Š
cargo clippy -- -D warnings

# âœ… ä»£ç æ ¼å¼åŒ–
cargo fmt --check

# âœ… æ— å®‰å…¨æ¼æ´
cargo audit
```

**æ–‡æ¡£å®Œæ•´**ï¼š

```bash
# âœ… README å®Œå–„
[ -f README.md ] && echo "OK"

# âœ… LICENSE æ–‡ä»¶
[ -f LICENSE ] && echo "OK"

# âœ… API æ–‡æ¡£å®Œæ•´
cargo doc --no-deps --open

# âœ… CHANGELOG æ›´æ–°
[ -f CHANGELOG.md ] && echo "OK"
```

### 1.2 å…ƒæ•°æ®å®Œå–„

**å¿…éœ€å­—æ®µ**ï¼š

```toml
[package]
name = "my-crate"
version = "0.1.0"
edition = "2024"
authors = ["Your Name <you@example.com>"]
```

**æ¨èå­—æ®µ**ï¼š

```toml
[package]
name = "my-crate"
version = "0.1.0"
edition = "2024"
rust-version = "1.90"

# æè¿°ä¿¡æ¯
description = "A short description of my crate"
documentation = "https://docs.rs/my-crate"
homepage = "https://my-crate.org"
repository = "https://github.com/user/my-crate"
readme = "README.md"

# æˆæƒå’Œå…³é”®è¯
license = "MIT OR Apache-2.0"
keywords = ["rust", "cargo", "package"]
categories = ["development-tools"]

# ä½œè€…
authors = ["Your Name <you@example.com>"]
```

### 1.3 æ–‡æ¡£å®Œå–„

**README.md**ï¼š

```markdown
    # My Crate

    [![Crates.io](https://img.shields.io/crates/v/my-crate.svg)](https://crates.io/crates/my-crate)
    [![Documentation](https://docs.rs/my-crate/badge.svg)](https://docs.rs/my-crate)
    [![License](https://img.shields.io/crates/l/my-crate.svg)](LICENSE)

    Short description of the crate.

    ## Features

    - Feature 1
    - Feature 2
    - Feature 3

    ## Installation

    Add this to your `Cargo.toml`:

    ```toml
    [dependencies]
    my-crate = "0.1"
    ```

    ## Usage

    ```rust
    use my_crate::*;

    fn main() {
        // Example usage
    }
    ```

    ## License

    Licensed under either of

    - Apache License, Version 2.0 ([LICENSE-APACHE](LICENSE-APACHE))
    - MIT license ([LICENSE-MIT](LICENSE-MIT))

    at your option.

```

---

## 2. ç‰ˆæœ¬ç®¡ç†

### 2.1 è¯­ä¹‰åŒ–ç‰ˆæœ¬

**ç‰ˆæœ¬æ ¼å¼**: `MAJOR.MINOR.PATCH`

```toml
# 0.1.0 - åˆå§‹ç‰ˆæœ¬
version = "0.1.0"

# 0.1.1 - Bug ä¿®å¤
version = "0.1.1"

# 0.2.0 - æ–°åŠŸèƒ½ï¼ˆå‘åå…¼å®¹ï¼‰
version = "0.2.0"

# 1.0.0 - ç¨³å®šç‰ˆæœ¬
version = "1.0.0"

# 2.0.0 - ç ´åæ€§æ›´æ”¹
version = "2.0.0"
```

**è§„åˆ™**ï¼š

| å˜åŒ–ç±»å‹ | ç‰ˆæœ¬å·å˜æ›´ | ç¤ºä¾‹ |
|---------|-----------|------|
| ç ´åæ€§æ›´æ”¹ | MAJOR | 1.0.0 â†’ 2.0.0 |
| æ–°åŠŸèƒ½ï¼ˆå…¼å®¹ï¼‰ | MINOR | 1.0.0 â†’ 1.1.0 |
| Bug ä¿®å¤ | PATCH | 1.0.0 â†’ 1.0.1 |

**0.x ç‰ˆæœ¬ç‰¹æ®Šè§„åˆ™**ï¼š

```text
0.1.0 â†’ 0.1.1  # Bug ä¿®å¤
0.1.0 â†’ 0.2.0  # ä»»ä½•æ›´æ”¹ï¼ˆå¯èƒ½ç ´åå…¼å®¹æ€§ï¼‰
0.x.y â†’ 1.0.0  # ç¨³å®šç‰ˆå‘å¸ƒ
```

### 2.2 ç‰ˆæœ¬æ›´æ–°ç­–ç•¥

**æ›´æ–° Cargo.toml**ï¼š

```toml
[package]
version = "0.2.0"  # ä» 0.1.0 æ›´æ–°
```

**æ›´æ–°ä¾èµ–ä¸­çš„ç‰ˆæœ¬**ï¼š

```toml
# å¦‚æœæœ‰å†…éƒ¨ä¾èµ–
[dependencies]
my-core = { path = "../my-core", version = "0.2" }
```

### 2.3 CHANGELOG

**æ ¼å¼**ï¼š

```markdown
    # Changelog

    All notable changes to this project will be documented in this file.

    The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
    and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

    ## [Unreleased]

    ### Added
    - New feature coming soon

    ## [0.2.0] - 2025-10-19

    ### Added
    - New authentication module
    - Support for async operations

    ### Changed
    - Improved error handling
    - Updated dependencies

    ### Fixed
    - Fixed memory leak in parser
    - Corrected documentation typos

    ## [0.1.0] - 2025-10-01

    ### Added
    - Initial release
    - Basic functionality

    [Unreleased]: https://github.com/user/repo/compare/v0.2.0...HEAD
    [0.2.0]: https://github.com/user/repo/compare/v0.1.0...v0.2.0
    [0.1.0]: https://github.com/user/repo/releases/tag/v0.1.0
```

---

## 3. åŒ…é…ç½®

### 3.1 å¿…éœ€å­—æ®µ

```toml
[package]
name = "my-crate"       # åŒ…åï¼ˆå”¯ä¸€ï¼‰
version = "0.1.0"       # ç‰ˆæœ¬å·
edition = "2024"        # Rust ç‰ˆæœ¬
```

### 3.2 æ¨èå­—æ®µ

```toml
[package]
# åŸºç¡€ä¿¡æ¯
name = "my-crate"
version = "0.1.0"
edition = "2024"
rust-version = "1.90"   # æœ€ä½ Rust ç‰ˆæœ¬

# æè¿°
description = "A short description (max 300 chars)"
documentation = "https://docs.rs/my-crate"
homepage = "https://my-crate.org"
repository = "https://github.com/user/my-crate"
readme = "README.md"

# è®¸å¯è¯
license = "MIT OR Apache-2.0"
license-file = "LICENSE"  # æˆ–ä½¿ç”¨è‡ªå®šä¹‰è®¸å¯è¯æ–‡ä»¶

# åˆ†ç±»
keywords = ["parser", "cli", "web"]  # æœ€å¤š 5 ä¸ª
categories = ["command-line-utilities"]  # ä» crates.io åˆ—è¡¨é€‰æ‹©

# ä½œè€…
authors = ["Name <email@example.com>"]

# æ„å»º
build = "build.rs"  # å¦‚æœæœ‰æ„å»ºè„šæœ¬
```

**keywords å’Œ categories**ï¼š

```bash
# æŸ¥çœ‹å¯ç”¨åˆ†ç±»
# https://crates.io/categories

# å¸¸è§ categoriesï¼š
# - command-line-utilities
# - development-tools
# - web-programming
# - asynchronous
# - network-programming
```

### 3.3 æ–‡ä»¶åŒ…å«/æ’é™¤

**include (æ¨è)**ï¼š

```toml
[package]
include = [
    "src/**/*",
    "Cargo.toml",
    "README.md",
    "LICENSE*",
    "CHANGELOG.md",
]
```

**exclude**ï¼š

```toml
[package]
exclude = [
    "tests/fixtures/*",
    "examples/*.dat",
    ".github/",
    "*.sh",
    "docs/",
]
```

**é»˜è®¤æ’é™¤**ï¼š

```text
è‡ªåŠ¨æ’é™¤ï¼š
- target/
- *.swp
- .git/
- .github/ (é™¤éæ˜ç¡® include)
```

---

## 4. crates.io æ³¨å†Œ

### 4.1 è´¦å·åˆ›å»º

1. è®¿é—® [crates.io](https://crates.io/)
2. ä½¿ç”¨ GitHub è´¦å·ç™»å½•
3. éªŒè¯é‚®ç®±åœ°å€

### 4.2 API Token

**ç”Ÿæˆ Token**ï¼š

1. è®¿é—® <https://crates.io/settings/tokens>
2. ç‚¹å‡» "New Token"
3. è¾“å…¥ Token åç§°ï¼ˆå¦‚ "laptop"ï¼‰
4. å¤åˆ¶ç”Ÿæˆçš„ Token

### 4.3 é…ç½®è®¤è¯

**æ–¹å¼ 1: cargo login**ï¼š

```bash
# ç™»å½•
cargo login <your-token>

# Token ä¿å­˜åœ¨ ~/.cargo/credentials.toml
```

**æ–¹å¼ 2: ç¯å¢ƒå˜é‡**ï¼š

```bash
# CI/CD ç¯å¢ƒæ¨è
export CARGO_REGISTRY_TOKEN=<your-token>
```

**æ–¹å¼ 3: æ‰‹åŠ¨é…ç½®**ï¼š

```toml
# ~/.cargo/credentials.toml
[registry]
token = "<your-token>"
```

---

## 5. å‘å¸ƒæµç¨‹

### 5.1 æœ¬åœ°éªŒè¯

```bash
# 1. æ„å»ºæ£€æŸ¥
cargo build --release --all-features

# 2. è¿è¡Œæµ‹è¯•
cargo test --all-features

# 3. æ–‡æ¡£æ£€æŸ¥
cargo doc --no-deps

# 4. æ‰“åŒ…æ£€æŸ¥
cargo package --list

# 5. æŸ¥çœ‹æ‰“åŒ…å†…å®¹
cargo package --list | less
```

### 5.2 è¯•å‘å¸ƒ

**dry-run æ¨¡å¼**ï¼š

```bash
# æ¨¡æ‹Ÿå‘å¸ƒï¼ˆä¸å®é™…ä¸Šä¼ ï¼‰
cargo publish --dry-run

# æ£€æŸ¥è¾“å‡º
# Uploading my-crate v0.1.0
# Updating crates.io index
```

**æ£€æŸ¥æ‰“åŒ…ç»“æœ**ï¼š

```bash
# æ‰“åŒ…åˆ° target/package/
cargo package

# æŸ¥çœ‹å†…å®¹
cd target/package/my-crate-0.1.0
tree
cat Cargo.toml
```

**æµ‹è¯•æ‰“åŒ…çš„åŒ…**ï¼š

```bash
# è§£å‹å¹¶æµ‹è¯•
cd target/package/my-crate-0.1.0
cargo build
cargo test
```

### 5.3 æ­£å¼å‘å¸ƒ

```bash
# å‘å¸ƒåˆ° crates.io
cargo publish

# è¾“å‡ºç¤ºä¾‹ï¼š
#    Updating crates.io index
#   Packaging my-crate v0.1.0 (/path/to/my-crate)
#   Verifying my-crate v0.1.0 (/path/to/my-crate)
#   Compiling my-crate v0.1.0 (/path/to/my-crate/target/package/my-crate-0.1.0)
#    Finished dev [unoptimized + debuginfo] target(s) in 1.23s
#   Uploading my-crate v0.1.0 (/path/to/my-crate)
```

**å‘å¸ƒåæ£€æŸ¥**ï¼š

```bash
# è®¿é—®åŒ…é¡µé¢
# https://crates.io/crates/my-crate

# ç­‰å¾…æ–‡æ¡£æ„å»º
# https://docs.rs/my-crate

# æµ‹è¯•å®‰è£…
cargo install my-crate
```

---

## 6. æ–‡æ¡£å‘å¸ƒ

### 6.1 docs.rs é›†æˆ

**è‡ªåŠ¨æ„å»º**ï¼š

```text
å‘å¸ƒåˆ° crates.io åï¼Œdocs.rs ä¼šè‡ªåŠ¨ï¼š
1. ä¸‹è½½ä½ çš„åŒ…
2. æ„å»ºæ–‡æ¡£
3. å‘å¸ƒåˆ° https://docs.rs/your-crate
```

**æ„å»ºçŠ¶æ€**ï¼š

```bash
# æ£€æŸ¥æ„å»ºçŠ¶æ€
# https://docs.rs/crate/your-crate/latest/builds
```

### 6.2 æ–‡æ¡£é…ç½®

**è‡ªå®šä¹‰ docs.rs æ„å»º**ï¼š

```toml
# Cargo.toml
[package.metadata.docs.rs]
# å¯ç”¨æ‰€æœ‰ç‰¹æ€§
all-features = true

# æˆ–æŒ‡å®šç‰¹æ€§
features = ["std", "serde"]

# è®¾ç½®ç›®æ ‡å¹³å°
targets = ["x86_64-unknown-linux-gnu"]

# ä¼ é€’ rustdoc å‚æ•°
rustdoc-args = ["--cfg", "docsrs"]

# è®¾ç½®é»˜è®¤ç›®æ ‡
default-target = "x86_64-unknown-linux-gnu"
```

**æ¡ä»¶æ–‡æ¡£**ï¼š

```rust
// åœ¨ docs.rs ä¸Šæ˜¾ç¤ºç‰¹æ€§æ ‡è®°
#![cfg_attr(docsrs, feature(doc_cfg))]

#[cfg_attr(docsrs, doc(cfg(feature = "serde")))]
#[cfg(feature = "serde")]
pub mod serde_support {
    //! Serde integration module
}
```

### 6.3 ç¤ºä¾‹ä»£ç 

**æ–‡æ¡£ç¤ºä¾‹**ï¼š

````rust
/// Add two numbers
///
/// # Examples
///
/// ```
/// use my_crate::add;
///
/// assert_eq!(add(2, 2), 4);
/// ```
///
/// # Errors
///
/// Returns an error if overflow occurs.
pub fn add(a: i32, b: i32) -> Result<i32, String> {
    a.checked_add(b).ok_or_else(|| "Overflow".to_string())
}
````

---

## 7. ç‰ˆæœ¬æ’¤å›

### 7.1 æ’¤å›æ“ä½œ

**æ’¤å›ç‰ˆæœ¬**ï¼š

```bash
# æ’¤å›ç‰¹å®šç‰ˆæœ¬
cargo yank --vers 0.1.0

# æ’¤å›æœ€æ–°ç‰ˆæœ¬
cargo yank

# å–æ¶ˆæ’¤å›
cargo yank --vers 0.1.0 --undo
```

**æ•ˆæœ**ï¼š

```text
æ’¤å›åï¼š
- âœ… ç°æœ‰é¡¹ç›®ä»å¯ä½¿ç”¨ï¼ˆCargo.lock é”å®šï¼‰
- âŒ æ–°é¡¹ç›®æ— æ³•é€‰æ‹©è¯¥ç‰ˆæœ¬
- âŒ cargo update ä¸ä¼šæ›´æ–°åˆ°è¯¥ç‰ˆæœ¬
```

### 7.2 æ’¤å›ç­–ç•¥

**ä½•æ—¶æ’¤å›**ï¼š

```text
âœ… åº”è¯¥æ’¤å›ï¼š
- ä¸¥é‡å®‰å…¨æ¼æ´
- æ•°æ®æŸåé£é™©
- æ— æ³•ç¼–è¯‘çš„ç‰ˆæœ¬
- æ„å¤–å‘å¸ƒçš„ç§å¯†ä¿¡æ¯

âŒ ä¸åº”æ’¤å›ï¼š
- å° bugï¼ˆå‘å¸ƒä¿®å¤ç‰ˆæœ¬ï¼‰
- æ€§èƒ½é—®é¢˜ï¼ˆå‘å¸ƒä¼˜åŒ–ç‰ˆæœ¬ï¼‰
- æ–‡æ¡£é”™è¯¯ï¼ˆå‘å¸ƒæ›´æ­£ç‰ˆæœ¬ï¼‰
```

### 7.3 æ›¿ä»£æ–¹æ¡ˆ

**å‘å¸ƒä¿®å¤ç‰ˆæœ¬**ï¼š

```bash
# ä¸è¦æ’¤å› 0.1.0
# è€Œæ˜¯å‘å¸ƒ 0.1.1 ä¿®å¤

# æ›´æ–°ç‰ˆæœ¬
# Cargo.toml: version = "0.1.1"

# å‘å¸ƒ
cargo publish
```

**å¼ƒç”¨è­¦å‘Š**ï¼š

```rust
#[deprecated(since = "0.2.0", note = "Use `new_function` instead")]
pub fn old_function() {
    // æ—§å®ç°
}
```

---

## 8. ç»´æŠ¤ç®¡ç†

### 8.1 æ‰€æœ‰è€…ç®¡ç†

**æ·»åŠ æ‰€æœ‰è€…**ï¼š

```bash
# æ·»åŠ æ‰€æœ‰è€…
cargo owner --add github:username

# åˆ é™¤æ‰€æœ‰è€…
cargo owner --remove github:username

# åˆ—å‡ºæ‰€æœ‰è€…
cargo owner --list
```

**å›¢é˜Ÿç®¡ç†**ï¼š

```bash
# æ·»åŠ  GitHub å›¢é˜Ÿ
cargo owner --add github:org:team
```

### 8.2 å®‰å…¨æ›´æ–°

**å‘ç°å®‰å…¨æ¼æ´**ï¼š

1. **è¯„ä¼°ä¸¥é‡æ€§**
2. **å‡†å¤‡ä¿®å¤**
3. **å‘å¸ƒæ–°ç‰ˆæœ¬**
4. **æ’¤å›æ—§ç‰ˆæœ¬**ï¼ˆå¦‚æœä¸¥é‡ï¼‰
5. **å…¬å‘Šé€šçŸ¥**

**ä½¿ç”¨ RustSec**ï¼š

```bash
# æŠ¥å‘Šæ¼æ´åˆ° RustSec
# https://github.com/RustSec/advisory-db
```

### 8.3 å¼ƒç”¨æ ‡è®°

**æ ‡è®°æ•´ä¸ª crate**ï¼š

```rust
//! This crate is deprecated. Use `new-crate` instead.

#![deprecated(since = "0.5.0", note = "Use `new-crate` instead")]
```

**README æ ‡è®°**ï¼š

```markdown
# My Crate

**âš ï¸ DEPRECATED**: This crate is no longer maintained. 
Please use [`new-crate`](https://crates.io/crates/new-crate) instead.
```

---

## 9. è‡ªåŠ¨åŒ–å‘å¸ƒ

### 9.1 CI/CD é›†æˆ

**GitHub Actions ç¤ºä¾‹**ï¼š

```yaml
# .github/workflows/release.yml
name: Release

on:
  push:
    tags:
      - 'v*'

jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Rust
        uses: actions-rs/toolchain@v1
        with:
          toolchain: stable
      
      - name: Run tests
        run: cargo test --all-features
      
      - name: Publish to crates.io
        env:
          CARGO_REGISTRY_TOKEN: ${{ secrets.CARGO_TOKEN }}
        run: cargo publish
```

### 9.2 è‡ªåŠ¨åŒ–è„šæœ¬

**å‘å¸ƒè„šæœ¬**ï¼š

```bash
#!/bin/bash
# release.sh

set -e

VERSION=$1

if [ -z "$VERSION" ]; then
    echo "Usage: $0 <version>"
    exit 1
fi

# 1. æ›´æ–°ç‰ˆæœ¬å·
sed -i "s/version = \".*\"/version = \"$VERSION\"/" Cargo.toml

# 2. æ›´æ–° CHANGELOG
DATE=$(date +%Y-%m-%d)
sed -i "s/## \[Unreleased\]/## [Unreleased]\n\n## [$VERSION] - $DATE/" CHANGELOG.md

# 3. Git æäº¤
git add Cargo.toml CHANGELOG.md
git commit -m "Release v$VERSION"
git tag -a "v$VERSION" -m "Version $VERSION"

# 4. è¿è¡Œæµ‹è¯•
cargo test --all-features

# 5. å‘å¸ƒ
cargo publish

# 6. æ¨é€ Git
git push origin main
git push origin "v$VERSION"

echo "âœ… Released v$VERSION"
```

### 9.3 ç‰ˆæœ¬ç®¡ç†å·¥å…·

**cargo-release**ï¼š

```bash
# å®‰è£…
cargo install cargo-release

# å‘å¸ƒ patch ç‰ˆæœ¬
cargo release patch

# å‘å¸ƒ minor ç‰ˆæœ¬
cargo release minor

# å‘å¸ƒ major ç‰ˆæœ¬
cargo release major

# ä»…æ›´æ–°ç‰ˆæœ¬ï¼Œä¸å‘å¸ƒ
cargo release patch --no-publish
```

---

## 10. æœ€ä½³å®è·µ

### 10.1 å‘å¸ƒå‰æ£€æŸ¥

**å®Œæ•´æ£€æŸ¥æ¸…å•**ï¼š

```bash
#!/bin/bash
# pre-publish-check.sh

echo "ğŸ” Running pre-publish checks..."

echo "âœ… Building..."
cargo build --release --all-features || exit 1

echo "âœ… Testing..."
cargo test --all-features || exit 1

echo "âœ… Clippy..."
cargo clippy --all-features -- -D warnings || exit 1

echo "âœ… Formatting..."
cargo fmt -- --check || exit 1

echo "âœ… Documentation..."
cargo doc --no-deps --all-features || exit 1

echo "âœ… Audit..."
cargo audit || exit 1

echo "âœ… Package..."
cargo package --list || exit 1

echo "âœ… Dry run..."
cargo publish --dry-run || exit 1

echo "ğŸ‰ All checks passed!"
```

### 10.2 å‘å¸ƒç­–ç•¥

**å‘å¸ƒé¢‘ç‡**ï¼š

```text
Bug ä¿®å¤: ç«‹å³å‘å¸ƒï¼ˆå‡ å¤©å†…ï¼‰
å°åŠŸèƒ½: å®šæœŸå‘å¸ƒï¼ˆæ¯å‘¨/æ¯æœˆï¼‰
å¤§ç‰ˆæœ¬: è®¡åˆ’å‘å¸ƒï¼ˆå……åˆ†æµ‹è¯•ï¼‰
```

**ç‰ˆæœ¬ç­–ç•¥**ï¼š

```text
0.x.y: å¿«é€Ÿè¿­ä»£ï¼Œä¸ä¿è¯å…¼å®¹æ€§
1.x.y: ç¨³å®š APIï¼Œéµå¾ª SemVer
2.0.0: ç ´åæ€§æ›´æ”¹ï¼Œå……åˆ†é€šçŸ¥
```

### 10.3 ç¤¾åŒºæ²Ÿé€š

**å‘å¸ƒå…¬å‘Š**ï¼š

```markdown
# å‘å¸ƒ v0.2.0 ğŸ‰

æˆ‘ä»¬å¾ˆé«˜å…´å®£å¸ƒ my-crate v0.2.0 å‘å¸ƒï¼

## æ–°ç‰¹æ€§

- å¼‚æ­¥æ“ä½œæ”¯æŒ
- æ–°çš„è®¤è¯æ¨¡å—
- æ€§èƒ½æå‡ 30%

## ç ´åæ€§æ›´æ”¹

- `old_function` å·²å¼ƒç”¨ï¼Œä½¿ç”¨ `new_function`

## è¿ç§»æŒ‡å—

[é“¾æ¥åˆ°è¿ç§»æŒ‡å—]

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…ï¼
```

**æ¸ é“**ï¼š

- GitHub Releases
- crates.io æè¿°
- Reddit r/rust
- This Week in Rust
- Discord/Zulip

---

## ğŸ“Š å‘å¸ƒæµç¨‹å›¾

```mermaid
graph TD
    A[å¼€å§‹] --> B[ç‰ˆæœ¬æ›´æ–°]
    B --> C[CHANGELOG æ›´æ–°]
    C --> D[ä»£ç æ£€æŸ¥]
    D --> E{æµ‹è¯•é€šè¿‡?}
    E -->|å¦| D
    E -->|æ˜¯| F[cargo package]
    F --> G[cargo publish --dry-run]
    G --> H{æ£€æŸ¥é€šè¿‡?}
    H -->|å¦| D
    H -->|æ˜¯| I[cargo publish]
    I --> J[Git tag]
    J --> K[æ¨é€ä»£ç ]
    K --> L[æ£€æŸ¥ docs.rs]
    L --> M[å‘å¸ƒå…¬å‘Š]
    M --> N[å®Œæˆ]
```

---

## ğŸ” å¸¸è§é—®é¢˜

**Q1: å‘å¸ƒåå‘ç° bug æ€ä¹ˆåŠï¼Ÿ**

```bash
# ä¸è¦ panicï¼
# 1. è¯„ä¼°ä¸¥é‡æ€§
# 2. å¦‚æœä¸¥é‡ï¼šcargo yank
# 3. ä¿®å¤ bug
# 4. å‘å¸ƒæ–°ç‰ˆæœ¬ (patch)
cargo yank --vers 0.1.0
# ... ä¿®å¤ ...
# Cargo.toml: version = "0.1.1"
cargo publish
```

**Q2: å¦‚ä½•æµ‹è¯•å‘å¸ƒçš„åŒ…ï¼Ÿ**

```bash
# æ–¹æ³• 1: ä»æ‰“åŒ…ç›®å½•æµ‹è¯•
cargo package
cd target/package/my-crate-0.1.0
cargo test

# æ–¹æ³• 2: åˆ›å»ºä¸´æ—¶é¡¹ç›®
cargo new test-project
cd test-project
cargo add my-crate --version 0.1.0
```

**Q3: åŒ…åå·²è¢«å ç”¨æ€ä¹ˆåŠï¼Ÿ**

```text
- é€‰æ‹©ä¸åŒçš„åç§°
- æ·»åŠ å‰ç¼€/åç¼€ï¼ˆå¦‚ my-crate-rsï¼‰
- è”ç³»å½“å‰æ‰€æœ‰è€…ï¼ˆå¦‚æœåŒ…å·²åºŸå¼ƒï¼‰
```

---

## ğŸ“– å»¶ä¼¸é˜…è¯»

### å®˜æ–¹æ–‡æ¡£

- [Publishing on crates.io](https://doc.rust-lang.org/cargo/reference/publishing.html)
- [crates.io Policies](https://crates.io/policies)
- [Semantic Versioning](https://semver.org/)

### å·¥å…·

- [cargo-release](https://github.com/crate-ci/cargo-release) - è‡ªåŠ¨åŒ–å‘å¸ƒ
- [cargo-edit](https://github.com/killercup/cargo-edit) - ä¾èµ–ç®¡ç†
- [release-plz](https://github.com/MarcoIeni/release-plz) - å‘å¸ƒè‡ªåŠ¨åŒ–

### ç›¸å…³æ–‡æ¡£

- [02_åŸºç¡€æ¦‚å¿µä¸å®šä¹‰.md](./02_åŸºç¡€æ¦‚å¿µä¸å®šä¹‰.md)
- [03_ä¾èµ–ç®¡ç†è¯¦è§£.md](./03_ä¾èµ–ç®¡ç†è¯¦è§£.md)
- [08_æœ€ä½³å®è·µæŒ‡å—.md](./08_æœ€ä½³å®è·µæŒ‡å—.md)

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2025-10-19  
**é€‚ç”¨ç‰ˆæœ¬**: Rust 1.90+

*è®¤çœŸå‘å¸ƒï¼Œç”¨å¿ƒç»´æŠ¤ã€‚* ğŸ¦€ğŸ“¦
