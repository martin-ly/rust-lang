# Phase 2: 版本统一实施计划

> **文档类型**: Phase 2 执行计划  
> **创建日期**: 2025-10-22  
> **执行目标**: 将所有文档统一到 Rust 1.90+

---

## 📋 执行概要

### 核心目标

将 C01 模块中所有文档的版本标识统一更新为 **Rust 1.90+**，消除版本不一致问题，提升文档专业性和可信度。

### 当前版本分布

根据 grep 分析结果:

| 版本标识 | 文档数量 | 状态 | 处理方案 |
|---------|---------|------|---------|
| Rust 1.70+ | ~5 个 | ⚠️ 需更新 | 替换为 Rust 1.90+ |
| Rust 1.89+ | ~25 个 | ⚠️ 需更新 | 替换为 Rust 1.90+ |
| Rust 1.90+ | ~80 个 | ✅ 正确 | 保持不变 |
| 无版本标识 | ~24 个 | ⚠️ 需添加 | 添加 Rust 1.90+ |
| **总计** | **~134** | **需处理 ~54 个** | - |

---

## 🎯 执行策略

### 策略 1: 全局搜索替换 (主要方法)

**目标模式**:

- `Rust 1.70+` → `Rust 1.90+`
- `Rust 1.89+` → `Rust 1.90+`
- `Rust 1.31+` (特定场景) → 保持不变（NLL 历史说明）

**执行范围**:

- ✅ 所有 `.md` 文件
- ✅ README.md
- ✅ docs/ 目录下所有子目录

### 策略 2: 重点文件手工审查 (次要方法)

**需要特别审查的文件** (可能有特殊版本说明):

1. `README.md` - 主入口
2. `docs/tier1_foundation/*.md` - 基础层文档
3. `docs/06_rust_features/*.md` - 版本特性文档
4. `docs/*_REPORT*.md` - 所有报告文件

### 策略 3: 代码示例兼容性验证

**验证内容**:

- ✅ 检查是否使用了 Rust 1.90+ 才有的特性
- ✅ 确认没有使用已废弃的语法
- ✅ 验证 NLL (Non-Lexical Lifetimes) 相关示例

---

## 📝 详细执行步骤

### Step 1: 创建版本统一脚本 (5分钟)

创建 PowerShell 脚本自动化处理:

```powershell
# version_unify.ps1
Get-ChildItem -Path "." -Recurse -Filter "*.md" | ForEach-Object {
    $content = Get-Content $_.FullName -Raw
    $updated = $content -replace 'Rust 1\.70\+', 'Rust 1.90+'
    $updated = $updated -replace 'Rust 1\.89\+', 'Rust 1.90+'
    Set-Content -Path $_.FullName -Value $updated -NoNewline
}
```

### Step 2: 执行全局替换 (5分钟)

**命令序列**:

1. 备份当前状态
2. 执行 `Rust 1.70+` → `Rust 1.90+`
3. 执行 `Rust 1.89+` → `Rust 1.90+`
4. 验证替换结果

### Step 3: 重点文件手工审查 (15分钟)

**审查清单**:

#### 3.1 主 README.md

- [ ] 更新顶部版本声明
- [ ] 检查"适用版本"字段
- [ ] 验证特性说明的版本一致性

#### 3.2 Tier 1 Foundation 文档

- [ ] 1.1_项目概览.md
- [ ] 1.2_快速开始指南.md
- [ ] 1.3_核心概念术语表.md
- [ ] 1.4_常见问题解答.md

#### 3.3 Tier 2-4 README 文件

- [ ] tier2_core_concepts/README.md
- [ ] tier3_advanced/README.md
- [ ] tier4_theoretical/README.md

#### 3.4 版本特性文档

- [ ] docs/06_rust_features/README.md
- [ ] docs/06_rust_features/RUST_190_*.md
- [ ] docs/06_rust_features/RUST_189_*.md

#### 3.5 报告文档

- [ ] 所有 `*_REPORT*.md` 文件
- [ ] 所有 `*_SUMMARY*.md` 文件

### Step 4: 代码示例兼容性检查 (10分钟)

**检查方法**:

```bash
# 查找所有 Rust 代码块
grep -r "^```rust" docs/ | wc -l

# 检查是否有已废弃的语法
grep -r "extern crate" docs/
```

**重点验证**:

- ✅ NLL 相关示例（Rust 1.31+ 引入，1.90+ 已成熟）
- ✅ 智能指针的使用（确保是最新 API）
- ✅ 生命周期省略规则（确保符合最新规范）

### Step 5: 生成验证报告 (5分钟)

**报告内容**:

1. 更新文件列表
2. 更新前后版本分布对比
3. 发现的兼容性问题（如果有）
4. 推荐的后续行动

---

## 🔍 特殊情况处理

### 情况 1: 历史版本说明

**场景**: 文档中提到 "Rust 1.31+ 引入了 NLL"

**处理**: 保持不变，这是历史说明，不是版本要求

**示例**:

```markdown
❌ 错误: Rust 1.90+ 引入了 NLL
✅ 正确: Rust 1.31+ 引入了 NLL，在 Rust 1.90+ 中已经非常成熟
```

### 情况 2: 版本对比文档

**场景**: 对比不同 Rust 版本的特性

**处理**: 保持原有版本号，但添加说明

**示例**:

```markdown
✅ 本文档对比了 Rust 1.89 和 Rust 1.90 的特性差异
✅ 推荐使用版本: Rust 1.90+
```

### 情况 3: 无版本标识的文档

**场景**: 一些旧文档没有版本说明

**处理**: 添加统一的版本声明

**模板**:

```markdown
> **适用版本**: Rust 1.90+  
> **最后更新**: 2025-10-22
```

---

## ✅ 预期结果

### 数量指标

- ✅ **更新文件数**: ~54 个
- ✅ **替换次数**: ~150-200 次
- ✅ **版本一致性**: 100%

### 质量指标

- ✅ **版本标识统一**: 所有文档明确标注 Rust 1.90+
- ✅ **代码兼容性**: 所有示例与 Rust 1.90+ 兼容
- ✅ **文档专业性**: 版本管理达到业界标准

### 用户体验

- ✅ **清晰的版本要求**: 用户一眼就能看到需要的 Rust 版本
- ✅ **消除困惑**: 不再有版本不一致导致的疑问
- ✅ **建立信任**: 展现项目的专业性和维护质量

---

## 📊 执行时间表

| 步骤 | 预计时间 | 实际时间 | 状态 |
|------|---------|---------|------|
| Step 1: 创建脚本 | 5分钟 | - | ⏳ 待执行 |
| Step 2: 全局替换 | 5分钟 | - | ⏳ 待执行 |
| Step 3: 手工审查 | 15分钟 | - | ⏳ 待执行 |
| Step 4: 兼容性检查 | 10分钟 | - | ⏳ 待执行 |
| Step 5: 生成报告 | 5分钟 | - | ⏳ 待执行 |
| **总计** | **40分钟** | - | ⏳ 待执行 |

---

## 🎯 成功标准

### 必须达成 (Must Have)

- ✅ 所有 README 和主要文档版本统一为 Rust 1.90+
- ✅ 代码示例与 Rust 1.90+ 完全兼容
- ✅ 生成完整的版本统一报告

### 应该达成 (Should Have)

- ✅ 历史版本说明保持准确性
- ✅ 版本对比文档清晰标注
- ✅ 无版本标识的文档补充版本信息

### 可以达成 (Nice to Have)

- ✅ 创建版本兼容性矩阵
- ✅ 添加版本升级指南
- ✅ 补充 Rust 1.90 新特性说明

---

## 📚 参考资源

### Rust 版本信息

- [Rust 1.90.0 Release Notes](https://blog.rust-lang.org/2025/xx/xx/Rust-1.90.0.html)
- [Rust Edition Guide](https://doc.rust-lang.org/edition-guide/)
- [Rust Version History](https://github.com/rust-lang/rust/blob/master/RELEASES.md)

### 项目参考

- C11 Libraries 项目的版本管理实践
- TECHNICAL_STANDARDS.md 的版本要求规范

---

## 🚀 执行确认

**执行者**: AI Assistant  
**审核者**: 项目维护者  
**执行日期**: 2025-10-22  
**预期完成时间**: 2025-10-22 (同日完成)

---

**准备就绪，等待执行命令！** 🚀

---

END OF PLAN
