# å¸¸è§é™·é˜± - Common Pitfalls

**ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2025-01-27  
**çŠ¶æ€**: å®Œæ•´ç‰ˆ  

## ğŸ“‹ ç›®å½•

- [å¸¸è§é™·é˜± - Common Pitfalls](#å¸¸è§é™·é˜±---common-pitfalls)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [1. å€Ÿç”¨æ£€æŸ¥å™¨é”™è¯¯](#1-å€Ÿç”¨æ£€æŸ¥å™¨é”™è¯¯)
  - [2. ç”Ÿå‘½å‘¨æœŸé”™è¯¯](#2-ç”Ÿå‘½å‘¨æœŸé”™è¯¯)
  - [3. æ‰€æœ‰æƒé”™è¯¯](#3-æ‰€æœ‰æƒé”™è¯¯)

## 1. å€Ÿç”¨æ£€æŸ¥å™¨é”™è¯¯

```rust
// é”™è¯¯ï¼šå€Ÿç”¨å†²çª
fn borrow_conflict_bad() {
    let mut data = vec![1, 2, 3];
    let first = &data[0];
    // data.push(4); // é”™è¯¯ï¼šä¸èƒ½åœ¨ä¸å¯å˜å€Ÿç”¨æ—¶å¯å˜å€Ÿç”¨
    println!("{}", first);
}

// æ­£ç¡®ï¼šé™åˆ¶å€Ÿç”¨èŒƒå›´
fn borrow_conflict_good() {
    let mut data = vec![1, 2, 3];
    {
        let first = &data[0];
        println!("{}", first);
    }
    data.push(4);
}
```

## 2. ç”Ÿå‘½å‘¨æœŸé”™è¯¯

```rust
// é”™è¯¯ï¼šè¿”å›æ‚¬å‚å¼•ç”¨
fn dangling_reference_bad() -> &'static str {
    let s = String::from("hello");
    // &s // é”™è¯¯
    "hello" // æ­£ç¡®ï¼šä½¿ç”¨é™æ€å­—ç¬¦ä¸²
}
```

## 3. æ‰€æœ‰æƒé”™è¯¯

```rust
// é”™è¯¯ï¼šç§»åŠ¨åä½¿ç”¨
fn use_after_move_bad() {
    let s = String::from("hello");
    let s2 = s;
    // println!("{}", s); // é”™è¯¯ï¼šs å·²è¢«ç§»åŠ¨
    println!("{}", s2);
}
```

---

**ç›¸å…³æ–‡æ¡£**ï¼š

- [æœ€ä½³å®è·µ](./02_best_practices.md)

**æœ€åæ›´æ–°**: 2025å¹´1æœˆ27æ—¥
