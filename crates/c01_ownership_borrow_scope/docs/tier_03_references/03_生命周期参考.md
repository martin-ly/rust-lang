# Tier 3: 生命周期完整参考

> **文档类型**: 技术参考  
> **适用版本**: Rust 1.90+

---

## 📊 目录

- [Tier 3: 生命周期完整参考](#tier-3-生命周期完整参考)
  - [📊 目录](#-目录)
  - [核心概念](#核心概念)
    - [基本语法](#基本语法)
  - [生命周期省略规则](#生命周期省略规则)
  - ['static 生命周期](#static-生命周期)

## 核心概念

生命周期是 Rust 中引用有效性的编译时保证机制。

### 基本语法

```rust
// 生命周期标注
fn longest<'a>(x: &'a str, y: &'a str) -> &'a str {
    if x.len() > y.len() { x } else { y }
}

// 结构体生命周期
struct ImportantExcerpt<'a> {
    part: &'a str,
}

// 多个生命周期
fn longest_with_announcement<'a, 'b>(
    x: &'a str,
    y: &'b str,
    ann: &'b str,
) -> &'a str {
    println!("Announcement: {}", ann);
    if x.len() > y.len() { x } else { y }
}
```

---

## 生命周期省略规则

**规则 1**: 每个引用参数都有独立的生命周期

```rust
// 自动推断为: fn first_word<'a>(s: &'a str) -> &'a str
fn first_word(s: &str) -> &str {
    &s[..1]
}
```

**规则 2**: 如果只有一个输入生命周期，它被应用到所有输出

```rust
fn process(s: &str) -> &str { s }
// 等价于
fn process<'a>(s: &'a str) -> &'a str { s }
```

**规则 3**: 如果有多个输入生命周期，且其中一个是 `&self` 或 `&mut self`，则 `self` 的生命周期被应用到所有输出

```rust
impl<'a> ImportantExcerpt<'a> {
    fn announce_and_return_part(&self, announcement: &str) -> &str {
        println!("Attention: {}", announcement);
        self.part // 自动使用 self 的生命周期
    }
}
```

---

## 'static 生命周期

```rust
// 字符串字面量
let s: &'static str = "I have a static lifetime.";

// 全局变量
static GLOBAL: &str = "global";
```

---

**相关文档**:

- [Tier 2: 03_生命周期实践](../tier_02_guides/03_生命周期实践.md)
- [Tier 4: 01_高级生命周期模式](../tier_04_advanced/01_高级生命周期模式.md)

---

**文档维护**: Documentation Team  
**创建日期**: 2025-10-22
