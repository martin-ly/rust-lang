# 2.3 生命周期

**文档版本**: 1.0
**适用 Rust 版本**: 1.92.0+
**最后更新**: 2025-12-11
**预计学习时间**: 3-5 小时

> 本文档是生命周期系统的核心导航文档。完整的实现细节请参考：[生命周期注解](../02_core/03_lifetime_annotations.md)

## 📋 目录

- [2.3 生命周期](#23-生命周期)
  - [📋 目录](#-目录)
  - [📖 学习目标](#-学习目标)
  - [🎯 核心内容导航](#-核心内容导航)
    - [1. 生命周期基础](#1-生命周期基础)
    - [2. 生命周期标注](#2-生命周期标注)
    - [3. 生命周期省略规则](#3-生命周期省略规则)
  - [📚 完整内容](#-完整内容)
  - [💡 快速参考](#-快速参考)
    - [生命周期标注速查](#生命周期标注速查)
  - [🔗 相关主题](#-相关主题)
  - [🚀 下一步](#-下一步)

## 📖 学习目标

完成本文档后，你将能够：

- ✅ 深入理解生命周期的概念和作用（编译期构造的证明变量）
- ✅ 掌握生命周期标注语法（逻辑关系的证明）
- ✅ 理解生命周期省略规则（编译期逻辑证明的自动推断）
- ✅ 能够在函数和结构体中正确使用生命周期（逻辑依赖关系的证明）
- ✅ 解决常见的生命周期编译错误（逻辑证明的失败）

---

## 📐 知识结构

### 概念定义

**生命周期实践指南 (Lifetime Practice Guide)**:

- **定义**: 深入理解生命周期概念和标注的实践指南
- **类型**: 实践指南文档
- **范畴**: 所有权系统、内存安全
- **版本**: Rust 1.0+
- **相关概念**: 生命周期、生命周期标注、生命周期省略、悬垂引用

**生命周期 (Lifetime)**:

- **定义**: 编译期构造的证明变量，表示引用的有效范围
- **类型**: 内存安全机制
- **属性**: 生命周期标注、生命周期省略、生命周期参数
- **关系**: 与所有权、借用相关

### 属性特征

**核心属性**:

- **生命周期标注**: 语法 `'a`、生命周期参数
- **生命周期省略**: 编译器自动推断生命周期
- **生命周期规则**: 防止悬垂引用、逻辑依赖关系证明
- **生命周期参数**: 函数和结构体中的生命周期参数

**性能特征**:

- **零成本**: 生命周期零运行时开销
- **编译时检查**: 编译期逻辑证明
- **适用场景**: 引用管理、内存安全、防止悬垂引用

### 关系连接

**继承关系**:

- 生命周期标注 --[is-a]--> 生命周期
- 生命周期参数 --[is-a]--> 生命周期

**组合关系**:

- 生命周期实践指南 --[covers]--> 生命周期概念和标注
- 内存安全程序 --[uses]--> 生命周期

**依赖关系**:

- 生命周期 --[depends-on]--> 所有权系统
- 引用管理 --[depends-on]--> 生命周期

### 思维导图

```text
生命周期实践指南
│
├── 生命周期基础
│   └── 编译期证明变量
├── 生命周期标注
│   └── 语法和参数
├── 生命周期省略
│   └── 自动推断
└── 使用场景
    └── 函数和结构体
```

---

## 🎯 核心内容导航

### 1. 生命周期基础

**核心概念**（引用一致性视角）:

- 编译期构造的证明变量（逻辑关系，非物理时间）
- 防止悬垂引用（逻辑证明的失败，非内存地址失效）
- 编译期逻辑证明（约束求解，非运行时检查）

**详细学习**: [生命周期注解完整文档](../02_core/03_lifetime_annotations.md)

### 2. 生命周期标注

**语法**:

```rust
fn longest<'a>(x: &'a str, y: &'a str) -> &'a str {
    if x.len() > y.len() { x } else { y }
}
```

**详细学习**: [生命周期注解完整文档](../02_core/03_lifetime_annotations.md)

### 3. 生命周期省略规则

**三大规则**:

1. 每个引用参数获得独立的生命周期
2. 只有一个输入生命周期时，输出使用它
3. 方法中，输出使用 `&self` 的生命周期

**详细学习**: [生命周期注解完整文档](../02_core/03_lifetime_annotations.md)

## 📚 完整内容

**[📖 生命周期注解完整文档](../02_core/03_lifetime_annotations.md)**

该文档包含：

- ✅ 生命周期基础概念
- ✅ 生命周期标注语法
- ✅ 函数中的生命周期
- ✅ 结构体中的生命周期
- ✅ 生命周期省略规则
- ✅ 高级生命周期模式
- ✅ 常见问题解决

## 💡 快速参考

### 生命周期标注速查

```rust
// 函数
fn func<'a>(x: &'a str) -> &'a str

// 结构体
struct S<'a> {
    field: &'a str,
}

// impl 块
impl<'a> S<'a> {
    fn method(&self) -> &'a str
}
```

## 🔗 相关主题

- 📖 [2.1 所有权系统](./2.1_所有权系统.md)
- 📖 [2.2 借用检查器](./2.2_借用检查器.md)
- 📖 [2.4 作用域规则](./2.4_作用域规则.md)

## 🚀 下一步

**继续学习**: [2.4 作用域规则](./2.4_作用域规则.md)

---

**最后更新**: 2025-12-11
**维护状态**: ✅ 活跃维护
