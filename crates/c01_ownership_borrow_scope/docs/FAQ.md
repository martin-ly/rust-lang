# C01 æ‰€æœ‰æƒä¸å€Ÿç”¨: å¸¸è§é—®é¢˜è§£ç­” (FAQ)

> **æ–‡æ¡£å®šä½**: æ‰€æœ‰æƒã€å€Ÿç”¨ã€ä½œç”¨åŸŸå®è·µä¸­çš„å¸¸è§é—®é¢˜å¿«é€Ÿè§£ç­”
> **ä½¿ç”¨æ–¹å¼**: é‡åˆ°é—®é¢˜æ—¶å¿«é€ŸæŸ¥æ‰¾è§£å†³æ–¹æ¡ˆå’Œæœ€ä½³å®è·µ
> **ç›¸å…³æ–‡æ¡£**: [ä¸»ç´¢å¼•](./00_MASTER_INDEX.md) | [README](./README.md) | [Glossary](./Glossary.md)

## ğŸ“Š ç›®å½•

- [C01 æ‰€æœ‰æƒä¸å€Ÿç”¨: å¸¸è§é—®é¢˜è§£ç­” (FAQ)](#c01-æ‰€æœ‰æƒä¸å€Ÿç”¨-å¸¸è§é—®é¢˜è§£ç­”-faq)
  - [ğŸ“Š ç›®å½•](#-ç›®å½•)
  - [ğŸ“‹ é—®é¢˜ç´¢å¼•](#-é—®é¢˜ç´¢å¼•)
  - [æ‰€æœ‰æƒåŸºç¡€](#æ‰€æœ‰æƒåŸºç¡€)
    - [Q1: ä»€ä¹ˆæ˜¯æ‰€æœ‰æƒï¼Ÿä¸ºä»€ä¹ˆRustéœ€è¦æ‰€æœ‰æƒç³»ç»Ÿï¼Ÿ](#q1-ä»€ä¹ˆæ˜¯æ‰€æœ‰æƒä¸ºä»€ä¹ˆrustéœ€è¦æ‰€æœ‰æƒç³»ç»Ÿ)
    - [Q2: Move è¯­ä¹‰ vs Copy è¯­ä¹‰ï¼Ÿ](#q2-move-è¯­ä¹‰-vs-copy-è¯­ä¹‰)
  - [å€Ÿç”¨è§„åˆ™](#å€Ÿç”¨è§„åˆ™)
    - [Q3: å€Ÿç”¨è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿ](#q3-å€Ÿç”¨è§„åˆ™æ˜¯ä»€ä¹ˆ)
    - [Q4: å¦‚ä½•è§£å†³"cannot borrow as mutable"é”™è¯¯ï¼Ÿ](#q4-å¦‚ä½•è§£å†³cannot-borrow-as-mutableé”™è¯¯)
  - [ç”Ÿå‘½å‘¨æœŸ](#ç”Ÿå‘½å‘¨æœŸ)
    - [Q5: ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸï¼Ÿä½•æ—¶éœ€è¦æ ‡æ³¨ï¼Ÿ](#q5-ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸä½•æ—¶éœ€è¦æ ‡æ³¨)
    - [Q6: 'staticç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆï¼Ÿ](#q6-staticç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆ)
  - [å†…å­˜å®‰å…¨](#å†…å­˜å®‰å…¨)
    - [Q7: Rustå¦‚ä½•é˜²æ­¢æ‚¬å‚æŒ‡é’ˆï¼Ÿ](#q7-rustå¦‚ä½•é˜²æ­¢æ‚¬å‚æŒ‡é’ˆ)
    - [Q8: å¦‚ä½•å¤„ç†è‡ªå¼•ç”¨ç»“æ„ï¼Ÿ](#q8-å¦‚ä½•å¤„ç†è‡ªå¼•ç”¨ç»“æ„)
  - [å®è·µé—®é¢˜](#å®è·µé—®é¢˜)
    - [Q9: å¦‚ä½•åœ¨å¤šä¸ªæ‰€æœ‰è€…ä¹‹é—´å…±äº«æ•°æ®ï¼Ÿ](#q9-å¦‚ä½•åœ¨å¤šä¸ªæ‰€æœ‰è€…ä¹‹é—´å…±äº«æ•°æ®)
    - [Q10: å¦‚ä½•ä¼˜åŒ–æ‰€æœ‰æƒè½¬ç§»çš„æ€§èƒ½ï¼Ÿ](#q10-å¦‚ä½•ä¼˜åŒ–æ‰€æœ‰æƒè½¬ç§»çš„æ€§èƒ½)
  - [ğŸ“š å»¶ä¼¸é˜…è¯»](#-å»¶ä¼¸é˜…è¯»)

**æœ€åæ›´æ–°**: 2026-01-26
**é€‚ç”¨ç‰ˆæœ¬**: Rust 1.93.0+
**æ–‡æ¡£ç±»å‹**: ğŸ“š é—®é¢˜è§£ç­”

---

## ğŸ“‹ é—®é¢˜ç´¢å¼•

**å¿«é€Ÿè·³è½¬**:

- [æ‰€æœ‰æƒåŸºç¡€](#æ‰€æœ‰æƒåŸºç¡€)
- [å€Ÿç”¨è§„åˆ™](#å€Ÿç”¨è§„åˆ™)
- [ç”Ÿå‘½å‘¨æœŸ](#ç”Ÿå‘½å‘¨æœŸ)
- [å†…å­˜å®‰å…¨](#å†…å­˜å®‰å…¨)
- [å®è·µé—®é¢˜](#å®è·µé—®é¢˜)

---

## æ‰€æœ‰æƒåŸºç¡€

### Q1: ä»€ä¹ˆæ˜¯æ‰€æœ‰æƒï¼Ÿä¸ºä»€ä¹ˆRustéœ€è¦æ‰€æœ‰æƒç³»ç»Ÿï¼Ÿ

**A**: æ‰€æœ‰æƒæ˜¯Rustå†…å­˜ç®¡ç†çš„æ ¸å¿ƒæœºåˆ¶ã€‚

**æ‰€æœ‰æƒä¸‰åŸåˆ™**:

1. æ¯ä¸ªå€¼éƒ½æœ‰ä¸€ä¸ªæ‰€æœ‰è€…ï¼ˆå˜é‡ï¼‰
2. å€¼åœ¨ä»»æ„æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªæ‰€æœ‰è€…
3. å½“æ‰€æœ‰è€…ç¦»å¼€ä½œç”¨åŸŸï¼Œå€¼å°†è¢«ä¸¢å¼ƒ

**ä¼˜åŠ¿**:

- âœ… ç¼–è¯‘æ—¶ä¿è¯å†…å­˜å®‰å…¨
- âœ… æ— éœ€åƒåœ¾å›æ”¶å™¨
- âœ… é›¶æˆæœ¬æŠ½è±¡
- âœ… é˜²æ­¢æ•°æ®ç«äº‰

**ç¤ºä¾‹**:

```rust
fn main() {
    let s1 = String::from("hello");
    let s2 = s1; // æ‰€æœ‰æƒè½¬ç§»
    // println!("{}", s1); // é”™è¯¯ï¼šs1å·²å¤±æ•ˆ
    println!("{}", s2); // æ­£ç¡®
}
```

**ç›¸å…³**: [01_theory/06_ç±»å‹ç³»ç»Ÿç†è®º.md](./tier_04_advanced/06_ç±»å‹ç³»ç»Ÿç†è®º.md)

---

### Q2: Move è¯­ä¹‰ vs Copy è¯­ä¹‰ï¼Ÿ

**A**: ç±»å‹å®ç°äº†Copy traitä¼šå¤åˆ¶ï¼Œå¦åˆ™ä¼šç§»åŠ¨ã€‚

**Copyç±»å‹** (æ ˆä¸Š):

- åŸºæœ¬ç±»å‹: `i32`, `f64`, `bool`, `char`
- å…ƒç»„ï¼ˆå…ƒç´ éƒ½æ˜¯Copyï¼‰
- æ•°ç»„ï¼ˆå…ƒç´ éƒ½æ˜¯Copyï¼‰

**Moveç±»å‹** (å †ä¸Š):

- `String`, `Vec<T>`, `Box<T>`
- è‡ªå®šä¹‰ç±»å‹ï¼ˆé»˜è®¤ï¼‰

**ç¤ºä¾‹**:

```rust
// Copy
let x = 5;
let y = x; // å¤åˆ¶
println!("{}, {}", x, y); // éƒ½å¯ç”¨

// Move
let s1 = String::from("hello");
let s2 = s1; // ç§»åŠ¨
// println!("{}", s1); // é”™è¯¯
```

**ç›¸å…³**: [02_core/01_æ‰€æœ‰æƒå¿«é€Ÿå…¥é—¨.md](./tier_02_guides/01_æ‰€æœ‰æƒå¿«é€Ÿå…¥é—¨.md)

---

## å€Ÿç”¨è§„åˆ™

### Q3: å€Ÿç”¨è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿ

**A**: Rustçš„å€Ÿç”¨è§„åˆ™ä¿è¯å†…å­˜å®‰å…¨ï¼š

**è§„åˆ™**:

1. åŒä¸€æ—¶é—´ï¼Œå¯ä»¥æœ‰**ä»»æ„æ•°é‡çš„ä¸å¯å˜å¼•ç”¨**
2. åŒä¸€æ—¶é—´ï¼Œåªèƒ½æœ‰**ä¸€ä¸ªå¯å˜å¼•ç”¨**
3. å¼•ç”¨å¿…é¡»æ€»æ˜¯æœ‰æ•ˆçš„

**ç¤ºä¾‹**:

```rust
// âœ… æ­£ç¡®ï¼šå¤šä¸ªä¸å¯å˜å¼•ç”¨
let s = String::from("hello");
let r1 = &s;
let r2 = &s;
println!("{}, {}", r1, r2);

// âŒ é”™è¯¯ï¼šåŒæ—¶æœ‰å¯å˜å’Œä¸å¯å˜å¼•ç”¨
let mut s = String::from("hello");
let r1 = &s;
let r2 = &mut s; // é”™è¯¯
```

**ç›¸å…³**: [02_core/02_å€Ÿç”¨å®è·µæŒ‡å—.md](./tier_02_guides/02_å€Ÿç”¨å®è·µæŒ‡å—.md)

---

### Q4: å¦‚ä½•è§£å†³"cannot borrow as mutable"é”™è¯¯ï¼Ÿ

**A**: å¸¸è§åŸå› å’Œè§£å†³æ–¹æ¡ˆï¼š

**åŸå› 1: å˜é‡æœªå£°æ˜ä¸ºmut**:

```rust
// âŒ é”™è¯¯
let s = String::from("hello");
s.push_str(" world"); // é”™è¯¯

// âœ… æ­£ç¡®
let mut s = String::from("hello");
s.push_str(" world");
```

**åŸå› 2: å·²æœ‰ä¸å¯å˜å€Ÿç”¨**:

```rust
// âŒ é”™è¯¯
let mut s = String::from("hello");
let r = &s;
s.push_str(" world"); // é”™è¯¯ï¼šå·²æœ‰ä¸å¯å˜å€Ÿç”¨

// âœ… æ­£ç¡®ï¼šç¼©å°å€Ÿç”¨ä½œç”¨åŸŸ
let mut s = String::from("hello");
{
    let r = &s;
    println!("{}", r);
} // rä½œç”¨åŸŸç»“æŸ
s.push_str(" world");
```

**åŸå› 3: å¤šä¸ªå¯å˜å€Ÿç”¨**:

```rust
// âŒ é”™è¯¯
let mut s = String::from("hello");
let r1 = &mut s;
let r2 = &mut s; // é”™è¯¯

// âœ… æ­£ç¡®ï¼šä½¿ç”¨ä½œç”¨åŸŸåˆ†ç¦»
let mut s = String::from("hello");
{
    let r1 = &mut s;
    r1.push_str(" world");
} // r1ä½œç”¨åŸŸç»“æŸ
let r2 = &mut s;
r2.push_str("!");
```

**ç›¸å…³**: [05_practice/03_common_pitfalls.md](./tier_01_foundations/04_å¸¸è§é—®é¢˜.md)

---

## ç”Ÿå‘½å‘¨æœŸ

### Q5: ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸï¼Ÿä½•æ—¶éœ€è¦æ ‡æ³¨ï¼Ÿ

**A**: ç”Ÿå‘½å‘¨æœŸæ˜¯å¼•ç”¨æœ‰æ•ˆæ€§çš„ä½œç”¨åŸŸã€‚

**ç¼–è¯‘å™¨ä½•æ—¶éœ€è¦æ ‡æ³¨**:

- å‡½æ•°è¿”å›å¼•ç”¨
- ç»“æ„ä½“åŒ…å«å¼•ç”¨
- å¤šä¸ªå¼•ç”¨å‚æ•°

**åŸºæœ¬è¯­æ³•**:

```rust
// å‡½æ•°ä¸­çš„ç”Ÿå‘½å‘¨æœŸ
fn longest<'a>(x: &'a str, y: &'a str) -> &'a str {
    if x.len() > y.len() {
        x
    } else {
        y
    }
}

// ç»“æ„ä½“ä¸­çš„ç”Ÿå‘½å‘¨æœŸ
struct ImportantExcerpt<'a> {
    part: &'a str,
}
```

**ç”Ÿå‘½å‘¨æœŸçœç•¥è§„åˆ™**:

1. æ¯ä¸ªå¼•ç”¨å‚æ•°éƒ½æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸ
2. åªæœ‰ä¸€ä¸ªè¾“å…¥ç”Ÿå‘½å‘¨æœŸï¼Œè¿”å›å€¼ä½¿ç”¨è¯¥ç”Ÿå‘½å‘¨æœŸ
3. æ–¹æ³•ä¸­ï¼Œè¿”å›å€¼ä½¿ç”¨ `&self` çš„ç”Ÿå‘½å‘¨æœŸ

**ç›¸å…³**: [02_core/03_ç”Ÿå‘½å‘¨æœŸå®è·µ.md](./tier_02_guides/03_ç”Ÿå‘½å‘¨æœŸå®è·µ.md)

---

### Q6: 'staticç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆï¼Ÿ

**A**: `'static` è¡¨ç¤ºå¼•ç”¨åœ¨æ•´ä¸ªç¨‹åºè¿è¡ŒæœŸé—´éƒ½æœ‰æ•ˆã€‚

**å¸¸è§åœºæ™¯**:

```rust
// å­—ç¬¦ä¸²å­—é¢é‡
let s: &'static str = "hello";

// å…¨å±€å¸¸é‡
const MAX_SIZE: usize = 100;

// å…¨å±€é™æ€å˜é‡
static GLOBAL_VAR: i32 = 42;

// æ³„æ¼çš„Box
let leaked: &'static str = Box::leak(Box::new(String::from("hello")));
```

**æ³¨æ„**: ä¸è¦è¿‡åº¦ä½¿ç”¨ `'static`ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹åº”è¯¥ä½¿ç”¨é€‚å½“çš„ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨ã€‚

**ç›¸å…³**: [03_advanced/03_ç”Ÿå‘½å‘¨æœŸå‚è€ƒ.md](./tier_03_references/03_ç”Ÿå‘½å‘¨æœŸå‚è€ƒ.md)

---

## å†…å­˜å®‰å…¨

### Q7: Rustå¦‚ä½•é˜²æ­¢æ‚¬å‚æŒ‡é’ˆï¼Ÿ

**A**: é€šè¿‡å€Ÿç”¨æ£€æŸ¥å™¨åœ¨ç¼–è¯‘æ—¶æ£€æµ‹ï¼š

**C/C++ä¸­çš„æ‚¬å‚æŒ‡é’ˆ**:

```c
char* dangle() {
    char local[] = "hello";
    return local; // è¿”å›å±€éƒ¨å˜é‡åœ°å€ï¼
}
```

**Rustç¼–è¯‘æ—¶é˜»æ­¢**:

```rust
fn dangle() -> &String {
    let s = String::from("hello");
    &s // é”™è¯¯ï¼šè¿”å›å±€éƒ¨å˜é‡çš„å¼•ç”¨
} // såœ¨è¿™é‡Œè¢«ä¸¢å¼ƒ

// æ­£ç¡®ï¼šè¿”å›æ‰€æœ‰æƒ
fn no_dangle() -> String {
    let s = String::from("hello");
    s // è½¬ç§»æ‰€æœ‰æƒ
}
```

**ç›¸å…³**: [04_safety/01_memory_safety.md](./tier_03_references/08_å†…å­˜å®‰å…¨å‚è€ƒ.md)

---

### Q8: å¦‚ä½•å¤„ç†è‡ªå¼•ç”¨ç»“æ„ï¼Ÿ

**A**: ä½¿ç”¨ `Pin` å’Œ unsafeï¼Œæˆ–é‡æ–°è®¾è®¡æ•°æ®ç»“æ„ï¼š

**æ–¹æ¡ˆ1: ä½¿ç”¨ç´¢å¼•æ›¿ä»£å¼•ç”¨**:

```rust
struct Node {
    data: String,
    next: Option<usize>, // ç´¢å¼•è€Œéå¼•ç”¨
}

struct Graph {
    nodes: Vec<Node>,
}
```

**æ–¹æ¡ˆ2: ä½¿ç”¨ Rc/Arc**:

```rust
use std::rc::Rc;

struct Node {
    data: String,
    next: Option<Rc<Node>>,
}
```

**æ–¹æ¡ˆ3: ä½¿ç”¨ Pinï¼ˆasyncéœ€è¦ï¼‰**:

```rust
use std::pin::Pin;

struct SelfReferential {
    data: String,
    ptr: *const String,
}

impl SelfReferential {
    fn new(data: String) -> Pin<Box<Self>> {
        let mut boxed = Box::pin(SelfReferential {
            data,
            ptr: std::ptr::null(),
        });

        unsafe {
            let self_ptr: *mut Self = boxed.as_mut().get_unchecked_mut();
            (*self_ptr).ptr = &(*self_ptr).data;
        }

        boxed
    }
}
```

**ç›¸å…³**: [03_advanced/05_æ™ºèƒ½æŒ‡é’ˆAPIå‚è€ƒ.md](./tier_03_references/05_æ™ºèƒ½æŒ‡é’ˆAPIå‚è€ƒ.md)

---

## å®è·µé—®é¢˜

### Q9: å¦‚ä½•åœ¨å¤šä¸ªæ‰€æœ‰è€…ä¹‹é—´å…±äº«æ•°æ®ï¼Ÿ

**A**: æ ¹æ®éœ€æ±‚é€‰æ‹©æ™ºèƒ½æŒ‡é’ˆï¼š

| åœºæ™¯                   | æ¨èæ–¹æ¡ˆ         | è¯´æ˜         |
| ---------------------- | ---------------- | ------------ |
| å•çº¿ç¨‹å…±äº«             | `Rc<T>`          | å¼•ç”¨è®¡æ•°     |
| å¤šçº¿ç¨‹å…±äº«ï¼ˆåªè¯»ï¼‰     | `Arc<T>`         | åŸå­å¼•ç”¨è®¡æ•° |
| å¤šçº¿ç¨‹å…±äº«ï¼ˆå¯å†™ï¼‰     | `Arc<Mutex<T>>`  | äº’æ–¥é”       |
| å¤šçº¿ç¨‹å…±äº«ï¼ˆè¯»å¤šå†™å°‘ï¼‰ | `Arc<RwLock<T>>` | è¯»å†™é”       |

**ç¤ºä¾‹**:

```rust
use std::rc::Rc;

// å•çº¿ç¨‹
let data = Rc::new(vec![1, 2, 3]);
let data2 = Rc::clone(&data);
println!("{:?}, {:?}", data, data2);

// å¤šçº¿ç¨‹
use std::sync::{Arc, Mutex};
use std::thread;

let data = Arc::new(Mutex::new(vec![1, 2, 3]));
let data2 = Arc::clone(&data);

thread::spawn(move || {
    data2.lock().unwrap().push(4);
});
```

**ç›¸å…³**: [03_advanced/05_æ™ºèƒ½æŒ‡é’ˆAPIå‚è€ƒ.md](./tier_03_references/05_æ™ºèƒ½æŒ‡é’ˆAPIå‚è€ƒ.md)

---

### Q10: å¦‚ä½•ä¼˜åŒ–æ‰€æœ‰æƒè½¬ç§»çš„æ€§èƒ½ï¼Ÿ

**A**: å¤šç§ç­–ç•¥ï¼š

**ç­–ç•¥1: ä½¿ç”¨å¼•ç”¨é¿å…å¤åˆ¶**:

```rust
// âŒ ä½æ•ˆ
fn process(data: Vec<i32>) {
    // ...
}

// âœ… é«˜æ•ˆ
fn process(data: &[i32]) {
    // ...
}
```

**ç­–ç•¥2: ä½¿ç”¨ Clone-on-Write (Cow)**:

```rust
use std::borrow::Cow;

fn process(data: Cow<str>) {
    // åªåœ¨éœ€è¦ä¿®æ”¹æ—¶æ‰å…‹éš†
    if needs_modification {
        let mut owned = data.into_owned();
        owned.push_str("suffix");
    }
}
```

**ç­–ç•¥3: ä½¿ç”¨ `&mut` å°±åœ°ä¿®æ”¹**

```rust
// âŒ ä½æ•ˆï¼šæ¯æ¬¡éƒ½åˆ†é…æ–°å†…å­˜
fn append(mut v: Vec<i32>, value: i32) -> Vec<i32> {
    v.push(value);
    v
}

// âœ… é«˜æ•ˆï¼šå°±åœ°ä¿®æ”¹
fn append(v: &mut Vec<i32>, value: i32) {
    v.push(value);
}
```

**ç›¸å…³**: [05_practice/04_performance_tuning.md](./tier_03_references/09_æ€§èƒ½ä¼˜åŒ–å‚è€ƒ.md)

---

## ğŸ“š å»¶ä¼¸é˜…è¯»

- [ä¸»ç´¢å¼•](./00_MASTER_INDEX.md) - å®Œæ•´æ–‡æ¡£å¯¼èˆª
- [README](./README.md) - é¡¹ç›®æ¦‚è¿°
- [Glossary](./Glossary.md) - æ ¸å¿ƒæœ¯è¯­è¡¨
- [ç†è®ºåŸºç¡€](./tier_04_advanced/06_ç±»å‹ç³»ç»Ÿç†è®º.md) - æ·±å…¥ç†è®º
- [æœ€ä½³å®è·µ](./tier_01_foundations/04_å¸¸è§é—®é¢˜.md) - å®è·µæŒ‡å—

---

**éœ€è¦æ›´å¤šå¸®åŠ©ï¼Ÿ**

- æŸ¥çœ‹ [ç¤ºä¾‹ä»£ç ](../examples/)
- è¿è¡Œ [æµ‹è¯•ç”¨ä¾‹](../tests/)
- é˜…è¯» [æ ¸å¿ƒæ–‡æ¡£](./tier_02_guides/)
