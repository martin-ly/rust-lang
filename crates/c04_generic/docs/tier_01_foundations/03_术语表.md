# C04 æ³›å‹ç¼–ç¨‹ - æœ¯è¯­è¡¨

## ğŸ“Š ç›®å½•

- [C04 æ³›å‹ç¼–ç¨‹ - æœ¯è¯­è¡¨](#c04-æ³›å‹ç¼–ç¨‹---æœ¯è¯­è¡¨)
  - [ğŸ“Š ç›®å½•](#-ç›®å½•)
  - [ğŸ¯ å¦‚ä½•ä½¿ç”¨æœ¬æœ¯è¯­è¡¨](#-å¦‚ä½•ä½¿ç”¨æœ¬æœ¯è¯­è¡¨)
    - [å¿«é€ŸæŸ¥æ‰¾](#å¿«é€ŸæŸ¥æ‰¾)
    - [æœ¯è¯­æ ‡è®°](#æœ¯è¯­æ ‡è®°)
    - [æœ¯è¯­æ ¼å¼](#æœ¯è¯­æ ¼å¼)
  - [ğŸ“š æœ¯è¯­ç´¢å¼• (æŒ‰å­—æ¯é¡ºåº)](#-æœ¯è¯­ç´¢å¼•-æŒ‰å­—æ¯é¡ºåº)
    - [A-C](#a-c)
    - [D-G](#d-g)
    - [H-M](#h-m)
    - [N-S](#n-s)
    - [T-Z](#t-z)
  - [ğŸ“– æœ¯è¯­è¯¦è§£ (æŒ‰ä¸»é¢˜åˆ†ç±»)](#-æœ¯è¯­è¯¦è§£-æŒ‰ä¸»é¢˜åˆ†ç±»)
    - [A. æ³›å‹åŸºç¡€](#a-æ³›å‹åŸºç¡€)
      - [Generic (æ³›å‹) ğŸ”µ](#generic-æ³›å‹-)
      - [Type Parameter (ç±»å‹å‚æ•°) ğŸ”µ](#type-parameter-ç±»å‹å‚æ•°-)
      - [Generic Function (æ³›å‹å‡½æ•°) ğŸ”µ](#generic-function-æ³›å‹å‡½æ•°-)
      - [Const Generic (å¸¸é‡æ³›å‹) ğŸŸ¢](#const-generic-å¸¸é‡æ³›å‹-)
      - [Default Type Parameter (é»˜è®¤ç±»å‹å‚æ•°) ğŸŸ¢](#default-type-parameter-é»˜è®¤ç±»å‹å‚æ•°-)
    - [B. Trait ç³»ç»Ÿ](#b-trait-ç³»ç»Ÿ)
      - [Trait (trait) ğŸ”µ](#trait-trait-)
      - [Trait Bound (trait çº¦æŸ) ğŸ”µ](#trait-bound-trait-çº¦æŸ-)
      - [Trait Object (trait å¯¹è±¡) ğŸŸ¢](#trait-object-trait-å¯¹è±¡-)
      - [Impl Trait (impl Trait) ğŸŸ¢](#impl-trait-impl-trait-)
      - [Supertraits (è¶… trait) ğŸŸ¢](#supertraits-è¶…-trait-)
      - [Marker Trait (æ ‡è®° trait) ğŸŸ¢](#marker-trait-æ ‡è®°-trait-)
      - [Blanket Implementation (å…¨é¢å®ç°) ğŸŸ¡](#blanket-implementation-å…¨é¢å®ç°-)
    - [C. å…³è”ç±»å‹ä¸ GAT](#c-å…³è”ç±»å‹ä¸-gat)
      - [Associated Type (å…³è”ç±»å‹) ğŸŸ¢](#associated-type-å…³è”ç±»å‹-)
      - [GAT (Generic Associated Types) (æ³›å‹å…³è”ç±»å‹) ğŸŸ¡](#gat-generic-associated-types-æ³›å‹å…³è”ç±»å‹-)
      - [Associated Const (å…³è”å¸¸é‡) ğŸŸ¢](#associated-const-å…³è”å¸¸é‡-)
    - [D. çº¦æŸä¸è¾¹ç•Œ](#d-çº¦æŸä¸è¾¹ç•Œ)
      - [Bound (çº¦æŸ) ğŸ”µ](#bound-çº¦æŸ-)
      - [Where Clause (where å­å¥) ğŸ”µ](#where-clause-where-å­å¥-)
      - [Higher-Rank Trait Bounds (HRTB) (é«˜é˜¶ trait è¾¹ç•Œ) ğŸŸ¡](#higher-rank-trait-bounds-hrtb-é«˜é˜¶-trait-è¾¹ç•Œ-)
    - [E. ç”Ÿå‘½å‘¨æœŸ](#e-ç”Ÿå‘½å‘¨æœŸ)
      - [Lifetime (ç”Ÿå‘½å‘¨æœŸ) ğŸ”µ](#lifetime-ç”Ÿå‘½å‘¨æœŸ-)
      - [Variance (å‹å˜) ğŸ”´](#variance-å‹å˜-)
      - [Subtyping (å­ç±»å‹) ğŸŸ¡](#subtyping-å­ç±»å‹-)
    - [F. ç¼–è¯‘å™¨è¡Œä¸º](#f-ç¼–è¯‘å™¨è¡Œä¸º)
      - [Monomorphization (å•æ€åŒ–) ğŸŸ¡](#monomorphization-å•æ€åŒ–-)
      - [Type Erasure (ç±»å‹æ“¦é™¤) ğŸŸ¡](#type-erasure-ç±»å‹æ“¦é™¤-)
      - [Static Dispatch (é™æ€åˆ†å‘) ğŸŸ¢](#static-dispatch-é™æ€åˆ†å‘-)
      - [Dynamic Dispatch (åŠ¨æ€åˆ†å‘) ğŸŸ¢](#dynamic-dispatch-åŠ¨æ€åˆ†å‘-)
      - [Fat Pointer (èƒ–æŒ‡é’ˆ) ğŸŸ¡](#fat-pointer-èƒ–æŒ‡é’ˆ-)
    - [G. é«˜çº§ç‰¹æ€§](#g-é«˜çº§ç‰¹æ€§)
      - [Phantom Data (å¹½çµæ•°æ®) ğŸŸ¡](#phantom-data-å¹½çµæ•°æ®-)
      - [Zero-Sized Type (ZST) (é›¶å¤§å°ç±»å‹) ğŸŸ¡](#zero-sized-type-zst-é›¶å¤§å°ç±»å‹-)
      - [RPITIT (è¿”å›ä½ç½® impl Trait) ğŸŸ¢](#rpitit-è¿”å›ä½ç½®-impl-trait-)
      - [Higher-Kinded Types (HKT) (é«˜é˜¶ç±»å‹) ğŸ”´](#higher-kinded-types-hkt-é«˜é˜¶ç±»å‹-)
    - [H. æ€§èƒ½ç›¸å…³](#h-æ€§èƒ½ç›¸å…³)
      - [Zero-Cost Abstraction (é›¶æˆæœ¬æŠ½è±¡) ğŸŸ¢](#zero-cost-abstraction-é›¶æˆæœ¬æŠ½è±¡-)
      - [Turbofish (æ¶¡è½®é±¼è¯­æ³•) ğŸŸ¢](#turbofish-æ¶¡è½®é±¼è¯­æ³•-)
    - [I. ç±»å‹ç†è®º](#i-ç±»å‹ç†è®º)
      - [Polymorphism (å¤šæ€æ€§) ğŸ”µ](#polymorphism-å¤šæ€æ€§-)
      - [Type Constructor (ç±»å‹æ„é€ å™¨) ğŸŸ¡](#type-constructor-ç±»å‹æ„é€ å™¨-)
      - [Coherence (ä¸€è‡´æ€§) ğŸŸ¡](#coherence-ä¸€è‡´æ€§-)
      - [Orphan Rule (å­¤å„¿è§„åˆ™) ğŸŸ¡](#orphan-rule-å­¤å„¿è§„åˆ™-)
  - [ğŸ”¤ ä¸­è‹±å¯¹ç…§è¡¨](#-ä¸­è‹±å¯¹ç…§è¡¨)
    - [A-G](#a-g)
    - [H-Z](#h-z)
  - [ğŸ“š ç›¸å…³æ–‡æ¡£](#-ç›¸å…³æ–‡æ¡£)
    - [æŒ‰æœ¯è¯­çº§åˆ«](#æŒ‰æœ¯è¯­çº§åˆ«)
    - [æ·±å…¥ç†è§£](#æ·±å…¥ç†è§£)

**ç‰ˆæœ¬**: 1.0.0
**æœ€åæ›´æ–°**: 2025-10-22
**æœ¯è¯­æ•°é‡**: 100+ æœ¯è¯­
**ç´¢å¼•ç±»å‹**: æŒ‰å­—æ¯é¡ºåº + æŒ‰ä¸»é¢˜åˆ†ç±»

---

## ğŸ¯ å¦‚ä½•ä½¿ç”¨æœ¬æœ¯è¯­è¡¨

### å¿«é€ŸæŸ¥æ‰¾

1. **æŒ‰å­—æ¯æŸ¥æ‰¾**: å¦‚æœçŸ¥é“æœ¯è¯­çš„è‹±æ–‡æˆ–ä¸­æ–‡é¦–å­—æ¯ï¼Œä½¿ç”¨ [æœ¯è¯­ç´¢å¼•](#-æœ¯è¯­ç´¢å¼•-æŒ‰å­—æ¯é¡ºåº)
2. **æŒ‰ä¸»é¢˜æŸ¥æ‰¾**: å¦‚æœæƒ³äº†è§£æŸä¸ªä¸»é¢˜çš„æ‰€æœ‰æœ¯è¯­ï¼Œä½¿ç”¨ [æœ¯è¯­è¯¦è§£](#-æœ¯è¯­è¯¦è§£-æŒ‰ä¸»é¢˜åˆ†ç±»)
3. **ä¸­è‹±å¯¹ç…§**: å¦‚æœæƒ³æŸ¥æ‰¾ä¸­è‹±æ–‡å¯¹åº”ï¼Œä½¿ç”¨ [ä¸­è‹±å¯¹ç…§è¡¨](#-ä¸­è‹±å¯¹ç…§è¡¨)

### æœ¯è¯­æ ‡è®°

- ğŸ”µ **åŸºç¡€æœ¯è¯­**: åˆå­¦è€…å¿…é¡»æŒæ¡
- ğŸŸ¢ **ä¸­çº§æœ¯è¯­**: å®é™…å¼€å‘ä¸­å¸¸ç”¨
- ğŸŸ¡ **é«˜çº§æœ¯è¯­**: æ·±å…¥ç†è§£éœ€è¦
- ğŸ”´ **ä¸“å®¶æœ¯è¯­**: ä¸“å®¶çº§åˆ«æ¦‚å¿µ

### æœ¯è¯­æ ¼å¼

æ¯ä¸ªæœ¯è¯­æ¡ç›®åŒ…å«ï¼š

- **æœ¯è¯­åç§°** (ä¸­æ–‡ / English)
- **å®šä¹‰**: ç®€æ´å‡†ç¡®çš„å®šä¹‰
- **ä»£ç ç¤ºä¾‹**: å±•ç¤ºç”¨æ³•çš„ç®€çŸ­ä»£ç 
- **ç›¸å…³æœ¯è¯­**: å…³è”çš„å…¶ä»–æœ¯è¯­
- **å‚è€ƒæ–‡æ¡£**: è¯¦ç»†è¯´æ˜æ‰€åœ¨æ–‡æ¡£

---

## ğŸ“š æœ¯è¯­ç´¢å¼• (æŒ‰å­—æ¯é¡ºåº)

### A-C

| æœ¯è¯­                         | ä¸­æ–‡            | çº§åˆ« | å®šä¹‰ç®€è¿°                           |
| ---------------------------- | --------------- | ---- | ---------------------------------- |
| **Abstract Data Type (ADT)** | æŠ½è±¡æ•°æ®ç±»å‹    | ğŸ”µ   | å®šä¹‰æ•°æ®å’Œæ“ä½œçš„æŠ½è±¡æ¥å£           |
| **Associated Const**         | å…³è”å¸¸é‡        | ğŸŸ¢   | trait ä¸­å®šä¹‰çš„å¸¸é‡                 |
| **Associated Type**          | å…³è”ç±»å‹        | ğŸŸ¢   | trait ä¸­å®šä¹‰çš„ç±»å‹å ä½ç¬¦           |
| **Blanket Implementation**   | å…¨é¢å®ç°        | ğŸŸ¡   | ä¸ºæ»¡è¶³æ¡ä»¶çš„æ‰€æœ‰ç±»å‹å®ç° trait     |
| **Bound**                    | çº¦æŸ            | ğŸ”µ   | å¯¹ç±»å‹å‚æ•°çš„é™åˆ¶æ¡ä»¶               |
| **Boxed Trait Object**       | è£…ç®± trait å¯¹è±¡ | ğŸŸ¢   | `Box<dyn Trait>` å½¢å¼çš„ trait å¯¹è±¡ |
| **Coherence**                | ä¸€è‡´æ€§          | ğŸŸ¡   | é˜²æ­¢ trait å®ç°å†²çªçš„è§„åˆ™          |
| **Const Generic**            | å¸¸é‡æ³›å‹        | ğŸŸ¢   | ä½¿ç”¨å¸¸é‡ä½œä¸ºæ³›å‹å‚æ•°               |

### D-G

| æœ¯è¯­                               | ä¸­æ–‡         | çº§åˆ« | å®šä¹‰ç®€è¿°               |
| ---------------------------------- | ------------ | ---- | ---------------------- |
| **Default Type Parameter**         | é»˜è®¤ç±»å‹å‚æ•° | ğŸŸ¢   | æ³›å‹å‚æ•°çš„é»˜è®¤å€¼       |
| **Dispatch**                       | åˆ†å‘         | ğŸ”µ   | é€‰æ‹©å…·ä½“æ–¹æ³•å®ç°çš„æœºåˆ¶ |
| **Dynamic Dispatch**               | åŠ¨æ€åˆ†å‘     | ğŸŸ¢   | è¿è¡Œæ—¶ç¡®å®šæ–¹æ³•å®ç°     |
| **Fat Pointer**                    | èƒ–æŒ‡é’ˆ       | ğŸŸ¡   | åŒ…å«é¢å¤–ä¿¡æ¯çš„æŒ‡é’ˆ     |
| **GAT (Generic Associated Types)** | æ³›å‹å…³è”ç±»å‹ | ğŸŸ¡   | å…³è”ç±»å‹å¸¦æ³›å‹å‚æ•°     |
| **Generic**                        | æ³›å‹         | ğŸ”µ   | å‚æ•°åŒ–çš„ç±»å‹æˆ–å‡½æ•°     |
| **Generic Function**               | æ³›å‹å‡½æ•°     | ğŸ”µ   | ä½¿ç”¨ç±»å‹å‚æ•°çš„å‡½æ•°     |

### H-M

| æœ¯è¯­                                | ä¸­æ–‡            | çº§åˆ« | å®šä¹‰ç®€è¿°                     |
| ----------------------------------- | --------------- | ---- | ---------------------------- |
| **Higher-Kinded Types (HKT)**       | é«˜é˜¶ç±»å‹        | ğŸ”´   | ç±»å‹æ„é€ å™¨çš„æŠ½è±¡             |
| **Higher-Rank Trait Bounds (HRTB)** | é«˜é˜¶ trait è¾¹ç•Œ | ğŸŸ¡   | `for<'a>` å½¢å¼çš„è¾¹ç•Œ         |
| **Impl Trait**                      | impl Trait      | ğŸŸ¢   | è¿”å›/æ¥å—å®ç°æŸ trait çš„ç±»å‹ |
| **Inference**                       | ç±»å‹æ¨æ–­        | ğŸ”µ   | ç¼–è¯‘å™¨è‡ªåŠ¨æ¨å¯¼ç±»å‹           |
| **Lifetime**                        | ç”Ÿå‘½å‘¨æœŸ        | ğŸ”µ   | å¼•ç”¨æœ‰æ•ˆæ€§çš„ä½œç”¨åŸŸ           |
| **Marker Trait**                    | æ ‡è®° trait      | ğŸŸ¢   | ä¸åŒ…å«æ–¹æ³•çš„ trait           |
| **Monomorphization**                | å•æ€åŒ–          | ğŸŸ¡   | ä¸ºæ¯ä¸ªç±»å‹ç”Ÿæˆä¸“é—¨ä»£ç        |

### N-S

| æœ¯è¯­                | ä¸­æ–‡                | çº§åˆ« | å®šä¹‰ç®€è¿°                  |
| ------------------- | ------------------- | ---- | ------------------------- |
| **Orphan Rule**     | å­¤å„¿è§„åˆ™            | ğŸŸ¡   | trait å®ç°çš„é™åˆ¶è§„åˆ™      |
| **Phantom Data**    | å¹½çµæ•°æ®            | ğŸŸ¡   | é›¶å¤§å°çš„ç±»å‹æ ‡è®°          |
| **Polymorphism**    | å¤šæ€æ€§              | ğŸ”µ   | ä¸€ä¸ªæ¥å£å¤šç§å®ç°          |
| **RPITIT**          | è¿”å›ä½ç½® impl Trait | ğŸŸ¢   | trait æ–¹æ³•è¿”å› impl Trait |
| **Static Dispatch** | é™æ€åˆ†å‘            | ğŸŸ¢   | ç¼–è¯‘æ—¶ç¡®å®šæ–¹æ³•å®ç°        |
| **Subtyping**       | å­ç±»å‹              | ğŸŸ¡   | ç±»å‹ä¹‹é—´çš„åŒ…å«å…³ç³»        |
| **Supertraits**     | è¶… trait            | ğŸŸ¢   | trait çš„çˆ¶ trait          |

### T-Z

| æœ¯è¯­                      | ä¸­æ–‡       | çº§åˆ« | å®šä¹‰ç®€è¿°                   |
| ------------------------- | ---------- | ---- | -------------------------- |
| **Trait**                 | trait      | ğŸ”µ   | å®šä¹‰è¡Œä¸ºçš„æ¥å£             |
| **Trait Bound**           | trait çº¦æŸ | ğŸ”µ   | è¦æ±‚ç±»å‹å®ç°æŸ trait       |
| **Trait Object**          | trait å¯¹è±¡ | ğŸŸ¢   | `dyn Trait` å½¢å¼çš„åŠ¨æ€ç±»å‹ |
| **Turbofish**             | æ¶¡è½®é±¼è¯­æ³• | ğŸŸ¢   | `::<>` æ˜¾å¼æŒ‡å®šç±»å‹        |
| **Type Alias**            | ç±»å‹åˆ«å   | ğŸ”µ   | ä¸ºç±»å‹å®šä¹‰æ–°åç§°           |
| **Type Constructor**      | ç±»å‹æ„é€ å™¨ | ğŸŸ¡   | æ„é€ æ–°ç±»å‹çš„æœºåˆ¶           |
| **Type Erasure**          | ç±»å‹æ“¦é™¤   | ğŸŸ¡   | åˆ é™¤ç±»å‹ä¿¡æ¯çš„è¿‡ç¨‹         |
| **Type Parameter**        | ç±»å‹å‚æ•°   | ğŸ”µ   | æ³›å‹çš„å‚æ•°                 |
| **Variance**              | å‹å˜       | ğŸ”´   | æ³›å‹ç±»å‹çš„å­ç±»å‹å…³ç³»       |
| **Where Clause**          | where å­å¥ | ğŸ”µ   | æŒ‡å®š trait çº¦æŸçš„è¯­æ³•      |
| **Zero-Cost Abstraction** | é›¶æˆæœ¬æŠ½è±¡ | ğŸŸ¢   | æ— è¿è¡Œæ—¶å¼€é”€çš„æŠ½è±¡         |
| **Zero-Sized Type (ZST)** | é›¶å¤§å°ç±»å‹ | ğŸŸ¡   | ä¸å ç”¨å†…å­˜çš„ç±»å‹           |

---

## ğŸ“– æœ¯è¯­è¯¦è§£ (æŒ‰ä¸»é¢˜åˆ†ç±»)

### A. æ³›å‹åŸºç¡€

#### Generic (æ³›å‹) ğŸ”µ

**å®šä¹‰**: å‚æ•°åŒ–çš„ç±»å‹æˆ–å‡½æ•°ï¼Œå…è®¸åœ¨å®šä¹‰æ—¶ä½¿ç”¨ç±»å‹å‚æ•°ï¼Œåœ¨ä½¿ç”¨æ—¶æŒ‡å®šå…·ä½“ç±»å‹ã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
// æ³›å‹å‡½æ•°
fn identity<T>(value: T) -> T {
    value
}

// æ³›å‹ç»“æ„ä½“
struct Container<T> {
    value: T,
}

// ä½¿ç”¨
let x = identity(42);         // T = i32
let c = Container { value: "hello" }; // T = &str
```

**ç›¸å…³æœ¯è¯­**: [Type Parameter](#type-parameter-ç±»å‹å‚æ•°-), [Monomorphization](#monomorphization-å•æ€åŒ–-), [Generic Function](#generic-function-æ³›å‹å‡½æ•°-)

**å‚è€ƒæ–‡æ¡£**: [`tier_02_guides/01_æ³›å‹åŸºç¡€æŒ‡å—.md`](../tier_02_guides/01_æ³›å‹åŸºç¡€æŒ‡å—.md)

---

#### Type Parameter (ç±»å‹å‚æ•°) ğŸ”µ

**å®šä¹‰**: æ³›å‹å®šä¹‰ä¸­çš„å ä½ç¬¦ï¼Œä»£è¡¨ä»»æ„ç±»å‹ï¼Œåœ¨ä½¿ç”¨æ—¶è¢«å…·ä½“ç±»å‹æ›¿æ¢ã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
// T æ˜¯ç±»å‹å‚æ•°
fn max<T: PartialOrd>(a: T, b: T) -> T {
    if a > b { a } else { b }
}

// T å’Œ U æ˜¯ä¸åŒçš„ç±»å‹å‚æ•°
struct Pair<T, U> {
    first: T,
    second: U,
}
```

**å‘½åçº¦å®š**:

- å•å­—æ¯å¤§å†™: `T`, `U`, `V`, `E`, `K`, `V`
- æè¿°æ€§å‘½å: `Item`, `Error`, `Key`, `Value`

**ç›¸å…³æœ¯è¯­**: [Generic](#generic-æ³›å‹-), [Bound](#bound-çº¦æŸ-), [Default Type Parameter](#default-type-parameter-é»˜è®¤ç±»å‹å‚æ•°-)

**å‚è€ƒæ–‡æ¡£**: [`tier_03_references/01_æ³›å‹è¯­æ³•å‚è€ƒ.md`](../tier_03_references/01_æ³›å‹è¯­æ³•å‚è€ƒ.md)

---

#### Generic Function (æ³›å‹å‡½æ•°) ğŸ”µ

**å®šä¹‰**: ä½¿ç”¨ç±»å‹å‚æ•°å®šä¹‰çš„å‡½æ•°ï¼Œå¯ä»¥å¤„ç†å¤šç§ç±»å‹çš„æ•°æ®ã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
// ç®€å•æ³›å‹å‡½æ•°
fn swap<T>(a: &mut T, b: &mut T) {
    std::mem::swap(a, b);
}

// å¸¦çº¦æŸçš„æ³›å‹å‡½æ•°
fn print_value<T: std::fmt::Display>(value: T) {
    println!("{}", value);
}

// å¤šä¸ªç±»å‹å‚æ•°
fn combine<T, U>(first: T, second: U) -> (T, U) {
    (first, second)
}
```

**ç›¸å…³æœ¯è¯­**: [Type Parameter](#type-parameter-ç±»å‹å‚æ•°-), [Trait Bound](#trait-bound-trait-çº¦æŸ-), [Monomorphization](#monomorphization-å•æ€åŒ–-)

**å‚è€ƒæ–‡æ¡£**: [`tier_02_guides/01_æ³›å‹åŸºç¡€æŒ‡å—.md`](../tier_02_guides/01_æ³›å‹åŸºç¡€æŒ‡å—.md)

---

#### Const Generic (å¸¸é‡æ³›å‹) ğŸŸ¢

**å®šä¹‰**: ä½¿ç”¨ç¼–è¯‘æ—¶å¸¸é‡ä½œä¸ºæ³›å‹å‚æ•°ï¼Œå…è®¸åœ¨ç±»å‹ä¸­ç¼–ç æ•°å€¼ä¿¡æ¯ã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
// æ•°ç»„é•¿åº¦ä½œä¸ºæ³›å‹å‚æ•°
struct Array<T, const N: usize> {
    data: [T; N],
}

// ä½¿ç”¨
let arr: Array<i32, 5> = Array {
    data: [1, 2, 3, 4, 5],
};

// æ³›å‹å‡½æ•°ä½¿ç”¨ const æ³›å‹
fn sum<const N: usize>(arr: &[i32; N]) -> i32 {
    arr.iter().sum()
}
```

**åº”ç”¨åœºæ™¯**:

- å›ºå®šå¤§å°æ•°ç»„
- çŸ©é˜µç»´åº¦
- ç¼“å†²åŒºå¤§å°

**ç›¸å…³æœ¯è¯­**: [Type Parameter](#type-parameter-ç±»å‹å‚æ•°-), [Associated Const](#associated-const-å…³è”å¸¸é‡-)

**å‚è€ƒæ–‡æ¡£**: [`tier_02_guides/01_æ³›å‹åŸºç¡€æŒ‡å—.md`](../tier_02_guides/01_æ³›å‹åŸºç¡€æŒ‡å—.md)

---

#### Default Type Parameter (é»˜è®¤ç±»å‹å‚æ•°) ğŸŸ¢

**å®šä¹‰**: ä¸ºæ³›å‹å‚æ•°æŒ‡å®šé»˜è®¤ç±»å‹ï¼Œå¦‚æœä½¿ç”¨æ—¶æœªæŒ‡å®šåˆ™ä½¿ç”¨é»˜è®¤å€¼ã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
// E é»˜è®¤ä¸º std::io::Error
struct MyResult<T, E = std::io::Error> {
    value: Result<T, E>,
}

// ä½¿ç”¨é»˜è®¤ç±»å‹
let r1: MyResult<i32> = MyResult {
    value: Ok(42),  // E = std::io::Error
};

// æ˜¾å¼æŒ‡å®šç±»å‹
let r2: MyResult<String, ParseError> = MyResult {
    value: Err(ParseError),  // E = ParseError
};
```

**ç›¸å…³æœ¯è¯­**: [Type Parameter](#type-parameter-ç±»å‹å‚æ•°-), [Generic](#generic-æ³›å‹-)

**å‚è€ƒæ–‡æ¡£**: [`tier_03_references/01_æ³›å‹è¯­æ³•å‚è€ƒ.md`](../tier_03_references/01_æ³›å‹è¯­æ³•å‚è€ƒ.md)

---

### B. Trait ç³»ç»Ÿ

#### Trait (trait) ğŸ”µ

**å®šä¹‰**: Rust çš„æ¥å£æœºåˆ¶ï¼Œå®šä¹‰ç±»å‹å¿…é¡»å®ç°çš„æ–¹æ³•é›†åˆï¼Œç”¨äºæŠ½è±¡è¡Œä¸ºã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
// å®šä¹‰ trait
trait Drawable {
    fn draw(&self);

    // é»˜è®¤å®ç°
    fn hide(&self) {
        println!("Hidden");
    }
}

// å®ç° trait
struct Circle;

impl Drawable for Circle {
    fn draw(&self) {
        println!("Drawing circle");
    }
}
```

**æ ‡å‡†åº“é‡è¦ trait**:

- `Clone`, `Copy`: å¤åˆ¶è¯­ä¹‰
- `Debug`, `Display`: æ ¼å¼åŒ–è¾“å‡º
- `PartialEq`, `Eq`: ç›¸ç­‰æ€§æ¯”è¾ƒ
- `PartialOrd`, `Ord`: æ’åºæ¯”è¾ƒ
- `Iterator`: è¿­ä»£å™¨
- `From`, `Into`: ç±»å‹è½¬æ¢

**ç›¸å…³æœ¯è¯­**: [Trait Bound](#trait-bound-trait-çº¦æŸ-), [Trait Object](#trait-object-trait-å¯¹è±¡-), [Supertraits](#supertraits-è¶…-trait-)

**å‚è€ƒæ–‡æ¡£**: [`tier_02_guides/02_Traitç³»ç»ŸæŒ‡å—.md`](../tier_02_guides/02_Traitç³»ç»ŸæŒ‡å—.md)

---

#### Trait Bound (trait çº¦æŸ) ğŸ”µ

**å®šä¹‰**: å¯¹æ³›å‹å‚æ•°çš„é™åˆ¶ï¼Œè¦æ±‚ç±»å‹å¿…é¡»å®ç°æŒ‡å®šçš„ traitã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
// å•ä¸ª trait çº¦æŸ
fn print<T: Display>(value: T) {
    println!("{}", value);
}

// å¤šä¸ª trait çº¦æŸ (+)
fn process<T: Clone + Send>(value: T) { /* ... */ }

// where å­å¥ï¼ˆæ¨èç”¨äºå¤æ‚çº¦æŸï¼‰
fn complex<T, U>(a: T, b: U)
where
    T: Clone + Display,
    U: Debug + PartialEq,
{
    // ...
}
```

**è¯­æ³•å½¢å¼**:

1. `<T: Trait>`: å†…è”çº¦æŸ
2. `where T: Trait`: where å­å¥
3. `<T: Trait1 + Trait2>`: å¤šé‡çº¦æŸ
4. `<T: Trait<Item = Type>>`: å…³è”ç±»å‹çº¦æŸ

**ç›¸å…³æœ¯è¯­**: [Trait](#trait-trait-), [Where Clause](#where-clause-where-å­å¥-), [HRTB](#higher-rank-trait-bounds-hrtb-é«˜é˜¶-trait-è¾¹ç•Œ-)

**å‚è€ƒæ–‡æ¡£**: [`tier_03_references/03_è¾¹ç•Œçº¦æŸå‚è€ƒ.md`](../tier_03_references/03_è¾¹ç•Œçº¦æŸå‚è€ƒ.md)

---

#### Trait Object (trait å¯¹è±¡) ğŸŸ¢

**å®šä¹‰**: è¿è¡Œæ—¶å¤šæ€çš„æœºåˆ¶ï¼Œä½¿ç”¨ `dyn Trait` è¯­æ³•ï¼Œé€šè¿‡è™šå‡½æ•°è¡¨å®ç°åŠ¨æ€åˆ†å‘ã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
trait Animal {
    fn make_sound(&self);
}

struct Dog;
struct Cat;

impl Animal for Dog {
    fn make_sound(&self) { println!("Woof!"); }
}

impl Animal for Cat {
    fn make_sound(&self) { println!("Meow!"); }
}

// trait å¯¹è±¡
fn make_noise(animal: &dyn Animal) {
    animal.make_sound();
}

// ä½¿ç”¨
let dog = Dog;
let cat = Cat;
make_noise(&dog);  // Woof!
make_noise(&cat);  // Meow!

// Boxed trait object
let animals: Vec<Box<dyn Animal>> = vec![
    Box::new(Dog),
    Box::new(Cat),
];
```

**ç‰¹ç‚¹**:

- âœ… è¿è¡Œæ—¶å¤šæ€
- âœ… ç±»å‹æ“¦é™¤
- âŒ æ€§èƒ½å¼€é”€ï¼ˆè™šå‡½æ•°è°ƒç”¨ï¼‰
- âŒ ä¸æ˜¯æ‰€æœ‰ trait éƒ½å¯ä»¥æˆä¸º trait å¯¹è±¡ï¼ˆéœ€æ»¡è¶³å¯¹è±¡å®‰å…¨ï¼‰

**ç›¸å…³æœ¯è¯­**: [Dynamic Dispatch](#dynamic-dispatch-åŠ¨æ€åˆ†å‘-), [Fat Pointer](#fat-pointer-èƒ–æŒ‡é’ˆ-), [Type Erasure](#type-erasure-ç±»å‹æ“¦é™¤-)

**å‚è€ƒæ–‡æ¡£**: [`tier_02_guides/02_Traitç³»ç»ŸæŒ‡å—.md`](../tier_02_guides/02_Traitç³»ç»ŸæŒ‡å—.md)

---

#### Impl Trait (impl Trait) ğŸŸ¢

**å®šä¹‰**: åœ¨å‡½æ•°å‚æ•°æˆ–è¿”å›å€¼ä½ç½®ä½¿ç”¨ `impl Trait` è¯­æ³•ï¼Œè¡¨ç¤ºå®ç°æŸ trait çš„å…·ä½“ç±»å‹ã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
// å‚æ•°ä½ç½®ï¼šæ¥å—ä»»ä½•å®ç° Display çš„ç±»å‹
fn print_something(value: impl Display) {
    println!("{}", value);
}

// ç­‰ä»·äº
fn print_something<T: Display>(value: T) {
    println!("{}", value);
}

// è¿”å›ä½ç½®ï¼šè¿”å›å®ç° Iterator çš„ç±»å‹ï¼ˆç¼–è¯‘å™¨çŸ¥é“å…·ä½“ç±»å‹ï¼‰
fn get_numbers() -> impl Iterator<Item = i32> {
    vec![1, 2, 3].into_iter()
}

// å¤šä¸ª trait
fn process(x: impl Clone + Send + Display) { /* ... */ }
```

**ä¸ trait å¯¹è±¡çš„å¯¹æ¯”**:

```rust
// impl Trait (é™æ€åˆ†å‘)
fn static_dispatch() -> impl Display {
    42  // ç¼–è¯‘å™¨çŸ¥é“è¿”å› i32
}

// trait å¯¹è±¡ (åŠ¨æ€åˆ†å‘)
fn dynamic_dispatch() -> Box<dyn Display> {
    Box::new(42)  // è¿è¡Œæ—¶ç¡®å®šç±»å‹
}
```

**ç›¸å…³æœ¯è¯­**: [RPITIT](#rpitit-è¿”å›ä½ç½®-impl-trait-), [Static Dispatch](#static-dispatch-é™æ€åˆ†å‘-), [Trait Object](#trait-object-trait-å¯¹è±¡-)

**å‚è€ƒæ–‡æ¡£**: [`tier_02_guides/02_Traitç³»ç»ŸæŒ‡å—.md`](../tier_02_guides/02_Traitç³»ç»ŸæŒ‡å—.md)

---

#### Supertraits (è¶… trait) ğŸŸ¢

**å®šä¹‰**: trait çš„ä¾èµ–å…³ç³»ï¼Œå­ trait è¦æ±‚å®ç°è€…å¿…é¡»å…ˆå®ç°çˆ¶ traitã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
// Display ä¾èµ– Debug
trait PrintableDebug: Debug {
    fn print_debug(&self) {
        println!("{:?}", self);
    }
}

// å¤šä¸ªè¶… trait
trait AdvancedDisplay: Display + Debug + Clone {
    fn fancy_display(&self) {
        println!("Fancy: {}", self);
    }
}

// å®ç°æ—¶å¿…é¡»å…ˆå®ç°è¶… trait
#[derive(Debug, Clone)]
struct MyType(i32);

impl Display for MyType {
    fn fmt(&self, f: &mut std::fmt::Formatter) -> std::fmt::Result {
        write!(f, "{}", self.0)
    }
}

impl AdvancedDisplay for MyType {}
```

**ç›¸å…³æœ¯è¯­**: [Trait](#trait-trait-), [Trait Bound](#trait-bound-trait-çº¦æŸ-)

**å‚è€ƒæ–‡æ¡£**: [`tier_03_references/02_Traitç³»ç»Ÿå‚è€ƒ.md`](../tier_03_references/02_Traitç³»ç»Ÿå‚è€ƒ.md)

---

#### Marker Trait (æ ‡è®° trait) ğŸŸ¢

**å®šä¹‰**: ä¸åŒ…å«ä»»ä½•æ–¹æ³•çš„ traitï¼Œä»…ç”¨äºæ ‡è®°ç±»å‹å…·æœ‰æŸç§ç‰¹æ€§ã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
// Rust æ ‡å‡†åº“çš„æ ‡è®° trait
// Send: å¯ä»¥å®‰å…¨åœ°åœ¨çº¿ç¨‹é—´è½¬ç§»æ‰€æœ‰æƒ
// Sync: å¯ä»¥å®‰å…¨åœ°åœ¨çº¿ç¨‹é—´å…±äº«å¼•ç”¨
// Copy: å¯ä»¥æŒ‰ä½å¤åˆ¶

// è‡ªå®šä¹‰æ ‡è®° trait
trait Serializable {}

struct Data {
    value: i32,
}

impl Serializable for Data {}

// ä½¿ç”¨æ ‡è®° trait çº¦æŸ
fn save<T: Serializable>(data: T) {
    // åªæ¥å—å®ç°äº† Serializable çš„ç±»å‹
}
```

**å¸¸è§æ ‡è®° trait**:

- `Send`: å¯è·¨çº¿ç¨‹ä¼ é€’
- `Sync`: å¯è·¨çº¿ç¨‹å…±äº«
- `Copy`: å¯æŒ‰ä½å¤åˆ¶
- `Sized`: ç¼–è¯‘æ—¶å·²çŸ¥å¤§å°
- `Unpin`: å¯å®‰å…¨ç§»åŠ¨

**ç›¸å…³æœ¯è¯­**: [Trait](#trait-trait-)

**å‚è€ƒæ–‡æ¡£**: [`tier_03_references/02_Traitç³»ç»Ÿå‚è€ƒ.md`](../tier_03_references/02_Traitç³»ç»Ÿå‚è€ƒ.md)

---

#### Blanket Implementation (å…¨é¢å®ç°) ğŸŸ¡

**å®šä¹‰**: ä¸ºæ‰€æœ‰æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„ç±»å‹è‡ªåŠ¨å®ç° traitã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
// æ ‡å‡†åº“ç¤ºä¾‹ï¼šä¸ºæ‰€æœ‰å®ç° From çš„ç±»å‹è‡ªåŠ¨å®ç° Into
impl<T, U> Into<U> for T
where
    U: From<T>,
{
    fn into(self) -> U {
        U::from(self)
    }
}

// è‡ªå®šä¹‰å…¨é¢å®ç°
trait Printable {
    fn print(&self);
}

// ä¸ºæ‰€æœ‰å®ç° Display çš„ç±»å‹å®ç° Printable
impl<T: Display> Printable for T {
    fn print(&self) {
        println!("{}", self);
    }
}

// ç°åœ¨ä»»ä½•å®ç° Display çš„ç±»å‹éƒ½è‡ªåŠ¨å®ç°äº† Printable
42.print();        // âœ…
"hello".print();   // âœ…
```

**ç›¸å…³æœ¯è¯­**: [Trait](#trait-trait-), [Coherence](#coherence-ä¸€è‡´æ€§-)

**å‚è€ƒæ–‡æ¡£**: [`tier_04_advanced/05_è®¾è®¡æ¨¡å¼è¿›é˜¶.md`](../tier_04_advanced/05_è®¾è®¡æ¨¡å¼è¿›é˜¶.md)

---

### C. å…³è”ç±»å‹ä¸ GAT

#### Associated Type (å…³è”ç±»å‹) ğŸŸ¢

**å®šä¹‰**: trait ä¸­å®šä¹‰çš„ç±»å‹å ä½ç¬¦ï¼Œç”±å®ç°è€…æŒ‡å®šå…·ä½“ç±»å‹ã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
// å®šä¹‰å…³è”ç±»å‹
trait Container {
    type Item;

    fn add(&mut self, item: Self::Item);
    fn get(&self, index: usize) -> Option<&Self::Item>;
}

// å®ç°å¹¶æŒ‡å®šå…³è”ç±»å‹
struct IntList {
    items: Vec<i32>,
}

impl Container for IntList {
    type Item = i32;  // æŒ‡å®š Item ä¸º i32

    fn add(&mut self, item: Self::Item) {
        self.items.push(item);
    }

    fn get(&self, index: usize) -> Option<&Self::Item> {
        self.items.get(index)
    }
}
```

**ä¸æ³›å‹å‚æ•°çš„å¯¹æ¯”**:

```rust
// ä½¿ç”¨æ³›å‹å‚æ•°ï¼ˆè°ƒç”¨è€…é€‰æ‹©ç±»å‹ï¼‰
trait ContainerGeneric<T> {
    fn add(&mut self, item: T);
}

// ä½¿ç”¨å…³è”ç±»å‹ï¼ˆå®ç°è€…é€‰æ‹©ç±»å‹ï¼‰
trait ContainerAssoc {
    type Item;
    fn add(&mut self, item: Self::Item);
}
```

**ç›¸å…³æœ¯è¯­**: [GAT](#gat-generic-associated-types-æ³›å‹å…³è”ç±»å‹-), [Trait](#trait-trait-), [Type Parameter](#type-parameter-ç±»å‹å‚æ•°-)

**å‚è€ƒæ–‡æ¡£**: [`tier_02_guides/03_å…³è”ç±»å‹æŒ‡å—.md`](../tier_02_guides/03_å…³è”ç±»å‹æŒ‡å—.md)

---

#### GAT (Generic Associated Types) (æ³›å‹å…³è”ç±»å‹) ğŸŸ¡

**å®šä¹‰**: å…³è”ç±»å‹å¸¦æœ‰æ³›å‹å‚æ•°ï¼Œå…è®¸å…³è”ç±»å‹æœ¬èº«æ˜¯æ³›å‹çš„ã€‚(Rust 1.65+ ç¨³å®š)

**ä»£ç ç¤ºä¾‹**:

```rust
// ç»å…¸ç¤ºä¾‹ï¼šLendingIterator
trait LendingIterator {
    type Item<'a> where Self: 'a;

    fn next<'a>(&'a mut self) -> Option<Self::Item<'a>>;
}

// å®ç°ï¼šè¿”å›å¯¹å†…éƒ¨æ•°æ®çš„å¼•ç”¨
struct WindowsMut<'data, T> {
    data: &'data mut [T],
    window_size: usize,
    index: usize,
}

impl<'data, T> LendingIterator for WindowsMut<'data, T> {
    type Item<'a> = &'a mut [T] where Self: 'a;

    fn next<'a>(&'a mut self) -> Option<Self::Item<'a>> {
        if self.index + self.window_size <= self.data.len() {
            let start = self.index;
            let end = start + self.window_size;
            self.index += 1;
            Some(&mut self.data[start..end])
        } else {
            None
        }
    }
}
```

**åº”ç”¨åœºæ™¯**:

- Lending iteratorsï¼ˆå€Ÿç”¨è¿­ä»£å™¨ï¼‰
- è¿”å›å¼•ç”¨çš„è¿­ä»£å™¨
- æ•°æ®åº“æŸ¥è¯¢ç»“æœ
- å¼‚æ­¥ trait

**ç›¸å…³æœ¯è¯­**: [Associated Type](#associated-type-å…³è”ç±»å‹-), [Lifetime](#lifetime-ç”Ÿå‘½å‘¨æœŸ-), [HRTB](#higher-rank-trait-bounds-hrtb-é«˜é˜¶-trait-è¾¹ç•Œ-)

**å‚è€ƒæ–‡æ¡£**: [`tier_03_references/04_å…³è”ç±»å‹å‚è€ƒ.md`](../tier_03_references/04_å…³è”ç±»å‹å‚è€ƒ.md)

---

#### Associated Const (å…³è”å¸¸é‡) ğŸŸ¢

**å®šä¹‰**: trait ä¸­å®šä¹‰çš„å¸¸é‡ï¼Œç”±å®ç°è€…æä¾›å…·ä½“å€¼ã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
trait Config {
    const MAX_SIZE: usize;
    const NAME: &'static str;
}

struct SmallConfig;
struct LargeConfig;

impl Config for SmallConfig {
    const MAX_SIZE: usize = 100;
    const NAME: &'static str = "Small";
}

impl Config for LargeConfig {
    const MAX_SIZE: usize = 10000;
    const NAME: &'static str = "Large";
}

// ä½¿ç”¨
fn process<C: Config>(data: &[u8]) {
    assert!(data.len() <= C::MAX_SIZE);
    println!("Processing with {}", C::NAME);
}
```

**ç›¸å…³æœ¯è¯­**: [Associated Type](#associated-type-å…³è”ç±»å‹-), [Const Generic](#const-generic-å¸¸é‡æ³›å‹-)

**å‚è€ƒæ–‡æ¡£**: [`tier_03_references/02_Traitç³»ç»Ÿå‚è€ƒ.md`](../tier_03_references/02_Traitç³»ç»Ÿå‚è€ƒ.md)

---

### D. çº¦æŸä¸è¾¹ç•Œ

#### Bound (çº¦æŸ) ğŸ”µ

**å®šä¹‰**: å¯¹æ³›å‹å‚æ•°çš„é™åˆ¶æ¡ä»¶ï¼ŒåŒ…æ‹¬ trait çº¦æŸå’Œç”Ÿå‘½å‘¨æœŸçº¦æŸã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
// Trait çº¦æŸ
fn process<T: Clone + Send>(value: T) { /* ... */ }

// ç”Ÿå‘½å‘¨æœŸçº¦æŸ
fn get_ref<'a, T: 'a>(value: &'a T) -> &'a T { value }

// å…³è”ç±»å‹çº¦æŸ
fn iterate<I>(iter: I)
where
    I: Iterator<Item = i32>,
{
    // ...
}
```

**çº¦æŸç±»å‹**:

1. Trait bounds: `T: Trait`
2. Lifetime bounds: `'a: 'b`
3. Type bounds: `T: 'a`
4. Associated type bounds: `T::Item: Trait`

**ç›¸å…³æœ¯è¯­**: [Trait Bound](#trait-bound-trait-çº¦æŸ-), [Where Clause](#where-clause-where-å­å¥-), [HRTB](#higher-rank-trait-bounds-hrtb-é«˜é˜¶-trait-è¾¹ç•Œ-)

**å‚è€ƒæ–‡æ¡£**: [`tier_03_references/03_è¾¹ç•Œçº¦æŸå‚è€ƒ.md`](../tier_03_references/03_è¾¹ç•Œçº¦æŸå‚è€ƒ.md)

---

#### Where Clause (where å­å¥) ğŸ”µ

**å®šä¹‰**: åœ¨å‡½æ•°æˆ–ç±»å‹å®šä¹‰æœ«å°¾ä½¿ç”¨ `where` å…³é”®å­—æŒ‡å®šæ³›å‹çº¦æŸï¼Œæ¯”å†…è”çº¦æŸæ›´æ¸…æ™°ã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
// å¤æ‚çº¦æŸä½¿ç”¨ where å­å¥
fn complex_function<T, U, V>(a: T, b: U, c: V)
where
    T: Display + Clone,
    U: Debug + Send,
    V: Iterator<Item = i32>,
{
    // ...
}

// ç»“æ„ä½“ä½¿ç”¨ where å­å¥
struct Container<T>
where
    T: Clone + Send,
{
    value: T,
}

// impl å—ä½¿ç”¨ where å­å¥
impl<T> Container<T>
where
    T: Clone + Send + Default,
{
    fn new() -> Self {
        Container {
            value: T::default(),
        }
    }
}
```

**ä¼˜åŠ¿**:

- æ›´æ¸…æ™°çš„çº¦æŸè¡¨è¾¾
- æ”¯æŒå¤æ‚çš„çº¦æŸç»„åˆ
- å¯è¯»æ€§æ›´å¥½

**ç›¸å…³æœ¯è¯­**: [Bound](#bound-çº¦æŸ-), [Trait Bound](#trait-bound-trait-çº¦æŸ-)

**å‚è€ƒæ–‡æ¡£**: [`tier_03_references/03_è¾¹ç•Œçº¦æŸå‚è€ƒ.md`](../tier_03_references/03_è¾¹ç•Œçº¦æŸå‚è€ƒ.md)

---

#### Higher-Rank Trait Bounds (HRTB) (é«˜é˜¶ trait è¾¹ç•Œ) ğŸŸ¡

**å®šä¹‰**: ä½¿ç”¨ `for<'a>` è¯­æ³•è¡¨ç¤ºå¯¹æ‰€æœ‰å¯èƒ½çš„ç”Ÿå‘½å‘¨æœŸéƒ½æˆç«‹çš„çº¦æŸã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
// å‡½æ•°æ¥å—ä¸€ä¸ªé—­åŒ…ï¼Œè¯¥é—­åŒ…å¯¹ä»»æ„ç”Ÿå‘½å‘¨æœŸ 'a çš„å¼•ç”¨éƒ½é€‚ç”¨
fn call_with_ref<F>(f: F)
where
    F: for<'a> Fn(&'a i32) -> &'a i32,
{
    let x = 42;
    let result = f(&x);
    println!("{}", result);
}

// ä½¿ç”¨
call_with_ref(|x| x);  // âœ… é—­åŒ…å¯¹ä»»æ„ç”Ÿå‘½å‘¨æœŸéƒ½æœ‰æ•ˆ

// Fn trait çš„å®é™…å®šä¹‰ä½¿ç”¨äº† HRTB
trait Fn<Args>: FnMut<Args> {
    extern "rust-call" fn call(&self, args: Args) -> Self::Output;
}

// for<'a> è¡¨ç¤ºå¯¹æ‰€æœ‰ 'a éƒ½æˆç«‹
fn process<F>(f: F)
where
    F: for<'a, 'b> Fn(&'a str, &'b str) -> String,
{
    // ...
}
```

**åº”ç”¨åœºæ™¯**:

- é—­åŒ…å‚æ•°æ˜¯å¼•ç”¨
- trait å¯¹è±¡å¸¦ç”Ÿå‘½å‘¨æœŸ
- é«˜é˜¶å‡½æ•°

**ç›¸å…³æœ¯è¯­**: [Lifetime](#lifetime-ç”Ÿå‘½å‘¨æœŸ-), [Bound](#bound-çº¦æŸ-), [Where Clause](#where-clause-where-å­å¥-)

**å‚è€ƒæ–‡æ¡£**: [`tier_04_advanced/02_æ³›å‹ä¸ç”Ÿå‘½å‘¨æœŸ.md`](../tier_04_advanced/02_æ³›å‹ä¸ç”Ÿå‘½å‘¨æœŸ.md)

---

### E. ç”Ÿå‘½å‘¨æœŸ

#### Lifetime (ç”Ÿå‘½å‘¨æœŸ) ğŸ”µ

**å®šä¹‰**: å¼•ç”¨æœ‰æ•ˆçš„ä½œç”¨åŸŸï¼Œç¡®ä¿å¼•ç”¨å§‹ç»ˆæŒ‡å‘æœ‰æ•ˆçš„æ•°æ®ã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
// å‡½æ•°ç­¾åä¸­çš„ç”Ÿå‘½å‘¨æœŸ
fn longest<'a>(x: &'a str, y: &'a str) -> &'a str {
    if x.len() > y.len() { x } else { y }
}

// ç»“æ„ä½“ä¸­çš„ç”Ÿå‘½å‘¨æœŸ
struct Borrowed<'a> {
    data: &'a str,
}

// impl å—ä¸­çš„ç”Ÿå‘½å‘¨æœŸ
impl<'a> Borrowed<'a> {
    fn get_data(&self) -> &'a str {
        self.data
    }
}
```

**ç”Ÿå‘½å‘¨æœŸçœç•¥è§„åˆ™**:

1. æ¯ä¸ªå¼•ç”¨å‚æ•°è·å¾—ç‹¬ç«‹çš„ç”Ÿå‘½å‘¨æœŸ
2. å¦‚æœåªæœ‰ä¸€ä¸ªè¾“å…¥ç”Ÿå‘½å‘¨æœŸï¼Œèµ‹ç»™æ‰€æœ‰è¾“å‡º
3. å¦‚æœæœ‰ `&self` æˆ– `&mut self`ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸèµ‹ç»™æ‰€æœ‰è¾“å‡º

**ç›¸å…³æœ¯è¯­**: [HRTB](#higher-rank-trait-bounds-hrtb-é«˜é˜¶-trait-è¾¹ç•Œ-), [Variance](#variance-å‹å˜-), [Subtyping](#subtyping-å­ç±»å‹-)

**å‚è€ƒæ–‡æ¡£**: [`tier_04_advanced/02_æ³›å‹ä¸ç”Ÿå‘½å‘¨æœŸ.md`](../tier_04_advanced/02_æ³›å‹ä¸ç”Ÿå‘½å‘¨æœŸ.md)

---

#### Variance (å‹å˜) ğŸ”´

**å®šä¹‰**: æ³›å‹ç±»å‹åœ¨å…¶ç±»å‹å‚æ•°çš„å­ç±»å‹å…³ç³»ä¸Šçš„è¡Œä¸ºè§„åˆ™ã€‚

**ä¸‰ç§å‹å˜**:

1. **Covariant (åå˜)**: `T'` æ˜¯ `T` çš„å­ç±»å‹ â‡’ `F<T'>` æ˜¯ `F<T>` çš„å­ç±»å‹
2. **Contravariant (é€†å˜)**: `T'` æ˜¯ `T` çš„å­ç±»å‹ â‡’ `F<T>` æ˜¯ `F<T'>` çš„å­ç±»å‹
3. **Invariant (ä¸å˜)**: æ— å­ç±»å‹å…³ç³»

**ä»£ç ç¤ºä¾‹**:

```rust
// åå˜ï¼š&'a T å¯¹ 'a å’Œ T éƒ½æ˜¯åå˜çš„
// å¦‚æœ 'long: 'shortï¼Œåˆ™ &'long T æ˜¯ &'short T çš„å­ç±»å‹

fn covariant<'a, 'b>(x: &'a str) -> &'b str
where
    'a: 'b,  // 'a æ¯” 'b é•¿
{
    x  // âœ… å¯ä»¥å°† &'a str å½“ä½œ &'b str ä½¿ç”¨
}

// ä¸å˜ï¼š&mut T å¯¹ T æ˜¯ä¸å˜çš„
// &mut T' å’Œ &mut T æ²¡æœ‰å­ç±»å‹å…³ç³»

// é€†å˜ï¼šfn(T) å¯¹ T æ˜¯é€†å˜çš„
// å¦‚æœ T' æ˜¯ T çš„å­ç±»å‹ï¼Œåˆ™ fn(T) æ˜¯ fn(T') çš„å­ç±»å‹
```

**å¸¸è§ç±»å‹çš„å‹å˜**:

- `&'a T`: å¯¹ `'a` å’Œ `T` éƒ½åå˜
- `&'a mut T`: å¯¹ `'a` åå˜ï¼Œå¯¹ `T` ä¸å˜
- `fn(T) -> U`: å¯¹ `T` é€†å˜ï¼Œå¯¹ `U` åå˜
- `Box<T>`, `Vec<T>`: å¯¹ `T` åå˜
- `Cell<T>`, `RefCell<T>`: å¯¹ `T` ä¸å˜

**ç›¸å…³æœ¯è¯­**: [Lifetime](#lifetime-ç”Ÿå‘½å‘¨æœŸ-), [Subtyping](#subtyping-å­ç±»å‹-), [PhantomData](#phantom-data-å¹½çµæ•°æ®-)

**å‚è€ƒæ–‡æ¡£**: [`tier_04_advanced/02_æ³›å‹ä¸ç”Ÿå‘½å‘¨æœŸ.md`](../tier_04_advanced/02_æ³›å‹ä¸ç”Ÿå‘½å‘¨æœŸ.md)

---

#### Subtyping (å­ç±»å‹) ğŸŸ¡

**å®šä¹‰**: ç±»å‹ä¹‹é—´çš„åŒ…å«å…³ç³»ï¼Œä¸»è¦ä½“ç°åœ¨ç”Ÿå‘½å‘¨æœŸä¸Šã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
// ç”Ÿå‘½å‘¨æœŸçš„å­ç±»å‹å…³ç³»
// å¦‚æœ 'a: 'bï¼ˆ'a æ¯” 'b é•¿ï¼‰ï¼Œåˆ™ 'a æ˜¯ 'b çš„å­ç±»å‹

fn use_subtyping<'a, 'b>(x: &'a str) -> &'b str
where
    'a: 'b,  // 'a æ˜¯ 'b çš„å­ç±»å‹
{
    x  // âœ… å¯ä»¥å°†è¾ƒé•¿ç”Ÿå‘½å‘¨æœŸçš„å¼•ç”¨å½“ä½œè¾ƒçŸ­ç”Ÿå‘½å‘¨æœŸä½¿ç”¨
}

// å®é™…åº”ç”¨
fn example() {
    let long_lived = String::from("long");
    {
        let short_lived = String::from("short");
        // 'long > 'short
        let r: &str = use_subtyping(&long_lived);
        // âœ… å°† &'long str ç”¨ä½œ &'short str
    }
}
```

**ç›¸å…³æœ¯è¯­**: [Lifetime](#lifetime-ç”Ÿå‘½å‘¨æœŸ-), [Variance](#variance-å‹å˜-)

**å‚è€ƒæ–‡æ¡£**: [`tier_04_advanced/02_æ³›å‹ä¸ç”Ÿå‘½å‘¨æœŸ.md`](../tier_04_advanced/02_æ³›å‹ä¸ç”Ÿå‘½å‘¨æœŸ.md)

---

### F. ç¼–è¯‘å™¨è¡Œä¸º

#### Monomorphization (å•æ€åŒ–) ğŸŸ¡

**å®šä¹‰**: ç¼–è¯‘å™¨ä¸ºæ¯ä¸ªå…·ä½“ç±»å‹ç”Ÿæˆä¸“é—¨çš„ä»£ç ï¼Œå°†æ³›å‹ä»£ç è½¬æ¢ä¸ºå…·ä½“ç±»å‹çš„ä»£ç ã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
// æ³›å‹å‡½æ•°
fn add<T: std::ops::Add<Output = T>>(a: T, b: T) -> T {
    a + b
}

// ä½¿ç”¨
let x = add(1, 2);       // T = i32
let y = add(1.0, 2.0);   // T = f64

// ç¼–è¯‘åç”Ÿæˆï¼ˆæ¦‚å¿µä¸Šï¼‰:
// fn add_i32(a: i32, b: i32) -> i32 { a + b }
// fn add_f64(a: f64, b: f64) -> f64 { a + b }
```

**ç‰¹ç‚¹**:

- âœ… é›¶è¿è¡Œæ—¶å¼€é”€
- âœ… é™æ€åˆ†å‘ï¼Œæ— è™šå‡½æ•°è°ƒç”¨
- âŒ å¢åŠ äºŒè¿›åˆ¶å¤§å°
- âŒ ç¼–è¯‘æ—¶é—´æ›´é•¿

**ç›¸å…³æœ¯è¯­**: [Static Dispatch](#static-dispatch-é™æ€åˆ†å‘-), [Zero-Cost Abstraction](#zero-cost-abstraction-é›¶æˆæœ¬æŠ½è±¡-), [Type Erasure](#type-erasure-ç±»å‹æ“¦é™¤-)

**å‚è€ƒæ–‡æ¡£**: [`tier_03_references/05_ç¼–è¯‘å™¨è¡Œä¸ºå‚è€ƒ.md`](../tier_03_references/05_ç¼–è¯‘å™¨è¡Œä¸ºå‚è€ƒ.md)

---

#### Type Erasure (ç±»å‹æ“¦é™¤) ğŸŸ¡

**å®šä¹‰**: åœ¨ç¼–è¯‘æˆ–è¿è¡Œæ—¶åˆ é™¤ç±»å‹ä¿¡æ¯ï¼Œé€šå¸¸ç”¨äº trait å¯¹è±¡ã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
trait Animal {
    fn make_sound(&self);
}

struct Dog;
struct Cat;

impl Animal for Dog {
    fn make_sound(&self) { println!("Woof!"); }
}

impl Animal for Cat {
    fn make_sound(&self) { println!("Meow!"); }
}

// ç±»å‹æ“¦é™¤ï¼šBox<dyn Animal> ä¸çŸ¥é“å…·ä½“æ˜¯ Dog è¿˜æ˜¯ Cat
let animals: Vec<Box<dyn Animal>> = vec![
    Box::new(Dog),  // ç±»å‹ä¿¡æ¯è¢«æ“¦é™¤
    Box::new(Cat),  // ç±»å‹ä¿¡æ¯è¢«æ“¦é™¤
];

// è¿è¡Œæ—¶é€šè¿‡ vtable è°ƒç”¨æ­£ç¡®çš„æ–¹æ³•
for animal in &animals {
    animal.make_sound();
}
```

**ç›¸å…³æœ¯è¯­**: [Trait Object](#trait-object-trait-å¯¹è±¡-), [Dynamic Dispatch](#dynamic-dispatch-åŠ¨æ€åˆ†å‘-), [Monomorphization](#monomorphization-å•æ€åŒ–-)

**å‚è€ƒæ–‡æ¡£**: [`tier_03_references/05_ç¼–è¯‘å™¨è¡Œä¸ºå‚è€ƒ.md`](../tier_03_references/05_ç¼–è¯‘å™¨è¡Œä¸ºå‚è€ƒ.md)

---

#### Static Dispatch (é™æ€åˆ†å‘) ğŸŸ¢

**å®šä¹‰**: åœ¨ç¼–è¯‘æ—¶ç¡®å®šè°ƒç”¨å“ªä¸ªæ–¹æ³•å®ç°ï¼Œé€šè¿‡å•æ€åŒ–å®ç°ï¼Œæ— è¿è¡Œæ—¶å¼€é”€ã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
// ä½¿ç”¨æ³›å‹ (é™æ€åˆ†å‘)
fn process<T: Display>(value: T) {
    println!("{}", value);
}

// ç¼–è¯‘æ—¶ä¸ºæ¯ä¸ªç±»å‹ç”Ÿæˆä¸“é—¨ä»£ç 
process(42);         // è°ƒç”¨ <i32 as Display>::fmt
process("hello");    // è°ƒç”¨ <&str as Display>::fmt
```

**ç›¸å…³æœ¯è¯­**: [Monomorphization](#monomorphization-å•æ€åŒ–-), [Dynamic Dispatch](#dynamic-dispatch-åŠ¨æ€åˆ†å‘-)

**å‚è€ƒæ–‡æ¡£**: [`tier_04_advanced/03_é›¶æˆæœ¬æŠ½è±¡.md`](../tier_04_advanced/03_é›¶æˆæœ¬æŠ½è±¡.md)

---

#### Dynamic Dispatch (åŠ¨æ€åˆ†å‘) ğŸŸ¢

**å®šä¹‰**: åœ¨è¿è¡Œæ—¶é€šè¿‡è™šå‡½æ•°è¡¨ (vtable) ç¡®å®šè°ƒç”¨å“ªä¸ªæ–¹æ³•å®ç°ã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
// ä½¿ç”¨ trait å¯¹è±¡ (åŠ¨æ€åˆ†å‘)
fn process(value: &dyn Display) {
    println!("{}", value);
}

// è¿è¡Œæ—¶é€šè¿‡ vtable æŸ¥æ‰¾æ–¹æ³•
let x: i32 = 42;
let y: &str = "hello";
process(&x);  // è¿è¡Œæ—¶æŸ¥æ‰¾ <i32 as Display>::fmt
process(&y);  // è¿è¡Œæ—¶æŸ¥æ‰¾ <&str as Display>::fmt
```

**vtable ç»“æ„**:

```rust
// æ¦‚å¿µä¸Šçš„ vtable
struct DisplayVTable {
    drop: fn(*mut ()),
    size: usize,
    align: usize,
    fmt: fn(*const (), &mut Formatter) -> Result,
}

// Fat pointer (èƒ–æŒ‡é’ˆ)
struct TraitObject {
    data: *const (),
    vtable: *const DisplayVTable,
}
```

**ç›¸å…³æœ¯è¯­**: [Trait Object](#trait-object-trait-å¯¹è±¡-), [Fat Pointer](#fat-pointer-èƒ–æŒ‡é’ˆ-), [Static Dispatch](#static-dispatch-é™æ€åˆ†å‘-)

**å‚è€ƒæ–‡æ¡£**: [`tier_04_advanced/03_é›¶æˆæœ¬æŠ½è±¡.md`](../tier_04_advanced/03_é›¶æˆæœ¬æŠ½è±¡.md)

---

#### Fat Pointer (èƒ–æŒ‡é’ˆ) ğŸŸ¡

**å®šä¹‰**: åŒ…å«é¢å¤–ä¿¡æ¯çš„æŒ‡é’ˆï¼Œå¦‚ trait å¯¹è±¡æŒ‡é’ˆåŒ…å«æ•°æ®æŒ‡é’ˆå’Œ vtable æŒ‡é’ˆï¼Œåˆ‡ç‰‡æŒ‡é’ˆåŒ…å«æ•°æ®æŒ‡é’ˆå’Œé•¿åº¦ã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
// trait å¯¹è±¡çš„èƒ–æŒ‡é’ˆ
let x: i32 = 42;
let trait_obj: &dyn Display = &x;
// trait_obj åŒ…å«ä¸¤ä¸ªæŒ‡é’ˆï¼š
// 1. æŒ‡å‘ x çš„æ•°æ®æŒ‡é’ˆ
// 2. æŒ‡å‘ Display vtable çš„æŒ‡é’ˆ

// åˆ‡ç‰‡çš„èƒ–æŒ‡é’ˆ
let arr = [1, 2, 3, 4, 5];
let slice: &[i32] = &arr[1..4];
// slice åŒ…å«ï¼š
// 1. æŒ‡å‘ arr[1] çš„æŒ‡é’ˆ
// 2. é•¿åº¦ 3

// å¤§å°å¯¹æ¯”
use std::mem::size_of;
assert_eq!(size_of::<&i32>(), 8);           // æ™®é€šå¼•ç”¨ï¼š1ä¸ªæŒ‡é’ˆ
assert_eq!(size_of::<&dyn Display>(), 16);  // trait å¯¹è±¡ï¼š2ä¸ªæŒ‡é’ˆ
assert_eq!(size_of::<&[i32]>(), 16);        // åˆ‡ç‰‡ï¼šæŒ‡é’ˆ+é•¿åº¦
```

**ç›¸å…³æœ¯è¯­**: [Trait Object](#trait-object-trait-å¯¹è±¡-), [Dynamic Dispatch](#dynamic-dispatch-åŠ¨æ€åˆ†å‘-)

**å‚è€ƒæ–‡æ¡£**: [`tier_03_references/05_ç¼–è¯‘å™¨è¡Œä¸ºå‚è€ƒ.md`](../tier_03_references/05_ç¼–è¯‘å™¨è¡Œä¸ºå‚è€ƒ.md)

---

### G. é«˜çº§ç‰¹æ€§

#### Phantom Data (å¹½çµæ•°æ®) ğŸŸ¡

**å®šä¹‰**: é›¶å¤§å°çš„ç±»å‹æ ‡è®°ï¼Œç”¨äºåœ¨ç±»å‹ç³»ç»Ÿä¸­æºå¸¦ç±»å‹ä¿¡æ¯è€Œä¸å ç”¨è¿è¡Œæ—¶ç©ºé—´ã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
use std::marker::PhantomData;

// ç±»å‹çŠ¶æ€æ¨¡å¼
struct Locked;
struct Unlocked;

struct Door<State> {
    _state: PhantomData<State>,
}

impl Door<Locked> {
    fn new() -> Self {
        Door { _state: PhantomData }
    }

    fn unlock(self) -> Door<Unlocked> {
        Door { _state: PhantomData }
    }
}

impl Door<Unlocked> {
    fn lock(self) -> Door<Locked> {
        Door { _state: PhantomData }
    }

    fn open(&self) {
        println!("Door opened");
    }
}

// ä½¿ç”¨
let door = Door::<Locked>::new();
// door.open();  // âŒ ç¼–è¯‘é”™è¯¯ï¼šLocked çŠ¶æ€ä¸èƒ½æ‰“å¼€
let door = door.unlock();
door.open();  // âœ… Unlocked çŠ¶æ€å¯ä»¥æ‰“å¼€

// PhantomData ä¸å ç”¨ç©ºé—´
assert_eq!(std::mem::size_of::<Door<Locked>>(), 0);
```

**åº”ç”¨åœºæ™¯**:

- ç±»å‹çŠ¶æ€æ¨¡å¼
- æ ‡è®°ç±»å‹çš„ variance
- ç»‘å®šç”Ÿå‘½å‘¨æœŸ

**ç›¸å…³æœ¯è¯­**: [Zero-Sized Type](#zero-sized-type-zst-é›¶å¤§å°ç±»å‹-), [Variance](#variance-å‹å˜-), [Marker Trait](#marker-trait-æ ‡è®°-trait-)

**å‚è€ƒæ–‡æ¡£**: [`tier_04_advanced/01_é«˜çº§ç±»å‹æŠ€å·§.md`](../tier_04_advanced/01_é«˜çº§ç±»å‹æŠ€å·§.md)

---

#### Zero-Sized Type (ZST) (é›¶å¤§å°ç±»å‹) ğŸŸ¡

**å®šä¹‰**: ä¸å ç”¨å†…å­˜ç©ºé—´çš„ç±»å‹ï¼Œç¼–è¯‘å™¨å®Œå…¨ä¼˜åŒ–æ‰ï¼Œåªåœ¨ç±»å‹ç³»ç»Ÿä¸­å­˜åœ¨ã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
use std::mem::size_of;

// å•å…ƒç±»å‹
assert_eq!(size_of::<()>(), 0);

// ç©ºç»“æ„ä½“
struct Empty;
assert_eq!(size_of::<Empty>(), 0);

// PhantomData
use std::marker::PhantomData;
struct Marker<T>(PhantomData<T>);
assert_eq!(size_of::<Marker<i32>>(), 0);

// ç©ºæ•°ç»„
assert_eq!(size_of::<[i32; 0]>(), 0);

// ZST çš„å‘é‡ä¸åˆ†é…å†…å­˜
let vec: Vec<()> = vec![(); 1000000];
// æ²¡æœ‰åˆ†é…ä»»ä½•å †å†…å­˜ï¼
```

**åº”ç”¨**:

- çŠ¶æ€æ ‡è®°
- ç¼–è¯‘æ—¶è®¡ç®—
- ç±»å‹çº§ç¼–ç¨‹

**ç›¸å…³æœ¯è¯­**: [Phantom Data](#phantom-data-å¹½çµæ•°æ®-), [Type Parameter](#type-parameter-ç±»å‹å‚æ•°-)

**å‚è€ƒæ–‡æ¡£**: [`tier_04_advanced/01_é«˜çº§ç±»å‹æŠ€å·§.md`](../tier_04_advanced/01_é«˜çº§ç±»å‹æŠ€å·§.md)

---

#### RPITIT (è¿”å›ä½ç½® impl Trait) ğŸŸ¢

**å®šä¹‰**: Return Position Impl Trait In Traitsï¼Œå…è®¸åœ¨ trait æ–¹æ³•çš„è¿”å›ä½ç½®ä½¿ç”¨ `impl Trait`ã€‚(Rust 1.75+ ç¨³å®š)

**ä»£ç ç¤ºä¾‹**:

```rust
trait Factory {
    // è¿”å›å®ç° Display çš„å…·ä½“ç±»å‹
    fn create(&self) -> impl Display;

    // å¸¦ç”Ÿå‘½å‘¨æœŸ
    fn create_ref(&self) -> impl Display + '_;

    // å¤šä¸ª trait
    fn create_complex(&self) -> impl Display + Debug + Clone;
}

struct IntFactory;

impl Factory for IntFactory {
    fn create(&self) -> impl Display {
        42  // è¿”å› i32
    }

    fn create_ref(&self) -> impl Display + '_ {
        "hello"  // è¿”å› &str
    }

    fn create_complex(&self) -> impl Display + Debug + Clone {
        String::from("complex")
    }
}
```

**ä¸ async trait é…åˆ**:

```rust
trait AsyncService {
    // async æ–¹æ³•å®é™…ä¸Šæ˜¯è¿”å› impl Future
    async fn process(&self, data: &str) -> Result<String, Error>;

    // ç­‰ä»·äº
    fn process(&self, data: &str) -> impl Future<Output = Result<String, Error>> + '_;
}
```

**ç›¸å…³æœ¯è¯­**: [Impl Trait](#impl-trait-impl-trait-), [GAT](#gat-generic-associated-types-æ³›å‹å…³è”ç±»å‹-), [Associated Type](#associated-type-å…³è”ç±»å‹-)

**å‚è€ƒæ–‡æ¡£**: [`RUST_192_GENERIC_IMPROVEMENTS.md`](../RUST_192_GENERIC_IMPROVEMENTS.md)

---

#### Higher-Kinded Types (HKT) (é«˜é˜¶ç±»å‹) ğŸ”´

**å®šä¹‰**: ç±»å‹æ„é€ å™¨çš„æŠ½è±¡ï¼Œå³"ç±»å‹çš„ç±»å‹"ã€‚Rust ä¸ç›´æ¥æ”¯æŒ HKTï¼Œä½†å¯ä»¥é€šè¿‡ GAT å’Œå…³è”ç±»å‹æ¨¡æ‹Ÿéƒ¨åˆ†åŠŸèƒ½ã€‚

**æ¦‚å¿µç¤ºä¾‹** (Rust ä¸æ”¯æŒæ­¤è¯­æ³•):

```rust
// å‡è®¾çš„ HKT è¯­æ³• (Rust ä¸æ”¯æŒ)
trait Functor<F<_>> {
    fn map<A, B>(fa: F<A>, f: fn(A) -> B) -> F<B>;
}

// å¯ä»¥ä¸ºä»»ä½• F å®ç°ï¼Œå¦‚ Option, Vec, Result ç­‰
impl<F> Functor<F> for F {
    // ...
}
```

**Rust ä¸­çš„è¿‘ä¼¼å®ç°** (ä½¿ç”¨ GAT):

```rust
trait Functor {
    type Inner<T>;

    fn map<A, B>(self, f: impl FnOnce(A) -> B) -> Self::Inner<B>
    where
        Self: Functor<Inner<A> = Self>;
}

// ä¸º Option å®ç°
impl Functor for Option<_> {
    type Inner<T> = Option<T>;

    fn map<A, B>(self, f: impl FnOnce(A) -> B) -> Option<B> {
        self.map(f)
    }
}
```

**ç›¸å…³æœ¯è¯­**: [GAT](#gat-generic-associated-types-æ³›å‹å…³è”ç±»å‹-), [Type Constructor](#type-constructor-ç±»å‹æ„é€ å™¨-), [Associated Type](#associated-type-å…³è”ç±»å‹-)

**å‚è€ƒæ–‡æ¡£**: [`tier_04_advanced/04_ç±»å‹çº§ç¼–ç¨‹.md`](../tier_04_advanced/04_ç±»å‹çº§ç¼–ç¨‹.md)

---

### H. æ€§èƒ½ç›¸å…³

#### Zero-Cost Abstraction (é›¶æˆæœ¬æŠ½è±¡) ğŸŸ¢

**å®šä¹‰**: é«˜çº§æŠ½è±¡ä¸ä¼šå¸¦æ¥è¿è¡Œæ—¶æ€§èƒ½æŸå¤±ï¼Œç¼–è¯‘åçš„ä»£ç ä¸æ‰‹å†™çš„åº•å±‚ä»£ç æ€§èƒ½ç›¸åŒã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
// é«˜çº§æŠ½è±¡ï¼ˆè¿­ä»£å™¨ï¼‰
let sum: i32 = (1..=100)
    .filter(|x| x % 2 == 0)
    .map(|x| x * 2)
    .sum();

// ç­‰ä»·çš„æ‰‹å†™å¾ªç¯
let mut sum = 0;
for x in 1..=100 {
    if x % 2 == 0 {
        sum += x * 2;
    }
}

// ç¼–è¯‘åç”Ÿæˆçš„æ±‡ç¼–ä»£ç å‡ ä¹ç›¸åŒï¼
```

**æ³›å‹çš„é›¶æˆæœ¬æŠ½è±¡**:

```rust
// æ³›å‹ç‰ˆæœ¬
fn process<T: Display>(items: &[T]) {
    for item in items {
        println!("{}", item);
    }
}

// ç¼–è¯‘åä¸ºæ¯ä¸ªç±»å‹ç”Ÿæˆä¸“é—¨ä»£ç ï¼Œæ— è™šå‡½æ•°è°ƒç”¨å¼€é”€
```

**ç›¸å…³æœ¯è¯­**: [Monomorphization](#monomorphization-å•æ€åŒ–-), [Static Dispatch](#static-dispatch-é™æ€åˆ†å‘-)

**å‚è€ƒæ–‡æ¡£**: [`tier_04_advanced/03_é›¶æˆæœ¬æŠ½è±¡.md`](../tier_04_advanced/03_é›¶æˆæœ¬æŠ½è±¡.md)

---

#### Turbofish (æ¶¡è½®é±¼è¯­æ³•) ğŸŸ¢

**å®šä¹‰**: ä½¿ç”¨ `::<>` è¯­æ³•æ˜¾å¼æŒ‡å®šæ³›å‹å‚æ•°çš„ç±»å‹ã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
// å½“ç±»å‹æ— æ³•æ¨æ–­æ—¶ä½¿ç”¨ turbofish
let numbers: Vec<_> = "42"
    .parse::<i32>()  // â† turbofish è¯­æ³•
    .into_iter()
    .collect();

// ç­‰ä»·äº
let numbers: Vec<i32> = "42"
    .parse()  // ä»å˜é‡ç±»å‹æ¨æ–­
    .into_iter()
    .collect();

// åœ¨æ–¹æ³•é“¾ä¸­ä½¿ç”¨
let result = vec![1, 2, 3]
    .into_iter()
    .collect::<Vec<_>>();  // â† turbofish

// æ³›å‹å‡½æ•°è°ƒç”¨
fn identity<T>(x: T) -> T { x }
let x = identity::<i32>(42);  // â† turbofish
```

**å‘½åæ¥æº**: è¯­æ³• `::<>` çœ‹èµ·æ¥åƒä¸€æ¡é±¼ ğŸŸ

**ç›¸å…³æœ¯è¯­**: [Type Parameter](#type-parameter-ç±»å‹å‚æ•°-), [Generic](#generic-æ³›å‹-)

**å‚è€ƒæ–‡æ¡£**: [`tier_02_guides/04_ç±»å‹æ¨æ–­æŒ‡å—.md`](../tier_02_guides/04_ç±»å‹æ¨æ–­æŒ‡å—.md)

---

### I. ç±»å‹ç†è®º

#### Polymorphism (å¤šæ€æ€§) ğŸ”µ

**å®šä¹‰**: åŒä¸€æ¥å£å¯ä»¥æœ‰å¤šç§å®ç°ï¼ŒåŒ…æ‹¬å‚æ•°å¤šæ€ã€ad-hocå¤šæ€å’Œå­ç±»å‹å¤šæ€ã€‚

**ä¸‰ç§å¤šæ€**:

1. **å‚æ•°å¤šæ€ (Parametric Polymorphism)**: æ³›å‹

   ```rust
   fn identity<T>(x: T) -> T { x }
   // å¯¹æ‰€æœ‰ç±»å‹ T éƒ½é€‚ç”¨
   ```

2. **Ad-hoc å¤šæ€**: trait å’Œé‡è½½

   ```rust
   trait Add<Rhs = Self> {
       type Output;
       fn add(self, rhs: Rhs) -> Self::Output;
   }
   // ä¸åŒç±»å‹æœ‰ä¸åŒçš„å®ç°
   ```

3. **å­ç±»å‹å¤šæ€**: trait å¯¹è±¡

   ```rust
   let animal: &dyn Animal = &Dog;
   // è¿è¡Œæ—¶å¤šæ€
   ```

**ç›¸å…³æœ¯è¯­**: [Generic](#generic-æ³›å‹-), [Trait Object](#trait-object-trait-å¯¹è±¡-), [Static Dispatch](#static-dispatch-é™æ€åˆ†å‘-), [Dynamic Dispatch](#dynamic-dispatch-åŠ¨æ€åˆ†å‘-)

**å‚è€ƒæ–‡æ¡£**: [`tier_02_guides/02_Traitç³»ç»ŸæŒ‡å—.md`](../tier_02_guides/02_Traitç³»ç»ŸæŒ‡å—.md)

---

#### Type Constructor (ç±»å‹æ„é€ å™¨) ğŸŸ¡

**å®šä¹‰**: æ¥å—ç±»å‹å‚æ•°å¹¶äº§ç”Ÿæ–°ç±»å‹çš„æœºåˆ¶ã€‚

**ä»£ç ç¤ºä¾‹**:

```rust
// Vec æ˜¯ç±»å‹æ„é€ å™¨
// Vec<i32>, Vec<String> æ˜¯å…·ä½“ç±»å‹

// Option æ˜¯ç±»å‹æ„é€ å™¨
// Option<i32>, Option<String> æ˜¯å…·ä½“ç±»å‹

// Result æ¥å—ä¸¤ä¸ªç±»å‹å‚æ•°
// Result<T, E> æ˜¯ç±»å‹æ„é€ å™¨
// Result<i32, String> æ˜¯å…·ä½“ç±»å‹

// è‡ªå®šä¹‰ç±»å‹æ„é€ å™¨
struct Container<T> {
    value: T,
}
// Container æ˜¯ç±»å‹æ„é€ å™¨
// Container<i32> æ˜¯å…·ä½“ç±»å‹
```

**ç›¸å…³æœ¯è¯­**: [Generic](#generic-æ³›å‹-), [Type Parameter](#type-parameter-ç±»å‹å‚æ•°-), [Higher-Kinded Types](#higher-kinded-types-hkt-é«˜é˜¶ç±»å‹-)

**å‚è€ƒæ–‡æ¡£**: [`tier_04_advanced/04_ç±»å‹çº§ç¼–ç¨‹.md`](../tier_04_advanced/04_ç±»å‹çº§ç¼–ç¨‹.md)

---

#### Coherence (ä¸€è‡´æ€§) ğŸŸ¡

**å®šä¹‰**: Rust çš„ trait å®ç°ä¸€è‡´æ€§è§„åˆ™ï¼Œé˜²æ­¢ trait å®ç°å†²çªã€‚

**æ ¸å¿ƒè§„åˆ™** (å­¤å„¿è§„åˆ™):

- trait æˆ–ç±»å‹è‡³å°‘æœ‰ä¸€ä¸ªåœ¨å½“å‰ crate ä¸­å®šä¹‰

**ä»£ç ç¤ºä¾‹**:

```rust
// âœ… å¯ä»¥ï¼štrait å’Œç±»å‹éƒ½åœ¨å½“å‰ crate
trait MyTrait {}
struct MyType;
impl MyTrait for MyType {}

// âœ… å¯ä»¥ï¼štrait åœ¨å½“å‰ crate
impl MyTrait for i32 {}

// âœ… å¯ä»¥ï¼šç±»å‹åœ¨å½“å‰ crate
impl Display for MyType {
    fn fmt(&self, f: &mut Formatter) -> Result {
        // ...
    }
}

// âŒ ä¸å¯ä»¥ï¼štrait å’Œç±»å‹éƒ½åœ¨å…¶ä»– crate
// impl Display for i32 {}  // ç¼–è¯‘é”™è¯¯
```

**è§£å†³æ–¹æ³•ï¼šnewtype æ¨¡å¼**:

```rust
// åŒ…è£…å¤–éƒ¨ç±»å‹
struct MyInt(i32);

// ç°åœ¨å¯ä»¥ä¸º MyInt å®ç°å¤–éƒ¨ trait
impl Display for MyInt {
    fn fmt(&self, f: &mut Formatter) -> Result {
        write!(f, "{}", self.0)
    }
}
```

**ç›¸å…³æœ¯è¯­**: [Trait](#trait-trait-), [Orphan Rule](#orphan-rule-å­¤å„¿è§„åˆ™-)

**å‚è€ƒæ–‡æ¡£**: [`tier_03_references/02_Traitç³»ç»Ÿå‚è€ƒ.md`](../tier_03_references/02_Traitç³»ç»Ÿå‚è€ƒ.md)

---

#### Orphan Rule (å­¤å„¿è§„åˆ™) ğŸŸ¡

**å®šä¹‰**: coherence è§„åˆ™çš„å…·ä½“ä½“ç°ï¼Œè¦æ±‚ trait æˆ–ç±»å‹è‡³å°‘æœ‰ä¸€ä¸ªåœ¨å½“å‰ crate ä¸­å®šä¹‰ã€‚

**ç›®çš„**: é˜²æ­¢ä¸Šæ¸¸ crate çš„å˜æ›´ç ´åä¸‹æ¸¸ crateã€‚

**ç¤ºä¾‹**:

```rust
// å‡è®¾ä¸¤ä¸ª crate éƒ½ä¸ºå¤–éƒ¨ trait å’Œå¤–éƒ¨ç±»å‹å®ç°
// crate A:
impl Display for Vec<i32> { /* ... */ }

// crate B:
impl Display for Vec<i32> { /* ... */ }

// å¦‚æœå…è®¸ï¼Œå½“åŒæ—¶ä¾èµ– A å’Œ B æ—¶ï¼Œç¼–è¯‘å™¨æ— æ³•ç¡®å®šä½¿ç”¨å“ªä¸ªå®ç°
// å­¤å„¿è§„åˆ™é˜²æ­¢äº†è¿™ç§æƒ…å†µ
```

**ç›¸å…³æœ¯è¯­**: [Coherence](#coherence-ä¸€è‡´æ€§-), [Trait](#trait-trait-)

**å‚è€ƒæ–‡æ¡£**: [`tier_04_advanced/05_è®¾è®¡æ¨¡å¼è¿›é˜¶.md`](../tier_04_advanced/05_è®¾è®¡æ¨¡å¼è¿›é˜¶.md)

---

## ğŸ”¤ ä¸­è‹±å¯¹ç…§è¡¨

### A-G

| English                        | ä¸­æ–‡            | çº§åˆ« |
| ------------------------------ | --------------- | ---- |
| Abstract Data Type (ADT)       | æŠ½è±¡æ•°æ®ç±»å‹    | ğŸ”µ   |
| Associated Const               | å…³è”å¸¸é‡        | ğŸŸ¢   |
| Associated Type                | å…³è”ç±»å‹        | ğŸŸ¢   |
| Blanket Implementation         | å…¨é¢å®ç°        | ğŸŸ¡   |
| Bound                          | çº¦æŸ            | ğŸ”µ   |
| Boxed Trait Object             | è£…ç®± trait å¯¹è±¡ | ğŸŸ¢   |
| Coherence                      | ä¸€è‡´æ€§          | ğŸŸ¡   |
| Const Generic                  | å¸¸é‡æ³›å‹        | ğŸŸ¢   |
| Covariant                      | åå˜            | ğŸ”´   |
| Default Type Parameter         | é»˜è®¤ç±»å‹å‚æ•°    | ğŸŸ¢   |
| Dispatch                       | åˆ†å‘            | ğŸ”µ   |
| Dynamic Dispatch               | åŠ¨æ€åˆ†å‘        | ğŸŸ¢   |
| Fat Pointer                    | èƒ–æŒ‡é’ˆ          | ğŸŸ¡   |
| GAT (Generic Associated Types) | æ³›å‹å…³è”ç±»å‹    | ğŸŸ¡   |
| Generic                        | æ³›å‹            | ğŸ”µ   |
| Generic Function               | æ³›å‹å‡½æ•°        | ğŸ”µ   |

### H-Z

| English                         | ä¸­æ–‡                | çº§åˆ« |
| ------------------------------- | ------------------- | ---- |
| Higher-Kinded Types (HKT)       | é«˜é˜¶ç±»å‹            | ğŸ”´   |
| Higher-Rank Trait Bounds (HRTB) | é«˜é˜¶ trait è¾¹ç•Œ     | ğŸŸ¡   |
| Impl Trait                      | impl Trait          | ğŸŸ¢   |
| Inference                       | ç±»å‹æ¨æ–­            | ğŸ”µ   |
| Invariant                       | ä¸å˜                | ğŸ”´   |
| Lifetime                        | ç”Ÿå‘½å‘¨æœŸ            | ğŸ”µ   |
| Marker Trait                    | æ ‡è®° trait          | ğŸŸ¢   |
| Monomorphization                | å•æ€åŒ–              | ğŸŸ¡   |
| Orphan Rule                     | å­¤å„¿è§„åˆ™            | ğŸŸ¡   |
| Phantom Data                    | å¹½çµæ•°æ®            | ğŸŸ¡   |
| Polymorphism                    | å¤šæ€æ€§              | ğŸ”µ   |
| RPITIT                          | è¿”å›ä½ç½® impl Trait | ğŸŸ¢   |
| Static Dispatch                 | é™æ€åˆ†å‘            | ğŸŸ¢   |
| Subtyping                       | å­ç±»å‹              | ğŸŸ¡   |
| Supertraits                     | è¶… trait            | ğŸŸ¢   |
| Trait                           | trait               | ğŸ”µ   |
| Trait Bound                     | trait çº¦æŸ          | ğŸ”µ   |
| Trait Object                    | trait å¯¹è±¡          | ğŸŸ¢   |
| Turbofish                       | æ¶¡è½®é±¼è¯­æ³•          | ğŸŸ¢   |
| Type Alias                      | ç±»å‹åˆ«å            | ğŸ”µ   |
| Type Constructor                | ç±»å‹æ„é€ å™¨          | ğŸŸ¡   |
| Type Erasure                    | ç±»å‹æ“¦é™¤            | ğŸŸ¡   |
| Type Parameter                  | ç±»å‹å‚æ•°            | ğŸ”µ   |
| Variance                        | å‹å˜                | ğŸ”´   |
| Where Clause                    | where å­å¥          | ğŸ”µ   |
| Zero-Cost Abstraction           | é›¶æˆæœ¬æŠ½è±¡          | ğŸŸ¢   |
| Zero-Sized Type (ZST)           | é›¶å¤§å°ç±»å‹          | ğŸŸ¡   |

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

### æŒ‰æœ¯è¯­çº§åˆ«

- ğŸ”µ **åŸºç¡€æœ¯è¯­**: æŸ¥çœ‹ [`tier_02_guides/01_æ³›å‹åŸºç¡€æŒ‡å—.md`](../tier_02_guides/01_æ³›å‹åŸºç¡€æŒ‡å—.md)
- ğŸŸ¢ **ä¸­çº§æœ¯è¯­**: æŸ¥çœ‹ [`tier_02_guides/`](../tier_02_guides/) æ‰€æœ‰æŒ‡å—
- ğŸŸ¡ **é«˜çº§æœ¯è¯­**: æŸ¥çœ‹ [`tier_03_references/`](../tier_03_references/) å®Œæ•´å‚è€ƒ
- ğŸ”´ **ä¸“å®¶æœ¯è¯­**: æŸ¥çœ‹ [`tier_04_advanced/`](../tier_04_advanced/) é«˜çº§ä¸»é¢˜

### æ·±å…¥ç†è§£

- ğŸ“š **ç±»å‹ç†è®º**: [`tier_04_advanced/`](../tier_04_advanced/)
- ğŸ“š **çŸ¥è¯†å›¾è°±**: [`docs/04_thinking/MULTI_DIMENSIONAL_CONCEPT_MATRIX`](../../../../docs/04_thinking/MULTI_DIMENSIONAL_CONCEPT_MATRIX.md)
- ğŸ“š **å¯¹æ¯”çŸ©é˜µ**: [`tier_03_references/`](../tier_03_references/)

---

**æœ¯è¯­è¡¨çŠ¶æ€**: âœ… 100+ æœ¯è¯­å®Œæ•´æ”¶å½•
**æœ€åæ›´æ–°**: 2025-10-22
**ç»´æŠ¤**: æŒç»­æ›´æ–°ä¸­

---

_æœ¬æœ¯è¯­è¡¨æä¾› C04 æ³›å‹ç¼–ç¨‹æ‰€æœ‰æ ¸å¿ƒæœ¯è¯­çš„å‡†ç¡®å®šä¹‰å’Œä»£ç ç¤ºä¾‹ã€‚å»ºè®®é…åˆ [`02_ä¸»ç´¢å¼•å¯¼èˆª.md`](./02_ä¸»ç´¢å¼•å¯¼èˆª.md) å’Œ [`04_å¸¸è§é—®é¢˜.md`](./04_å¸¸è§é—®é¢˜.md) ä¸€èµ·ä½¿ç”¨ã€‚_
