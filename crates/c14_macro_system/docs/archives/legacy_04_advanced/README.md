# 04_advanced - å®ç³»ç»Ÿé«˜çº§ä¸»é¢˜

> **ç›®å½•å®šä½**: C14å®ç³»ç»Ÿé«˜çº§ä¸»é¢˜ä¸æ·±åº¦æ¢è®¨  
> **é€‚ç”¨äººç¾¤**: æœ‰å®åŸºç¡€çš„å¼€å‘è€…ã€åº“ä½œè€…ã€DSLè®¾è®¡è€…  
> **ç›¸å…³æ–‡æ¡£**: [ä¸»ç´¢å¼•](../00_MASTER_INDEX.md) | [è¿‡ç¨‹å®](../03_procedural/)

**æœ€åæ›´æ–°**: 2025-10-20  
**æ–‡æ¡£ç±»å‹**: ğŸ”¬ é«˜çº§æ–‡æ¡£

---

## ğŸ“‹ ç›®å½•

- [04\_advanced - å®ç³»ç»Ÿé«˜çº§ä¸»é¢˜](#04_advanced---å®ç³»ç»Ÿé«˜çº§ä¸»é¢˜)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [ğŸ“š é«˜çº§ä¸»é¢˜åˆ—è¡¨](#-é«˜çº§ä¸»é¢˜åˆ—è¡¨)
    - [ğŸ¨ å®å…ƒç¼–ç¨‹æ·±åº¦è§£æ](#-å®å…ƒç¼–ç¨‹æ·±åº¦è§£æ)
    - [ğŸ—ï¸ DSLæ„å»ºå®æˆ˜](#ï¸-dslæ„å»ºå®æˆ˜)
    - [âš¡ å®æ€§èƒ½ä¼˜åŒ–](#-å®æ€§èƒ½ä¼˜åŒ–)
    - [ğŸ” å®è°ƒè¯•æŠ€æœ¯](#-å®è°ƒè¯•æŠ€æœ¯)
    - [ğŸ§ª å®æµ‹è¯•ç­–ç•¥](#-å®æµ‹è¯•ç­–ç•¥)
    - [ğŸš€ ä»£ç ç”Ÿæˆæ¨¡å¼](#-ä»£ç ç”Ÿæˆæ¨¡å¼)
  - [ğŸ¯ å­¦ä¹ è·¯å¾„](#-å­¦ä¹ è·¯å¾„)
    - [è·¯å¾„ä¸€ï¼šDSLè®¾è®¡è€…](#è·¯å¾„ä¸€dslè®¾è®¡è€…)
    - [è·¯å¾„äºŒï¼šåº“ä½œè€…](#è·¯å¾„äºŒåº“ä½œè€…)
    - [è·¯å¾„ä¸‰ï¼šæ€§èƒ½ä¸“å®¶](#è·¯å¾„ä¸‰æ€§èƒ½ä¸“å®¶)
  - [ğŸ“– æ¨èé˜…è¯»é¡ºåº](#-æ¨èé˜…è¯»é¡ºåº)
  - [ğŸ”— ç›¸å…³èµ„æº](#-ç›¸å…³èµ„æº)
    - [å‰ç½®çŸ¥è¯†](#å‰ç½®çŸ¥è¯†)
    - [å®æˆ˜èµ„æº](#å®æˆ˜èµ„æº)
    - [å·¥å…·é“¾](#å·¥å…·é“¾)
    - [ç¤¾åŒºèµ„æº](#ç¤¾åŒºèµ„æº)
  - [è¿”å›å¯¼èˆª](#è¿”å›å¯¼èˆª)

---

## ğŸ“š é«˜çº§ä¸»é¢˜åˆ—è¡¨

### ğŸ¨ å®å…ƒç¼–ç¨‹æ·±åº¦è§£æ

æ·±å…¥æ¢è®¨Rustå®çš„å…ƒç¼–ç¨‹èƒ½åŠ›ï¼š

- **[å®å…ƒç¼–ç¨‹](./macro_metaprogramming.md)** â­ æ–°å¢å®Œæ•´
  - TokenStreamå†…éƒ¨æœºåˆ¶
  - ASTæ“ä½œä¸è½¬æ¢
  - ç¼–è¯‘æ—¶è®¡ç®—
  - ç±»å‹çº§ç¼–ç¨‹
  - å®ç»„åˆæ¨¡å¼
  - é«˜çº§è¯­æ³•æ“ä½œ

**é¢„è®¡æ—¶é—´**: 6å°æ—¶  
**éš¾åº¦**: â­â­â­â­â­

---

### ğŸ—ï¸ DSLæ„å»ºå®æˆ˜

ä»é›¶æ„å»ºé¢†åŸŸç‰¹å®šè¯­è¨€ï¼š

- **[DSLæ„å»ºæŒ‡å—](./dsl_construction.md)** â­ æ–°å¢å®Œæ•´
  - DSLè®¾è®¡åŸåˆ™
  - è¯­æ³•è®¾è®¡
  - è§£æå™¨å®ç°
  - SQL-like DSLæ¡ˆä¾‹
  - HTMLæ¨¡æ¿DSL
  - é…ç½®æ–‡ä»¶DSL
  - æµ‹è¯•DSLæ¡†æ¶

**é¢„è®¡æ—¶é—´**: 8å°æ—¶  
**éš¾åº¦**: â­â­â­â­â­

---

### âš¡ å®æ€§èƒ½ä¼˜åŒ–

æå‡å®çš„ç¼–è¯‘æ€§èƒ½ï¼š

- **[æ€§èƒ½ä¼˜åŒ–](./macro_optimization.md)** â­ æ–°å¢å®Œæ•´
  - ç¼–è¯‘æ—¶æ€§èƒ½åˆ†æ
  - TokenStreamä¼˜åŒ–
  - å¢é‡ç¼–è¯‘ä¼˜åŒ–
  - å®å±•å¼€ç¼“å­˜
  - ä¾èµ–æœ€å°åŒ–
  - æ€§èƒ½åŸºå‡†æµ‹è¯•

**é¢„è®¡æ—¶é—´**: 4å°æ—¶  
**éš¾åº¦**: â­â­â­â­

---

### ğŸ” å®è°ƒè¯•æŠ€æœ¯

å·²æœ‰æ–‡æ¡£ï¼ˆè®¡åˆ’ä¸­ï¼‰:

- **[å®è°ƒè¯•](./03_macro_debugging.md)** - è®¡åˆ’ä¸­
  - cargo-expandä½¿ç”¨
  - trace_macrosè°ƒè¯•
  - ç¼–è¯‘å™¨è¯Šæ–­
  - é”™è¯¯ä¿¡æ¯ä¼˜åŒ–

**é¢„è®¡æ—¶é—´**: 4å°æ—¶  
**éš¾åº¦**: â­â­â­

---

### ğŸ§ª å®æµ‹è¯•ç­–ç•¥

å·²æœ‰æ–‡æ¡£ï¼ˆè®¡åˆ’ä¸­ï¼‰:

- **[å®æµ‹è¯•](./05_macro_testing.md)** - è®¡åˆ’ä¸­
  - å•å…ƒæµ‹è¯•
  - é›†æˆæµ‹è¯•
  - trybuildæµ‹è¯•
  - é”™è¯¯æ¡ˆä¾‹æµ‹è¯•

**é¢„è®¡æ—¶é—´**: 4å°æ—¶  
**éš¾åº¦**: â­â­â­

---

### ğŸš€ ä»£ç ç”Ÿæˆæ¨¡å¼

å·²æœ‰æ–‡æ¡£ï¼ˆè®¡åˆ’ä¸­ï¼‰:

- **[ä»£ç ç”Ÿæˆ](./02_code_generation.md)** - è®¡åˆ’ä¸­
  - é™æ€ä»£ç ç”Ÿæˆ
  - åŠ¨æ€ä»£ç ç”Ÿæˆ
  - Build scriptsé›†æˆ
  - æ¨¡æ¿å¼•æ“

**é¢„è®¡æ—¶é—´**: 6å°æ—¶  
**éš¾åº¦**: â­â­â­â­

---

## ğŸ¯ å­¦ä¹ è·¯å¾„

### è·¯å¾„ä¸€ï¼šDSLè®¾è®¡è€…

**ç›®æ ‡**: è®¾è®¡å’Œå®ç°é¢†åŸŸç‰¹å®šè¯­è¨€

1. [å®å…ƒç¼–ç¨‹æ·±åº¦](./macro_metaprogramming.md) - 6å°æ—¶
2. [DSLæ„å»ºå®æˆ˜](./dsl_construction.md) - 8å°æ—¶
3. [æ€§èƒ½ä¼˜åŒ–](./macro_optimization.md) - 4å°æ—¶
4. å®è·µé¡¹ç›®ï¼šæ„å»ºè‡ªå·±çš„DSL

**æ€»è®¡**: 18å°æ—¶ + å®è·µ

---

### è·¯å¾„äºŒï¼šåº“ä½œè€…

**ç›®æ ‡**: ä¸ºå¼€æºåº“è®¾è®¡é«˜è´¨é‡å®API

1. [å®å…ƒç¼–ç¨‹æ·±åº¦](./macro_metaprogramming.md) - 6å°æ—¶
2. [DSLæ„å»ºå®æˆ˜](./dsl_construction.md) - 4å°æ—¶ï¼ˆé€‰æ‹©æ€§é˜…è¯»ï¼‰
3. [æ€§èƒ½ä¼˜åŒ–](./macro_optimization.md) - 4å°æ—¶
4. [æœ€ä½³å®è·µ](../05_practice/02_best_practices.md) - 3å°æ—¶

**æ€»è®¡**: 17å°æ—¶

---

### è·¯å¾„ä¸‰ï¼šæ€§èƒ½ä¸“å®¶

**ç›®æ ‡**: ä¼˜åŒ–å®çš„ç¼–è¯‘æ€§èƒ½

1. [å®å…ƒç¼–ç¨‹æ·±åº¦](./macro_metaprogramming.md) - ç¬¬3-4èŠ‚
2. [æ€§èƒ½ä¼˜åŒ–](./macro_optimization.md) - å®Œæ•´é˜…è¯»
3. [TokenStreamæ·±åº¦](../03_procedural/05_token_streams.md)
4. æ€§èƒ½åŸºå‡†æµ‹è¯•å®æˆ˜

**æ€»è®¡**: 8å°æ—¶

---

## ğŸ“– æ¨èé˜…è¯»é¡ºåº

**å®Œæ•´å­¦ä¹ è·¯å¾„**:

```mermaid
flowchart TD
    Start[å¼€å§‹é«˜çº§å­¦ä¹ ] --> Meta[å®å…ƒç¼–ç¨‹]
    
    Meta --> Choice{é€‰æ‹©æ–¹å‘}
    
    Choice -->|DSLè®¾è®¡| DSL[DSLæ„å»º]
    Choice -->|æ€§èƒ½ä¼˜åŒ–| Perf[æ€§èƒ½ä¼˜åŒ–]
    Choice -->|å…¨é¢æŒæ¡| Both[ä¸¤è€…éƒ½å­¦]
    
    DSL --> Project1[DSLé¡¹ç›®å®æˆ˜]
    Perf --> Project2[æ€§èƒ½ä¼˜åŒ–å®æˆ˜]
    Both --> DSL
    Both --> Perf
    
    Project1 --> Advanced[é«˜çº§åº”ç”¨]
    Project2 --> Advanced
    
    Advanced --> Contrib[å¼€æºè´¡çŒ®]
    
    style Start fill:#e3f2fd
    style Meta fill:#fff3e0
    style DSL fill:#c8e6c9
    style Perf fill:#e8f5e9
    style Advanced fill:#f3e5f5
```

---

## ğŸ”— ç›¸å…³èµ„æº

### å‰ç½®çŸ¥è¯†

- [è¿‡ç¨‹å®åŸºç¡€](../03_procedural/01_proc_macro_basics.md)
- [TokenStreamè¯¦è§£](../03_procedural/05_token_streams.md)
- [æœ€ä½³å®è·µ](../05_practice/02_best_practices.md)

### å®æˆ˜èµ„æº

- [çœŸå®æ¡ˆä¾‹åˆ†æ](../05_practice/04_real_world_examples.md)
- [å¸¸è§æ¨¡å¼](../05_practice/01_common_patterns.md)
- [åæ¨¡å¼é¿å…](../05_practice/03_anti_patterns.md)

### å·¥å…·é“¾

- cargo-expand - å®å±•å¼€æŸ¥çœ‹
- syn - è¯­æ³•è§£æ
- quote - ä»£ç ç”Ÿæˆ
- proc-macro2 - è¿‡ç¨‹å®å·¥å…·

### ç¤¾åŒºèµ„æº

- [The Little Book of Rust Macros](https://danielkeep.github.io/tlborm/book/)
- [Procedural Macros Workshop](https://github.com/dtolnay/proc-macro-workshop)
- [synæ–‡æ¡£](https://docs.rs/syn/)
- [quoteæ–‡æ¡£](https://docs.rs/quote/)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-10-20  
**ç»´æŠ¤è€…**: Rust-langé¡¹ç›®ç»„

---

## è¿”å›å¯¼èˆª

- [è¿”å›ä¸»ç´¢å¼•](../00_MASTER_INDEX.md)
- [è¿”å›æ¨¡å—README](../../README.md)
- [æŸ¥çœ‹ç†è®ºåŸºç¡€](../01_theory/)
- [æŸ¥çœ‹è¿‡ç¨‹å®](../03_procedural/)
