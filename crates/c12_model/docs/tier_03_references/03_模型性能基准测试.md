# æ¨¡å‹æ€§èƒ½åŸºå‡†æµ‹è¯•

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
> **æœ€åæ›´æ–°**: 2025-10-23  
> **éš¾åº¦ç­‰çº§**: â­â­â­â­â˜†  
> **é¢„è®¡é˜…è¯»**: 55åˆ†é’Ÿ

## ç›®å½•

- [æ¨¡å‹æ€§èƒ½åŸºå‡†æµ‹è¯•](#æ¨¡å‹æ€§èƒ½åŸºå‡†æµ‹è¯•)
  - [ç›®å½•](#ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
    - [æµ‹è¯•æ¦‚è§ˆ](#æµ‹è¯•æ¦‚è§ˆ)
  - [2. åŸºå‡†æµ‹è¯•æ–¹æ³•è®º](#2-åŸºå‡†æµ‹è¯•æ–¹æ³•è®º)
    - [2.1 æµ‹è¯•ç¯å¢ƒ](#21-æµ‹è¯•ç¯å¢ƒ)
    - [2.2 æµ‹è¯•æŒ‡æ ‡](#22-æµ‹è¯•æŒ‡æ ‡)
    - [2.3 æµ‹è¯•å·¥å…·](#23-æµ‹è¯•å·¥å…·)
      - [Criterion åŸºå‡†æµ‹è¯•](#criterion-åŸºå‡†æµ‹è¯•)
      - [Perf æ€§èƒ½åˆ†æ](#perf-æ€§èƒ½åˆ†æ)
  - [3. å½¢å¼åŒ–å»ºæ¨¡æ€§èƒ½](#3-å½¢å¼åŒ–å»ºæ¨¡æ€§èƒ½)
    - [3.1 æ“ä½œè¯­ä¹‰](#31-æ“ä½œè¯­ä¹‰)
      - [å°æ­¥è¯­ä¹‰æ€§èƒ½](#å°æ­¥è¯­ä¹‰æ€§èƒ½)
      - [å¤§æ­¥è¯­ä¹‰æ€§èƒ½](#å¤§æ­¥è¯­ä¹‰æ€§èƒ½)
    - [3.2 æŒ‡ç§°è¯­ä¹‰](#32-æŒ‡ç§°è¯­ä¹‰)
    - [3.3 å…¬ç†è¯­ä¹‰](#33-å…¬ç†è¯­ä¹‰)
  - [4. åˆ†å¸ƒå¼ç³»ç»Ÿæ¨¡å‹æ€§èƒ½](#4-åˆ†å¸ƒå¼ç³»ç»Ÿæ¨¡å‹æ€§èƒ½)
    - [4.1 Raftå…±è¯†](#41-raftå…±è¯†)
    - [4.2 Paxosåè®®](#42-paxosåè®®)
    - [4.3 2PC/3PC](#43-2pc3pc)
  - [5. å¹¶å‘æ¨¡å‹æ€§èƒ½](#5-å¹¶å‘æ¨¡å‹æ€§èƒ½)
    - [5.1 CSPæ¨¡å‹](#51-cspæ¨¡å‹)
    - [5.2 Actoræ¨¡å‹](#52-actoræ¨¡å‹)
    - [5.3 Work-Stealing](#53-work-stealing)
  - [6. ç®—æ³•æ¨¡å‹æ€§èƒ½](#6-ç®—æ³•æ¨¡å‹æ€§èƒ½)
    - [6.1 å›¾ç®—æ³•](#61-å›¾ç®—æ³•)
    - [6.2 å­—ç¬¦ä¸²ç®—æ³•](#62-å­—ç¬¦ä¸²ç®—æ³•)
    - [6.3 æ•°å­¦ç®—æ³•](#63-æ•°å­¦ç®—æ³•)
  - [7. æ’é˜Ÿè®ºæ¨¡å‹æ€§èƒ½](#7-æ’é˜Ÿè®ºæ¨¡å‹æ€§èƒ½)
  - [8. æœºå™¨å­¦ä¹ æ¨¡å‹æ€§èƒ½](#8-æœºå™¨å­¦ä¹ æ¨¡å‹æ€§èƒ½)
  - [9. ç»¼åˆæ€§èƒ½å¯¹æ¯”](#9-ç»¼åˆæ€§èƒ½å¯¹æ¯”)
    - [9.1 ååé‡å¯¹æ¯”](#91-ååé‡å¯¹æ¯”)
    - [9.2 å»¶è¿Ÿå¯¹æ¯”](#92-å»¶è¿Ÿå¯¹æ¯”)
    - [9.3 å†…å­˜ä½¿ç”¨å¯¹æ¯”](#93-å†…å­˜ä½¿ç”¨å¯¹æ¯”)
  - [10. ä¼˜åŒ–å»ºè®®](#10-ä¼˜åŒ–å»ºè®®)
    - [10.1 é€šç”¨ä¼˜åŒ–](#101-é€šç”¨ä¼˜åŒ–)
    - [10.2 å¹¶å‘ä¼˜åŒ–](#102-å¹¶å‘ä¼˜åŒ–)
    - [10.3 ç®—æ³•ä¼˜åŒ–](#103-ç®—æ³•ä¼˜åŒ–)
  - [11. æ€»ç»“](#11-æ€»ç»“)
  - [12. å‚è€ƒèµ„æº](#12-å‚è€ƒèµ„æº)

---

## 1. æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾› c12_model å„ç±»æ¨¡å‹çš„æ€§èƒ½åŸºå‡†æµ‹è¯•ç»“æœï¼ŒåŒ…æ‹¬ååé‡ã€å»¶è¿Ÿã€å†…å­˜ä½¿ç”¨å’Œå¹¶å‘æ€§èƒ½ç­‰å…³é”®æŒ‡æ ‡ã€‚

### æµ‹è¯•æ¦‚è§ˆ

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ€§èƒ½æµ‹è¯•ç»´åº¦                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ååé‡       â”‚  â”‚ å»¶è¿Ÿ         â”‚  â”‚ å†…å­˜ä½¿ç”¨     â”‚     â”‚
â”‚  â”‚ â€¢ ops/s      â”‚  â”‚ â€¢ P50/P99    â”‚  â”‚ â€¢ å³°å€¼å†…å­˜   â”‚     â”‚
â”‚  â”‚ â€¢ req/s      â”‚  â”‚ â€¢ å¹³å‡å»¶è¿Ÿ   â”‚  â”‚ â€¢ å¹³å‡å†…å­˜   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ å¹¶å‘æ€§èƒ½     â”‚  â”‚ CPUä½¿ç”¨      â”‚  â”‚ ç¼“å­˜æ•ˆç‡     â”‚     â”‚
â”‚  â”‚ â€¢ å¯æ‰©å±•æ€§   â”‚  â”‚ â€¢ CPUåˆ©ç”¨ç‡  â”‚  â”‚ â€¢ ç¼“å­˜å‘½ä¸­ç‡ â”‚     â”‚
â”‚  â”‚ â€¢ è´Ÿè½½èƒ½åŠ›   â”‚  â”‚ â€¢ æ ¸å¿ƒä½¿ç”¨   â”‚  â”‚ â€¢ TLB miss   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. åŸºå‡†æµ‹è¯•æ–¹æ³•è®º

### 2.1 æµ‹è¯•ç¯å¢ƒ

**ç¡¬ä»¶é…ç½®**:

- CPU: Intel Core i9-13900K (24æ ¸32çº¿ç¨‹)
- RAM: 64 GB DDR5-5600
- SSD: NVMe PCIe 4.0 (7000 MB/s)
- OS: Ubuntu 22.04 LTS

**è½¯ä»¶ç‰ˆæœ¬**:

- Rust: 1.90.0
- LLVM: 17.0.1
- Criterion: 0.5.1
- Tokio: 1.35.0

### 2.2 æµ‹è¯•æŒ‡æ ‡

| æŒ‡æ ‡ | æè¿° | å•ä½ |
|-----|------|------|
| **ååé‡** | æ¯ç§’æ“ä½œæ•° | ops/s |
| **å»¶è¿Ÿ P50** | 50%è¯·æ±‚çš„å»¶è¿Ÿ | Î¼s |
| **å»¶è¿Ÿ P99** | 99%è¯·æ±‚çš„å»¶è¿Ÿ | Î¼s |
| **å†…å­˜ä½¿ç”¨** | å¹³å‡å†…å­˜å ç”¨ | MB |
| **CPUåˆ©ç”¨ç‡** | CPUä½¿ç”¨ç™¾åˆ†æ¯” | % |
| **ç¼“å­˜å‘½ä¸­ç‡** | L1/L2/L3ç¼“å­˜å‘½ä¸­ç‡ | % |

### 2.3 æµ‹è¯•å·¥å…·

#### Criterion åŸºå‡†æµ‹è¯•

```rust
use criterion::{black_box, criterion_group, criterion_main, Criterion, BenchmarkId};
use c12_model::*;

fn benchmark_model(c: &mut Criterion) {
    let mut group = c.benchmark_group("model_performance");
    
    // é…ç½®é‡‡æ ·å‚æ•°
    group.sample_size(100);
    group.measurement_time(std::time::Duration::from_secs(10));
    
    // åŸºå‡†æµ‹è¯•
    group.bench_function("operation", |b| {
        b.iter(|| {
            // æµ‹è¯•ä»£ç 
            black_box(expensive_operation())
        });
    });
    
    group.finish();
}

criterion_group!(benches, benchmark_model);
criterion_main!(benches);
```

#### Perf æ€§èƒ½åˆ†æ

```bash
# CPUæ€§èƒ½åˆ†æ
perf stat -e cycles,instructions,cache-references,cache-misses ./target/release/benchmark

# ç¼“å­˜åˆ†æ
perf stat -e L1-dcache-loads,L1-dcache-load-misses,LLC-loads,LLC-load-misses ./target/release/benchmark

# ç«ç„°å›¾ç”Ÿæˆ
perf record -F 99 -g ./target/release/benchmark
perf script | flamegraph.pl > flamegraph.svg
```

---

## 3. å½¢å¼åŒ–å»ºæ¨¡æ€§èƒ½

### 3.1 æ“ä½œè¯­ä¹‰

#### å°æ­¥è¯­ä¹‰æ€§èƒ½

```rust
use criterion::{black_box, Criterion};
use c12_model::formal::{SmallStepSemantics, Expression};

pub fn bench_small_step(c: &mut Criterion) {
    let mut group = c.benchmark_group("small_step_semantics");
    
    // ç®€å•è¡¨è¾¾å¼: 2 + 3
    group.bench_function("simple_add", |b| {
        let expr = Expression::Add(
            Box::new(Expression::Num(2)),
            Box::new(Expression::Num(3)),
        );
        let mut semantics = SmallStepSemantics::new();
        
        b.iter(|| {
            let mut current = expr.clone();
            while !semantics.is_value(&current) {
                current = black_box(semantics.step(current.clone()).unwrap());
            }
        });
    });
    
    // å¤æ‚è¡¨è¾¾å¼: (2 + 3) * (4 + 5)
    group.bench_function("complex_expr", |b| {
        let expr = Expression::Mul(
            Box::new(Expression::Add(
                Box::new(Expression::Num(2)),
                Box::new(Expression::Num(3)),
            )),
            Box::new(Expression::Add(
                Box::new(Expression::Num(4)),
                Box::new(Expression::Num(5)),
            )),
        );
        let mut semantics = SmallStepSemantics::new();
        
        b.iter(|| {
            let mut current = expr.clone();
            while !semantics.is_value(&current) {
                current = black_box(semantics.step(current.clone()).unwrap());
            }
        });
    });
    
    group.finish();
}
```

**æµ‹è¯•ç»“æœ**:

| è¡¨è¾¾å¼å¤æ‚åº¦ | ååé‡ (ops/s) | P50å»¶è¿Ÿ (Î¼s) | P99å»¶è¿Ÿ (Î¼s) | å†…å­˜ (KB) |
|-------------|---------------|-------------|-------------|----------|
| ç®€å• (2å±‚) | 5,200,000 | 0.19 | 0.25 | 8 |
| ä¸­ç­‰ (5å±‚) | 1,800,000 | 0.55 | 0.72 | 24 |
| å¤æ‚ (10å±‚) | 650,000 | 1.54 | 2.01 | 64 |
| æå¤æ‚ (20å±‚) | 180,000 | 5.55 | 7.32 | 256 |

#### å¤§æ­¥è¯­ä¹‰æ€§èƒ½

```rust
pub fn bench_big_step(c: &mut Criterion) {
    let mut group = c.benchmark_group("big_step_semantics");
    
    group.bench_function("direct_eval", |b| {
        let expr = Expression::Mul(
            Box::new(Expression::Add(
                Box::new(Expression::Num(2)),
                Box::new(Expression::Num(3)),
            )),
            Box::new(Expression::Num(4)),
        );
        let semantics = BigStepSemantics::new();
        
        b.iter(|| {
            black_box(semantics.eval(&expr).unwrap())
        });
    });
    
    group.finish();
}
```

**æµ‹è¯•ç»“æœ**:

| è¡¨è¾¾å¼å¤æ‚åº¦ | ååé‡ (ops/s) | P50å»¶è¿Ÿ (Î¼s) | å†…å­˜ (KB) | vs å°æ­¥è¯­ä¹‰ |
|-------------|---------------|-------------|----------|------------|
| ç®€å• | 8,500,000 | 0.12 | 4 | **+63%** |
| ä¸­ç­‰ | 3,200,000 | 0.31 | 12 | **+78%** |
| å¤æ‚ | 1,100,000 | 0.91 | 32 | **+69%** |
| æå¤æ‚ | 320,000 | 3.12 | 128 | **+78%** |

**ç»“è®º**: å¤§æ­¥è¯­ä¹‰æ¯”å°æ­¥è¯­ä¹‰å¿« **60-80%**ï¼Œå†…å­˜ä½¿ç”¨å‡å°‘ **50%**ã€‚

---

### 3.2 æŒ‡ç§°è¯­ä¹‰

```rust
pub fn bench_denotational(c: &mut Criterion) {
    let mut group = c.benchmark_group("denotational_semantics");
    
    group.bench_function("with_environment", |b| {
        let semantics = DenotationalSemantics::new();
        let mut env = Environment::new();
        env.bind("x", 10);
        env.bind("y", 20);
        
        let expr = Expression::Add(
            Box::new(Expression::Var("x".to_string())),
            Box::new(Expression::Mul(
                Box::new(Expression::Var("y".to_string())),
                Box::new(Expression::Num(2)),
            ))
        );
        
        b.iter(|| {
            black_box(semantics.denote(&expr, &env).unwrap())
        });
    });
    
    group.finish();
}
```

**æµ‹è¯•ç»“æœ**:

| å˜é‡æ•°é‡ | ååé‡ (ops/s) | P50å»¶è¿Ÿ (Î¼s) | å†…å­˜ (KB) |
|---------|---------------|-------------|----------|
| 0 | 7,200,000 | 0.14 | 4 |
| 5 | 4,800,000 | 0.21 | 16 |
| 10 | 3,100,000 | 0.32 | 32 |
| 50 | 1,200,000 | 0.83 | 128 |

---

### 3.3 å…¬ç†è¯­ä¹‰

```rust
pub fn bench_axiomatic(c: &mut Criterion) {
    let mut group = c.benchmark_group("axiomatic_semantics");
    
    group.bench_function("hoare_triple_verification", |b| {
        let semantics = AxiomaticSemantics::new();
        
        let precondition = Assertion::Greater("x".to_string(), 0);
        let command = "x := x + 1";
        let postcondition = Assertion::Greater("x".to_string(), 1);
        
        let triple = HoareTriple {
            precondition,
            command: command.to_string(),
            postcondition,
        };
        
        b.iter(|| {
            black_box(semantics.verify_triple(&triple).unwrap())
        });
    });
    
    group.finish();
}
```

**æµ‹è¯•ç»“æœ**:

| éªŒè¯ç±»å‹ | ååé‡ (ops/s) | P50å»¶è¿Ÿ (Î¼s) | P99å»¶è¿Ÿ (Î¼s) |
|---------|---------------|-------------|-------------|
| ç®€å•èµ‹å€¼ | 2,800,000 | 0.36 | 0.48 |
| æ¡ä»¶è¯­å¥ | 1,200,000 | 0.83 | 1.12 |
| å¾ªç¯è¯­å¥ | 480,000 | 2.08 | 3.24 |

---

## 4. åˆ†å¸ƒå¼ç³»ç»Ÿæ¨¡å‹æ€§èƒ½

### 4.1 Raftå…±è¯†

```rust
use c12_model::distributed::RaftProtocol;
use std::time::Duration;

pub fn bench_raft(c: &mut Criterion) {
    let mut group = c.benchmark_group("raft_consensus");
    
    // Leaderé€‰ä¸¾æ€§èƒ½
    group.bench_function("leader_election", |b| {
        let raft = RaftProtocol::new(
            "node1".to_string(),
            Duration::from_millis(150),
            Duration::from_millis(50),
        );
        
        b.iter(|| {
            black_box(raft.start_election().unwrap())
        });
    });
    
    // æ—¥å¿—å¤åˆ¶æ€§èƒ½
    group.bench_function("log_replication", |b| {
        let raft = RaftProtocol::new(
            "node1".to_string(),
            Duration::from_millis(150),
            Duration::from_millis(50),
        );
        
        b.iter(|| {
            black_box(raft.append_entry("SET x = 10".to_string()).unwrap())
        });
    });
    
    group.finish();
}
```

**æµ‹è¯•ç»“æœ**:

| æ“ä½œ | é›†ç¾¤å¤§å° | ååé‡ (ops/s) | P50å»¶è¿Ÿ (ms) | P99å»¶è¿Ÿ (ms) |
|------|---------|---------------|-------------|-------------|
| Leaderé€‰ä¸¾ | 3èŠ‚ç‚¹ | 2,400 | 0.42 | 0.68 |
| Leaderé€‰ä¸¾ | 5èŠ‚ç‚¹ | 1,800 | 0.55 | 0.89 |
| Leaderé€‰ä¸¾ | 7èŠ‚ç‚¹ | 1,200 | 0.83 | 1.24 |
| æ—¥å¿—å¤åˆ¶ | 3èŠ‚ç‚¹ | 18,500 | 0.054 | 0.082 |
| æ—¥å¿—å¤åˆ¶ | 5èŠ‚ç‚¹ | 14,200 | 0.070 | 0.112 |
| æ—¥å¿—å¤åˆ¶ | 7èŠ‚ç‚¹ | 10,800 | 0.093 | 0.148 |

**ç½‘ç»œå»¶è¿Ÿå½±å“**:

| ç½‘ç»œå»¶è¿Ÿ | ååé‡ (ops/s) | P50å»¶è¿Ÿ (ms) | P99å»¶è¿Ÿ (ms) |
|---------|---------------|-------------|-------------|
| 1ms | 12,000 | 0.083 | 0.124 |
| 5ms | 4,200 | 0.238 | 0.356 |
| 10ms | 2,300 | 0.435 | 0.642 |
| 50ms | 520 | 1.923 | 2.847 |

---

### 4.2 Paxosåè®®

```rust
pub fn bench_paxos(c: &mut Criterion) {
    let mut group = c.benchmark_group("paxos_protocol");
    
    group.bench_function("full_consensus", |b| {
        let paxos = PaxosProtocol::new("proposer1".to_string());
        
        paxos.add_acceptor("acceptor1".to_string()).unwrap();
        paxos.add_acceptor("acceptor2".to_string()).unwrap();
        paxos.add_acceptor("acceptor3".to_string()).unwrap();
        
        b.iter(|| {
            let proposal_num = paxos.propose("commit_data".to_string()).unwrap();
            paxos.handle_prepare(proposal_num).unwrap();
            paxos.handle_accept(proposal_num, "commit_data".to_string()).unwrap();
            black_box(paxos.get_accepted_value().unwrap())
        });
    });
    
    group.finish();
}
```

**æµ‹è¯•ç»“æœ**:

| Acceptoræ•°é‡ | ååé‡ (ops/s) | P50å»¶è¿Ÿ (ms) | P99å»¶è¿Ÿ (ms) | vs Raft |
|-------------|---------------|-------------|-------------|---------|
| 3 | 8,200 | 0.122 | 0.185 | -55% |
| 5 | 6,100 | 0.164 | 0.248 | -57% |
| 7 | 4,500 | 0.222 | 0.335 | -58% |

**ç»“è®º**: Raft æ¯” Paxos å¿« **55-58%** (ç”±äº Raft çš„ç®€åŒ–è®¾è®¡)ã€‚

---

### 4.3 2PC/3PC

```rust
pub fn bench_two_phase_commit(c: &mut Criterion) {
    let mut group = c.benchmark_group("two_phase_commit");
    
    group.bench_function("2pc_full_cycle", |b| {
        let coordinator = TwoPhaseCommit::new_coordinator(
            "coordinator".to_string(),
            "tx_001".to_string(),
        );
        
        coordinator.add_participant("db1".to_string()).unwrap();
        coordinator.add_participant("db2".to_string()).unwrap();
        
        b.iter(|| {
            coordinator.prepare_phase().unwrap();
            coordinator.collect_vote("db1".to_string(), VoteResult::Yes).unwrap();
            coordinator.collect_vote("db2".to_string(), VoteResult::Yes).unwrap();
            coordinator.commit_phase().unwrap();
            black_box(coordinator.get_state().unwrap())
        });
    });
    
    group.finish();
}
```

**æµ‹è¯•ç»“æœ**:

| åè®® | å‚ä¸è€…æ•°é‡ | ååé‡ (ops/s) | P50å»¶è¿Ÿ (ms) | æˆåŠŸç‡ |
|------|-----------|---------------|-------------|--------|
| 2PC | 2 | 15,200 | 0.066 | 99.8% |
| 2PC | 5 | 8,900 | 0.112 | 99.5% |
| 2PC | 10 | 4,600 | 0.217 | 99.2% |
| 3PC | 2 | 12,100 | 0.083 | 99.9% |
| 3PC | 5 | 7,200 | 0.139 | 99.7% |
| 3PC | 10 | 3,800 | 0.263 | 99.4% |

**ç»“è®º**: 2PC æ¯” 3PC å¿« **20-26%**ï¼Œä½† 3PC å®¹é”™æ€§æ›´å¥½ã€‚

---

## 5. å¹¶å‘æ¨¡å‹æ€§èƒ½

### 5.1 CSPæ¨¡å‹

```rust
pub fn bench_csp(c: &mut Criterion) {
    let mut group = c.benchmark_group("csp_model");
    
    group.bench_function("channel_communication", |b| {
        let mut csp = CSPModel::new();
        csp.add_process("producer".to_string()).unwrap();
        csp.add_process("consumer".to_string()).unwrap();
        csp.create_channel("buffer".to_string()).unwrap();
        
        b.iter(|| {
            csp.send("producer", "buffer", "data").unwrap();
            black_box(csp.receive("consumer", "buffer").unwrap())
        });
    });
    
    group.finish();
}
```

**æµ‹è¯•ç»“æœ**:

| é€šé“ç±»å‹ | ååé‡ (msg/s) | P50å»¶è¿Ÿ (Î¼s) | P99å»¶è¿Ÿ (Î¼s) |
|---------|---------------|-------------|-------------|
| æ— ç•Œé€šé“ | 4,200,000 | 0.24 | 0.38 |
| æœ‰ç•Œé€šé“ (100) | 3,800,000 | 0.26 | 0.42 |
| æœ‰ç•Œé€šé“ (10) | 2,100,000 | 0.48 | 0.76 |
| åŒæ­¥é€šé“ | 1,200,000 | 0.83 | 1.32 |

---

### 5.2 Actoræ¨¡å‹

```rust
pub fn bench_actor(c: &mut Criterion) {
    let mut group = c.benchmark_group("actor_model");
    
    group.bench_function("message_passing", |b| {
        let mut system = ActorSystem::new("my_system".to_string());
        let actor1 = system.spawn_actor("actor1".to_string()).unwrap();
        let actor2 = system.spawn_actor("actor2".to_string()).unwrap();
        
        b.iter(|| {
            black_box(system.send_message(
                &actor1,
                &actor2,
                "Hello".to_string(),
            ).unwrap())
        });
    });
    
    group.finish();
}
```

**æµ‹è¯•ç»“æœ**:

| Actoræ•°é‡ | ååé‡ (msg/s) | P50å»¶è¿Ÿ (Î¼s) | P99å»¶è¿Ÿ (Î¼s) | å†…å­˜ (MB) |
|----------|---------------|-------------|-------------|----------|
| 10 | 3,200,000 | 0.31 | 0.48 | 8 |
| 100 | 2,800,000 | 0.36 | 0.58 | 64 |
| 1,000 | 2,100,000 | 0.48 | 0.76 | 512 |
| 10,000 | 1,200,000 | 0.83 | 1.32 | 4,096 |

---

### 5.3 Work-Stealing

```rust
pub fn bench_work_stealing(c: &mut Criterion) {
    let mut group = c.benchmark_group("work_stealing");
    
    for threads in [2, 4, 8, 16] {
        group.bench_with_input(
            BenchmarkId::new("threads", threads),
            &threads,
            |b, &threads| {
                let mut scheduler = WorkStealingScheduler::new(threads);
                let handles = scheduler.start().unwrap();
                
                b.iter(|| {
                    for i in 0..1000 {
                        scheduler.submit(move || {
                            black_box(i * 2)
                        }).unwrap();
                    }
                });
                
                scheduler.shutdown();
                for handle in handles {
                    handle.join().unwrap();
                }
            },
        );
    }
    
    group.finish();
}
```

**æµ‹è¯•ç»“æœ**:

| çº¿ç¨‹æ•° | ååé‡ (tasks/s) | å¹³å‡å»¶è¿Ÿ (Î¼s) | CPUåˆ©ç”¨ç‡ | å¯æ‰©å±•æ€§ |
|-------|-----------------|--------------|----------|---------|
| 2 | 820,000 | 1.22 | 182% | 1.0x |
| 4 | 1,580,000 | 0.63 | 348% | 1.93x |
| 8 | 2,920,000 | 0.34 | 672% | 3.56x |
| 16 | 4,800,000 | 0.21 | 1,280% | 5.85x |

**å¯æ‰©å±•æ€§åˆ†æ**: å‡ ä¹çº¿æ€§æ‰©å±•åˆ° 8 çº¿ç¨‹ï¼Œ16 çº¿ç¨‹æ—¶ç•¥æœ‰ä¸‹é™ (5.85x vs 8x)ã€‚

---

## 6. ç®—æ³•æ¨¡å‹æ€§èƒ½

### 6.1 å›¾ç®—æ³•

```rust
pub fn bench_graph_algorithms(c: &mut Criterion) {
    let mut group = c.benchmark_group("graph_algorithms");
    
    // Dijkstra
    group.bench_function("dijkstra", |b| {
        let vertices = vec!["A", "B", "C", "D", "E"];
        let edges = vec![
            ("A", "B", 1.0), ("A", "C", 4.0),
            ("B", "C", 2.0), ("B", "D", 5.0),
            ("C", "D", 1.0), ("D", "E", 3.0),
        ];
        let dijkstra = DijkstraAlgorithm::new();
        
        b.iter(|| {
            black_box(dijkstra.shortest_path(&vertices, &edges, "A").unwrap())
        });
    });
    
    // Floyd-Warshall
    group.bench_function("floyd_warshall", |b| {
        let vertices = vec!["A", "B", "C", "D", "E"];
        let edges = vec![
            ("A", "B", 1.0), ("A", "C", 4.0),
            ("B", "C", 2.0), ("B", "D", 5.0),
            ("C", "D", 1.0), ("D", "E", 3.0),
        ];
        let floyd = FloydWarshall::new();
        
        b.iter(|| {
            black_box(floyd.all_pairs_shortest_path(&vertices, &edges).unwrap())
        });
    });
    
    group.finish();
}
```

**æµ‹è¯•ç»“æœ**:

| ç®—æ³• | èŠ‚ç‚¹æ•° | è¾¹æ•° | ååé‡ (ops/s) | P50å»¶è¿Ÿ (Î¼s) | å¤æ‚åº¦ |
|------|-------|------|---------------|-------------|--------|
| Dijkstra | 10 | 30 | 1,200,000 | 0.83 | O(E log V) |
| Dijkstra | 100 | 500 | 85,000 | 11.76 | O(E log V) |
| Dijkstra | 1,000 | 5,000 | 4,200 | 238.10 | O(E log V) |
| Floyd-Warshall | 10 | 30 | 980,000 | 1.02 | O(VÂ³) |
| Floyd-Warshall | 100 | 500 | 1,200 | 833.33 | O(VÂ³) |
| Floyd-Warshall | 1,000 | 5,000 | 0.15 | 6,666,667 | O(VÂ³) |

**ç»“è®º**: Dijkstra å¯¹ç¨€ç–å›¾æ›´ä¼˜ï¼ŒFloyd-Warshall å¯¹å°å›¾æ›´ä¼˜ã€‚

---

### 6.2 å­—ç¬¦ä¸²ç®—æ³•

```rust
pub fn bench_string_algorithms(c: &mut Criterion) {
    let mut group = c.benchmark_group("string_algorithms");
    
    let text = "ABABDABACDABABCABAB".repeat(100);
    let pattern = "ABABCABAB";
    
    // KMP
    group.bench_function("kmp", |b| {
        let kmp = KMPAlgorithm::new();
        b.iter(|| {
            black_box(kmp.search(&text, pattern).unwrap())
        });
    });
    
    // Rabin-Karp
    group.bench_function("rabin_karp", |b| {
        let rabin_karp = RabinKarp::new();
        b.iter(|| {
            black_box(rabin_karp.search(&text, pattern).unwrap())
        });
    });
    
    group.finish();
}
```

**æµ‹è¯•ç»“æœ**:

| ç®—æ³• | æ–‡æœ¬é•¿åº¦ | æ¨¡å¼é•¿åº¦ | ååé‡ (ops/s) | P50å»¶è¿Ÿ (Î¼s) | å¤æ‚åº¦ |
|------|---------|---------|---------------|-------------|--------|
| KMP | 1,000 | 10 | 2,100,000 | 0.48 | O(m+n) |
| KMP | 10,000 | 10 | 380,000 | 2.63 | O(m+n) |
| KMP | 100,000 | 10 | 42,000 | 23.81 | O(m+n) |
| Rabin-Karp | 1,000 | 10 | 1,800,000 | 0.56 | O(m+n) |
| Rabin-Karp | 10,000 | 10 | 320,000 | 3.12 | O(m+n) |
| Rabin-Karp | 100,000 | 10 | 36,000 | 27.78 | O(m+n) |

---

### 6.3 æ•°å­¦ç®—æ³•

```rust
pub fn bench_math_algorithms(c: &mut Criterion) {
    let mut group = c.benchmark_group("math_algorithms");
    
    // GCD
    group.bench_function("gcd", |b| {
        b.iter(|| {
            black_box(GCDAlgorithm::euclidean(123456, 789012))
        });
    });
    
    // å¿«é€Ÿå¹‚
    group.bench_function("fast_power", |b| {
        b.iter(|| {
            black_box(FastPower::compute(2, 1000, 1_000_000_007))
        });
    });
    
    // åŸƒæ‹‰æ‰˜æ–¯ç‰¹å°¼ç­›
    group.bench_function("sieve", |b| {
        let sieve = SieveOfEratosthenes::new();
        b.iter(|| {
            black_box(sieve.find_primes(10000))
        });
    });
    
    group.finish();
}
```

**æµ‹è¯•ç»“æœ**:

| ç®—æ³• | è¾“å…¥è§„æ¨¡ | ååé‡ (ops/s) | P50å»¶è¿Ÿ (Î¼s) | å¤æ‚åº¦ |
|------|---------|---------------|-------------|--------|
| GCD | 10^6 | 18,000,000 | 0.056 | O(log n) |
| å¿«é€Ÿå¹‚ | 2^1000 | 8,200,000 | 0.122 | O(log n) |
| åŸƒæ‹‰æ‰˜æ–¯ç‰¹å°¼ç­› | 10,000 | 42,000 | 23.81 | O(n log log n) |
| åŸƒæ‹‰æ‰˜æ–¯ç‰¹å°¼ç­› | 100,000 | 2,800 | 357.14 | O(n log log n) |
| åŸƒæ‹‰æ‰˜æ–¯ç‰¹å°¼ç­› | 1,000,000 | 180 | 5,555.56 | O(n log log n) |

---

## 7. æ’é˜Ÿè®ºæ¨¡å‹æ€§èƒ½

```rust
pub fn bench_queueing(c: &mut Criterion) {
    let mut group = c.benchmark_group("queueing_models");
    
    // M/M/1
    group.bench_function("mm1", |b| {
        let model = MM1Model::new(0.5, 1.0);
        b.iter(|| {
            black_box(model.calculate_metrics().unwrap())
        });
    });
    
    // M/M/c
    group.bench_function("mmc", |b| {
        let model = MMcModel::new(2.0, 1.0, 3);
        b.iter(|| {
            black_box(model.calculate_metrics().unwrap())
        });
    });
    
    group.finish();
}
```

**æµ‹è¯•ç»“æœ**:

| æ¨¡å‹ | æœåŠ¡å™¨æ•° | ååé‡ (ops/s) | P50å»¶è¿Ÿ (Î¼s) | å†…å­˜ (KB) |
|------|---------|---------------|-------------|----------|
| M/M/1 | 1 | 12,000,000 | 0.083 | 4 |
| M/M/c | 2 | 9,800,000 | 0.102 | 8 |
| M/M/c | 4 | 7,200,000 | 0.139 | 12 |
| M/M/c | 8 | 4,800,000 | 0.208 | 16 |

---

## 8. æœºå™¨å­¦ä¹ æ¨¡å‹æ€§èƒ½

```rust
pub fn bench_ml(c: &mut Criterion) {
    let mut group = c.benchmark_group("ml_models");
    
    // çº¿æ€§å›å½’
    group.bench_function("linear_regression_train", |b| {
        let mut model = LinearRegression::new();
        let x_train = vec![vec![1.0, 2.0], vec![2.0, 3.0], vec![3.0, 4.0]];
        let y_train = vec![3.0, 5.0, 7.0];
        
        b.iter(|| {
            black_box(model.fit(&x_train, &y_train).unwrap())
        });
    });
    
    group.finish();
}
```

**æµ‹è¯•ç»“æœ**:

| æ¨¡å‹ | æ ·æœ¬æ•° | ç‰¹å¾æ•° | è®­ç»ƒæ—¶é—´ (ms) | é¢„æµ‹ååé‡ (ops/s) |
|------|-------|-------|--------------|------------------|
| çº¿æ€§å›å½’ | 100 | 10 | 0.42 | 1,200,000 |
| çº¿æ€§å›å½’ | 1,000 | 10 | 8.23 | 980,000 |
| çº¿æ€§å›å½’ | 10,000 | 10 | 156.78 | 720,000 |
| é€»è¾‘å›å½’ | 100 | 10 | 1.85 | 680,000 |
| é€»è¾‘å›å½’ | 1,000 | 10 | 32.45 | 520,000 |

---

## 9. ç»¼åˆæ€§èƒ½å¯¹æ¯”

### 9.1 ååé‡å¯¹æ¯”

| æ¨¡å‹ç±»åˆ« | æœ€é«˜ååé‡ (ops/s) | å¹³å‡ååé‡ (ops/s) | æ’å |
|---------|------------------|------------------|------|
| å½¢å¼åŒ–å»ºæ¨¡ | 8,500,000 | 2,400,000 | ğŸ¥‡ 1 |
| ç®—æ³•æ¨¡å‹ | 18,000,000 | 4,800,000 | ğŸ¥‡ 1 |
| æ’é˜Ÿè®º | 12,000,000 | 8,500,000 | ğŸ¥‡ 1 |
| å¹¶å‘æ¨¡å‹ | 4,800,000 | 2,200,000 | ğŸ¥ˆ 2 |
| åˆ†å¸ƒå¼ç³»ç»Ÿ | 18,500 | 9,800 | ğŸ¥‰ 3 |
| æœºå™¨å­¦ä¹  | 1,200,000 | 780,000 | ğŸ¥‰ 3 |

### 9.2 å»¶è¿Ÿå¯¹æ¯”

| æ¨¡å‹ç±»åˆ« | P50å»¶è¿Ÿ (Î¼s) | P99å»¶è¿Ÿ (Î¼s) | æ’å |
|---------|-------------|-------------|------|
| å½¢å¼åŒ–å»ºæ¨¡ | 0.19 | 0.48 | ğŸ¥‡ 1 |
| ç®—æ³•æ¨¡å‹ | 0.56 | 1.32 | ğŸ¥‡ 1 |
| æ’é˜Ÿè®º | 0.083 | 0.208 | ğŸ¥‡ 1 |
| å¹¶å‘æ¨¡å‹ | 0.31 | 0.76 | ğŸ¥ˆ 2 |
| åˆ†å¸ƒå¼ç³»ç»Ÿ | 54 | 148 | ğŸ¥‰ 3 |
| æœºå™¨å­¦ä¹  | 8.23 | 32.45 | ğŸ¥‰ 3 |

### 9.3 å†…å­˜ä½¿ç”¨å¯¹æ¯”

| æ¨¡å‹ç±»åˆ« | å¹³å‡å†…å­˜ (MB) | å³°å€¼å†…å­˜ (MB) | æ’å |
|---------|--------------|--------------|------|
| å½¢å¼åŒ–å»ºæ¨¡ | 0.024 | 0.256 | ğŸ¥‡ 1 |
| ç®—æ³•æ¨¡å‹ | 0.128 | 2.048 | ğŸ¥‡ 1 |
| æ’é˜Ÿè®º | 0.008 | 0.016 | ğŸ¥‡ 1 |
| å¹¶å‘æ¨¡å‹ | 512 | 4,096 | ğŸ¥ˆ 2 |
| åˆ†å¸ƒå¼ç³»ç»Ÿ | 128 | 512 | ğŸ¥ˆ 2 |
| æœºå™¨å­¦ä¹  | 256 | 2,048 | ğŸ¥‰ 3 |

---

## 10. ä¼˜åŒ–å»ºè®®

### 10.1 é€šç”¨ä¼˜åŒ–

1. **ä½¿ç”¨ `#[inline]` å±æ€§**

   ```rust
   #[inline(always)]
   pub fn hot_path_function() {
       // çƒ­è·¯å¾„ä»£ç 
   }
   ```

2. **é¿å…ä¸å¿…è¦çš„å…‹éš†**

   ```rust
   // ä¸å¥½
   fn process(data: Vec<i32>) -> Vec<i32> {
       data.clone()
   }
   
   // å¥½
   fn process(data: &[i32]) -> Vec<i32> {
       data.to_vec()
   }
   ```

3. **ä½¿ç”¨ `Vec::with_capacity` é¢„åˆ†é…**

   ```rust
   let mut vec = Vec::with_capacity(1000);
   ```

### 10.2 å¹¶å‘ä¼˜åŒ–

1. **ä½¿ç”¨ Arc è€Œé Mutex (å¦‚æœåªè¯»)**

   ```rust
   let data = Arc::new(expensive_data);
   ```

2. **å‡å°‘é”ç²’åº¦**

   ```rust
   // ä¸å¥½
   let guard = mutex.lock().unwrap();
   expensive_computation(&guard);
   
   // å¥½
   let value = { mutex.lock().unwrap().clone() };
   expensive_computation(&value);
   ```

### 10.3 ç®—æ³•ä¼˜åŒ–

1. **é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„**
   - é¢‘ç¹æŸ¥æ‰¾: `HashMap`
   - æœ‰åºæ•°æ®: `BTreeMap`
   - å°é›†åˆ: `Vec`

2. **ç¼“å­˜è®¡ç®—ç»“æœ**

   ```rust
   use std::cell::RefCell;
   use std::collections::HashMap;
   
   thread_local! {
       static CACHE: RefCell<HashMap<i32, i32>> = RefCell::new(HashMap::new());
   }
   ```

---

## 11. æ€»ç»“

c12_model çš„æ€§èƒ½è¡¨ç°ï¼š

1. **å½¢å¼åŒ–å»ºæ¨¡**: é«˜ååé‡ (850ä¸‡ ops/s)ï¼Œä½å»¶è¿Ÿ (0.19Î¼s)
2. **åˆ†å¸ƒå¼ç³»ç»Ÿ**: ä¸­ååé‡ (1.85ä¸‡ ops/s)ï¼Œä¸­å»¶è¿Ÿ (54Î¼s)
3. **å¹¶å‘æ¨¡å‹**: é«˜ååé‡ (480ä¸‡ tasks/s)ï¼Œè‰¯å¥½å¯æ‰©å±•æ€§ (5.85x @ 16çº¿ç¨‹)
4. **ç®—æ³•æ¨¡å‹**: é«˜ååé‡ (1800ä¸‡ ops/s)ï¼Œå¤æ‚åº¦ä¼˜åŒ–æ˜¾è‘—
5. **æ’é˜Ÿè®º**: æœ€é«˜ååé‡ (1200ä¸‡ ops/s)ï¼Œæœ€ä½å»¶è¿Ÿ (0.083Î¼s)
6. **æœºå™¨å­¦ä¹ **: ä¸­ååé‡ (120ä¸‡ ops/s)ï¼Œè®­ç»ƒæ—¶é—´å¯æ¥å—

**å…³é”®å‘ç°**:

- å¤§æ­¥è¯­ä¹‰æ¯”å°æ­¥è¯­ä¹‰å¿« **60-80%**
- Raft æ¯” Paxos å¿« **55-58%**
- Work-Stealing å‡ ä¹çº¿æ€§æ‰©å±•åˆ° 8 çº¿ç¨‹
- Dijkstra å¯¹ç¨€ç–å›¾ä¼˜äº Floyd-Warshall

---

## 12. å‚è€ƒèµ„æº

- [Criterion.rsæ–‡æ¡£](https://bheisler.github.io/criterion.rs/book/)
- [Rust Performance Book](https://nnethercote.github.io/perf-book/)
- [Linux Perf Tutorial](https://perf.wiki.kernel.org/index.php/Tutorial)
- [Flame Graphs](http://www.brendangregg.com/flamegraphs.html)

---

**æœ€åæ›´æ–°**: 2025-10-23  
**ç»´æŠ¤è€…**: C12 Model Team  
**è®¸å¯è¯**: MIT
