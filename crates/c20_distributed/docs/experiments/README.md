# 实验与测试指引（Experiments & Checks）

- 目的：为 `tests/` 与文档配套，快速搭建可重复的分布式实验。

## 一致性与复制

- 线性化检查：记录操作历史，使用 Porcupine/Knossos 验证线性化。
- Quorum 验证：构造 `R/W/N` 组合与分区，检查 `R+W>N` 下读不回退。
- 读修复：注入副本落后，验证读取路径触发修复与最终收敛。

## 共识（Raft）

- 选举：打断领导者、注入分区，测切换时间与唯一性。
- 日志冲突：双领导日志分叉，检查回退与收敛。
- 快照：长日志→快照→重启恢复时间与正确性。

## 事务

- SAGA：补偿幂等与部分失败回滚验证。
- TCC：Try/Confirm/Cancel 在超时/重试下的资源一致性。
- 2PC：协调者失败与恢复，检查阻塞/重放策略。

## 传输/调度

- 重试与退避：在过载与部分失败下统计成功率与尾延迟。
- 截止时间传递：预算耗尽后早失败比例与整体吞吐。

## SWIM/成员管理

- Gossip 收敛：从多起点变更开始，测量收敛时间与误报率。
- 视图切换：视图变化对路由/放置的影响与稳定期。

## 可观测性

- 端到端追踪：关键路径 span 覆盖率、P99/错误预算报表。

## 工具/参考

- Porcupine、Knossos、Jepsen 基本流程
- Chaos 工具：tc/netem、iptables、kill -9、fallocate（磁盘满）

## 清单

详见 [CHECKLIST.md](./CHECKLIST.md)：分主题的可执行检查项（前置→步骤→指标→判据）。
