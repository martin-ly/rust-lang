[package]
name = "c16_webassembly"
version = "0.1.0"
edition = "2024"
resolver = "3"
rust-version = "1.90"
authors = ["Rust WebAssembly Team"]
description = "WebAssembly 2.0 与 Rust 1.90 集成演示项目 - 全面的语法、注释、示例和文档"
license = "MIT OR Apache-2.0"
repository = "https://github.com/rust-lang/webassembly"
keywords = ["webassembly", "wasm", "rust", "vm", "runtime"]
categories = ["web-programming", "wasm"]

[dependencies]
# 序列化和反序列化
serde = { workspace = true, features = ["derive", "rc"] }
serde_json = { workspace = true }
serde_bytes = "0.11"

# 错误处理
thiserror = { workspace = true }
anyhow = { workspace = true }

# 异步运行时
tokio = { workspace = true, features = ["full"] }

# 工具库
uuid = { workspace = true, features = ["v4", "serde"] }
chrono = { workspace = true, features = ["serde"] }
log = { workspace = true }
env_logger = "0.11.5"

# WebAssembly 相关
wasm-bindgen = "0.2"
wasm-bindgen-futures = "0.4"
js-sys = "0.3"
web-sys = "0.3"
wasmtime = "22.0"
wasmparser = "0.220"
wasm-encoder = "0.40"

# 数学和算法
num-traits = "0.2"
num-bigint = "0.4"
num-complex = "0.4"

# 内存管理
bumpalo = "3.15"

# 性能分析
criterion = { version = "0.5", optional = true }

# 测试工具
proptest = { version = "1.4", optional = true }

[dev-dependencies]
criterion = "0.5"
proptest = "1.4"
tempfile = "3.10"

[features]
default = ["std"]
std = []
no_std = []
bench = ["criterion"]
test = ["proptest"]

# [[bench]]
# name = "wasm_benchmarks"
# harness = false
# required-features = ["bench"]

[profile.release]
opt-level = 3
lto = true
codegen-units = 1
panic = "abort"

[profile.bench]
opt-level = 3
lto = true
codegen-units = 1
