# C12 WASM - å·¥å…·é“¾å‚è€ƒ

> **æ–‡æ¡£ç±»å‹**: Tier 3 - å‚è€ƒå±‚
> **æ–‡æ¡£å®šä½**: WASM å·¥å…·é“¾ä½¿ç”¨æ‰‹å†Œ
> **é¡¹ç›®çŠ¶æ€**: âœ… å®Œæ•´å®Œæˆ
> **ç›¸å…³æ–‡æ¡£**: [Rust ç¼–è¯‘ WASM](../tier_02_guides/02_rust_ç¼–è¯‘_wasm.md) | [æœ€ä½³å®è·µ](./03_æœ€ä½³å®è·µ.md)

**æœ€åæ›´æ–°**: 2025-12-11
**é€‚ç”¨ç‰ˆæœ¬**: Rust 1.92.0+ / Edition 2024, WASM 2.0 + WASI 0.2

---

## ğŸ“‹ ç›®å½•

- [C12 WASM - å·¥å…·é“¾å‚è€ƒ](#c12-wasm---å·¥å…·é“¾å‚è€ƒ)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [ğŸ¯ æ¦‚è¿°](#-æ¦‚è¿°)
  - [ğŸ› ï¸ rustc](#ï¸-rustc)
    - [åŸºæœ¬ç”¨æ³•](#åŸºæœ¬ç”¨æ³•)
  - [ğŸ“¦ wasm-pack](#-wasm-pack)
    - [å®‰è£…](#å®‰è£…)
    - [åŸºæœ¬å‘½ä»¤](#åŸºæœ¬å‘½ä»¤)
    - [ç›®æ ‡é€‰é¡¹](#ç›®æ ‡é€‰é¡¹)
  - [ğŸ”§ wasm-bindgen](#-wasm-bindgen)
    - [wasm-bindgen å®‰è£…](#wasm-bindgen-å®‰è£…)
    - [wasm-bindgen åŸºæœ¬ç”¨æ³•](#wasm-bindgen-åŸºæœ¬ç”¨æ³•)
  - [âš¡ wasm-opt](#-wasm-opt)
    - [wasm-opt å®‰è£…](#wasm-opt-å®‰è£…)
    - [wasm-opt åŸºæœ¬ç”¨æ³•](#wasm-opt-åŸºæœ¬ç”¨æ³•)
  - [ğŸš€ WasmEdge](#-wasmedge)
    - [WasmEdge ç®€ä»‹](#wasmedge-ç®€ä»‹)
    - [WasmEdge å®‰è£…](#wasmedge-å®‰è£…)
    - [WasmEdge åŸºæœ¬ç”¨æ³•](#wasmedge-åŸºæœ¬ç”¨æ³•)
    - [Rust ç¼–è¯‘åˆ° WASI](#rust-ç¼–è¯‘åˆ°-wasi)
    - [WasmEdge é«˜çº§ç‰¹æ€§](#wasmedge-é«˜çº§ç‰¹æ€§)
  - [ğŸ–¥ï¸ å…¶ä»–æœ¬åœ°è¿è¡Œæ—¶](#ï¸-å…¶ä»–æœ¬åœ°è¿è¡Œæ—¶)
    - [wasmtime](#wasmtime)
    - [wasmer](#wasmer)
  - [ğŸ“š ç›¸å…³èµ„æº](#-ç›¸å…³èµ„æº)

---

## ğŸ¯ æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾› WASM å·¥å…·é“¾çš„å®Œæ•´ä½¿ç”¨æ‰‹å†Œã€‚

---

## ğŸ› ï¸ rustc

### åŸºæœ¬ç”¨æ³•

```bash
# ç¼–è¯‘åˆ° WASM
cargo build --target wasm32-unknown-unknown --release

# æŒ‡å®šä¼˜åŒ–çº§åˆ«
cargo build --target wasm32-unknown-unknown --release -- -C opt-level=z
```

---

## ğŸ“¦ wasm-pack

### å®‰è£…

```bash
curl https://rustwasm.github.io/wasm-pack/installer/init.sh -sSf | sh
```

### åŸºæœ¬å‘½ä»¤

```bash
# åˆ›å»ºæ–°é¡¹ç›®
wasm-pack new hello-wasm

# æ„å»º WASM æ¨¡å—
wasm-pack build --target web

# æµ‹è¯•
wasm-pack test --headless --firefox

# å‘å¸ƒ
wasm-pack publish
```

### ç›®æ ‡é€‰é¡¹

- `--target web`: Web æµè§ˆå™¨ç¯å¢ƒ
- `--target nodejs`: Node.js ç¯å¢ƒ
- `--target bundler`: Webpack/Rollup ç­‰æ‰“åŒ…å·¥å…·
- `--target no-modules`: ä¸ä½¿ç”¨ ES æ¨¡å—

---

## ğŸ”§ wasm-bindgen

### wasm-bindgen å®‰è£…

```bash
cargo install wasm-bindgen-cli
```

### wasm-bindgen åŸºæœ¬ç”¨æ³•

```bash
# ç”Ÿæˆç»‘å®šä»£ç 
wasm-bindgen target/wasm32-unknown-unknown/release/module.wasm \
  --out-dir pkg \
  --target web
```

---

## âš¡ wasm-opt

### wasm-opt å®‰è£…

```bash
npm install -g wasm-opt
```

### wasm-opt åŸºæœ¬ç”¨æ³•

```bash
# ä¼˜åŒ–å¤§å°
wasm-opt -Oz -o output.wasm input.wasm

# ä¼˜åŒ–æ€§èƒ½
wasm-opt -O3 -o output.wasm input.wasm
```

---

## ğŸš€ WasmEdge

### WasmEdge ç®€ä»‹

WasmEdge æ˜¯ä¸€ä¸ªè½»é‡çº§ã€é«˜æ€§èƒ½çš„ WebAssembly è¿è¡Œæ—¶ï¼Œä¸“é—¨ä¸ºäº‘åŸç”Ÿã€è¾¹ç¼˜è®¡ç®—å’Œå»ä¸­å¿ƒåŒ–åº”ç”¨è®¾è®¡ã€‚å®ƒå¯ä»¥åœ¨æœ¬åœ°æ“ä½œç³»ç»Ÿï¼ˆLinuxã€macOSã€Windowsï¼‰ä¸Šè¿è¡Œ WASM åº”ç”¨ç¨‹åºã€‚

**ç‰¹ç‚¹**:

- âœ… é«˜æ€§èƒ½æ‰§è¡Œï¼ˆæ¥è¿‘åŸç”Ÿé€Ÿåº¦ï¼‰
- âœ… æ”¯æŒ WASI æ ‡å‡†
- âœ… æ”¯æŒå¤šçº¿ç¨‹
- âœ… æ”¯æŒ TensorFlowã€OpenVINO ç­‰ AI æ¡†æ¶
- âœ… æ”¯æŒ JavaScript è¿è¡Œæ—¶ï¼ˆQuickJSï¼‰

### WasmEdge å®‰è£…

**Linux/macOS**:

```bash
curl -sSf https://raw.githubusercontent.com/WasmEdge/WasmEdge/master/utils/install.sh | bash
```

**Windows**:

```powershell
# ä½¿ç”¨ Chocolatey
choco install wasmedge

# æˆ–ä½¿ç”¨ GitHub Releases
# ä¸‹è½½ https://github.com/WasmEdge/WasmEdge/releases
```

**éªŒè¯å®‰è£…**:

```bash
wasmedge --version
wasmedgec --version
```

### WasmEdge åŸºæœ¬ç”¨æ³•

**è¿è¡Œ WASM åº”ç”¨ç¨‹åº**:

```bash
# ç›´æ¥è¿è¡Œ WASM æ–‡ä»¶
wasmedge your_app.wasm

# è¿è¡Œå¹¶ä¼ é€’å‚æ•°
wasmedge your_app.wasm arg1 arg2

# è¿è¡Œå¹¶è®¾ç½®ç¯å¢ƒå˜é‡
wasmedge --env "KEY=VALUE" your_app.wasm
```

**ç¼–è¯‘ä¼˜åŒ–**:

```bash
# ä½¿ç”¨ wasmedgec ç¼–è¯‘ä¸ºä¼˜åŒ–ç‰ˆæœ¬
wasmedgec your_app.wasm your_app.so

# è¿è¡Œä¼˜åŒ–ç‰ˆæœ¬ï¼ˆæ›´å¿«ï¼‰
wasmedge your_app.so
```

**ç›®å½•æŒ‚è½½**:

```bash
# æŒ‚è½½æœ¬åœ°ç›®å½•åˆ° WASM æ–‡ä»¶ç³»ç»Ÿ
wasmedge --dir .:/app your_app.wasm
```

**ç½‘ç»œè®¿é—®**:

```bash
# å…è®¸ç½‘ç»œè®¿é—®
wasmedge --allow-net your_app.wasm
```

### Rust ç¼–è¯‘åˆ° WASI

è¦ä½¿ç”¨ WasmEdge è¿è¡Œ Rust ç¨‹åºï¼Œéœ€è¦ç¼–è¯‘åˆ° `wasm32-wasi` ç›®æ ‡ï¼š

```bash
# æ·»åŠ  WASI ç›®æ ‡
rustup target add wasm32-wasi

# ç¼–è¯‘åˆ° WASI
cargo build --target wasm32-wasi --release

# ä½¿ç”¨ WasmEdge è¿è¡Œ
wasmedge target/wasm32-wasi/release/your_app.wasm
```

### WasmEdge é«˜çº§ç‰¹æ€§

**1. å¤šçº¿ç¨‹æ”¯æŒ**:

```bash
# å¯ç”¨å¤šçº¿ç¨‹
wasmedge --enable-threads your_app.wasm
```

**2. æ‰©å±•æ’ä»¶**:

```bash
# ä½¿ç”¨ WASI-NNï¼ˆç¥ç»ç½‘ç»œï¼‰æ’ä»¶
wasmedge --enable-wasi-nn your_app.wasm
```

**3. æ€§èƒ½ç›‘æ§**:

```bash
# å¯ç”¨æ€§èƒ½åˆ†æ
wasmedge --perf your_app.wasm
```

---

## ğŸ–¥ï¸ å…¶ä»–æœ¬åœ°è¿è¡Œæ—¶

### wasmtime

wasmtime æ˜¯å¦ä¸€ä¸ªæµè¡Œçš„ WASM è¿è¡Œæ—¶ï¼š

```bash
# å®‰è£…
curl https://wasmtime.dev/install.sh -sSf | bash

# è¿è¡Œ
wasmtime your_app.wasm

# è¿è¡Œå¹¶ä¼ é€’å‚æ•°
wasmtime run your_app.wasm -- arg1 arg2
```

### wasmer

wasmer æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ WASM è¿è¡Œæ—¶ï¼š

```bash
# å®‰è£…
curl https://get.wasmer.io -sSfL | sh

# è¿è¡Œ
wasmer run your_app.wasm

# ç¼–è¯‘ä¸ºåŸç”ŸäºŒè¿›åˆ¶
wasmer compile your_app.wasm -o your_app
```

---

## ğŸ“š ç›¸å…³èµ„æº

- [wasm-pack Book](https://rustwasm.github.io/docs/wasm-pack/)
- [wasm-bindgen Book](https://rustwasm.github.io/docs/wasm-bindgen/)
- [wasm-opt æ–‡æ¡£](https://github.com/WebAssembly/binaryen)
- [WasmEdge å®˜æ–¹æ–‡æ¡£](https://wasmedge.org/docs/)
- [wasmtime æ–‡æ¡£](https://docs.wasmtime.dev/)
- [wasmer æ–‡æ¡£](https://docs.wasmer.io/)

---

**æ–‡æ¡£ç»´æŠ¤**: Documentation Team
**åˆ›å»ºæ—¥æœŸ**: 2025-10-30
**é€‚ç”¨ç‰ˆæœ¬**: Rust 1.92.0+ / Edition 2024, WASM 2.0 + WASI 0.2
