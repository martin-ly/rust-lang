# Tier 3: 同步原语参考

> **文档类型**: 技术参考  
> **适用版本**: Rust 1.90+

---

## 核心同步原语

**互斥锁 (Mutex)**:

```rust
use std::sync::Mutex;

let data = Mutex::new(0);
let mut guard = data.lock().unwrap();
*guard += 1;
```

**读写锁 (RwLock)**:

```rust
use std::sync::RwLock;

let lock = RwLock::new(vec![1, 2, 3]);

// 多个读者
let r1 = lock.read().unwrap();
let r2 = lock.read().unwrap();

// 一个写者
let mut w = lock.write().unwrap();
w.push(4);
```

**条件变量 (Condvar)**:

```rust
use std::sync::{Mutex, Condvar};

let pair = (Mutex::new(false), Condvar::new());
let (lock, cvar) = &pair;

// 等待
let mut started = lock.lock().unwrap();
while !*started {
    started = cvar.wait(started).unwrap();
}

// 通知
let mut started = lock.lock().unwrap();
*started = true;
cvar.notify_one();
```

---

## 进程间同步

**文件锁**:

```rust
use std::fs::OpenOptions;
use fs2::FileExt;

let file = OpenOptions::new()
    .write(true)
    .open("lock.txt")?;

file.lock_exclusive()?;
// 临界区
file.unlock()?;
```

---

**参考**: [IPC通信实践](../tier_02_guides/02_IPC通信实践.md)

---

**文档维护**: Documentation Team  
**创建日期**: 2025-10-22
