# 风险评估矩阵

> **创建日期**: 2026-02-24
> **级别**: L1/L2
> **类型**: 风险矩阵

---

## 风险等级矩阵

| 风险项 | 概率 | 影响 | 等级 | 缓解措施 |
| :--- | :--- | :--- | :--- | :--- |
| 悬垂指针 | 低 | 高 | 🔴 高 | Borrow checker |
| 数据竞争 | 低 | 高 | 🔴 高 | Send/Sync约束 |
| 内存泄漏 | 中 | 中 | 🟡 中 | RAII + Weak引用 |
| 死锁 | 中 | 中 | 🟡 中 | 锁顺序约定 |
| 整数溢出 | 中 | 中 | 🟡 中 | checked算术 |
| 除零 | 低 | 高 | 🟡 中 | 前置检查 |
| 越界访问 | 低 | 高 | 🔴 高 | 边界检查 |

---

## 安全机制覆盖

| 风险 | 编译时 | 运行时 | 形式化验证 |
| :--- | :--- | :--- | :--- |
| 悬垂指针 | ✅ | ❌ | ✅ |
| 数据竞争 | ✅ | ❌ | ✅ |
| 内存泄漏 | ❌ | ❌ | 🔄 |
| 死锁 | ❌ | ❌ | 🔄 |
| 整数溢出 | ✅ | ✅ | ✅ |
| 除零 | ❌ | ✅ | ✅ |
| 越界访问 | ✅ | ✅ | ✅ |

---

## 代码模式风险

| 模式 | 风险等级 | 建议 |
| :--- | :--- | :--- |
| unsafe块 | 🔴 高 | 最小化使用 |
| Mutex持有 | 🟡 中 | 缩短持有时间 |
| Rc循环 | 🟡 中 | 使用Weak打破 |
| 递归 | 🟢 低 | 注意栈深度 |
| 大数组栈分配 | 🟡 中 | 使用Box/Vec |

---

## 缓解策略优先级

1. **P0**: 编译器保证 (所有权/借用/生命周期)
2. **P1**: 静态分析 (clippy/miri)
3. **P2**: 运行时检查 (assert/debug_assert)
4. **P3**: 形式化验证 (kani/coq)
5. **P4**: 代码审查 (人工检查)

---

**维护者**: Rust Formal Methods Research Team
**最后更新**: 2026-02-24
**状态**: ✅ 已完成 - 矩阵 16/12
