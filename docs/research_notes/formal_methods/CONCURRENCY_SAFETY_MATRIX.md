# 并发安全矩阵

> **创建日期**: 2026-02-24
> **级别**: L1/L2
> **类型**: 安全矩阵

---

## 类型安全矩阵

| 类型 | 跨线程移动 | 跨线程共享 | 要求 |
| :--- | :--- | :--- | :--- |
| `i32` | ✅ Send | ✅ Sync | 无时态依赖 |
| `String` | ✅ Send | ✅ Sync | 堆内存管理 |
| `Rc<T>` | ❌ | ❌ | 非原子计数 |
| `Arc<T>` | ✅ Send | ✅ Sync | 原子计数 |
| `RefCell<T>` | ✅ Send | ❌ | 运行时借用 |
| `Mutex<T>` | ✅ Send | ✅ Sync | 锁保护 |
| `Cell<T>` | ✅ Send | ❌ | 内部可变性 |
| `*const T` | ✅ Send | ✅ Sync | 原始指针 |

---

## 同步原语对比

| 原语 | 互斥 | 读写分离 | 条件变量 | 适用场景 |
| :--- | :--- | :--- | :--- | :--- |
| Mutex | ✅ | ❌ | ✅ | 通用互斥 |
| RwLock | ✅ | ✅ | ❌ | 多读少写 |
| Semaphore | ✅ | ❌ | ❌ | 资源限制 |
| Barrier | ❌ | ❌ | ❌ | 同步点 |
| Condvar | ❌ | ❌ | ✅ | 条件等待 |

---

## 通道类型对比

| 通道 | 多生产者 | 多消费者 | 缓冲 | 异步 |
| :--- | :--- | :--- | :--- | :--- |
| std::mpsc | ✅ | ❌ | ✅ | ❌ |
| crossbeam | ✅ | ✅ | ✅ | ❌ |
| tokio::sync | ✅ | ✅ | ✅ | ✅ |
| async-channel | ✅ | ✅ | ✅ | ✅ |

---

## 并发模式安全

| 模式 | 安全保证 | 风险 | 缓解 |
| :--- | :--- | :--- | :--- |
| 消息传递 | 无共享 | 死锁 | 超时 |
| 共享状态 | Mutex保护 | 死锁 | 锁顺序 |
| 原子操作 | 无锁 | ABA | CAS循环 |
| 无锁结构 | 内存序 | 复杂 | 专家审查 |

---

**维护者**: Rust Formal Methods Research Team
**最后更新**: 2026-02-24
**状态**: ✅ 已完成 - 矩阵 19/12
