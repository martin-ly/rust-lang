# 逻辑基础

> **创建日期**: 2026-02-28
> **最后更新**: 2026-02-28
> **状态**: ✅ 已完成
> **领域**: 形式化方法理论基础

---

## 概述

本文档建立Rust形式化方法所需的逻辑基础，包括命题逻辑、一阶逻辑、高阶逻辑和模态逻辑，为后续的分离逻辑和类型理论奠定严格的数学基础。

---

## 一、命题逻辑 (Propositional Logic)

### 1.1 语法

```
φ, ψ ::= ⊤ | ⊥ | P | ¬φ | φ ∧ ψ | φ ∨ ψ | φ → ψ | φ ↔ ψ
```

| 符号 | 名称 | 含义 |
| :--- | :--- | :--- |
| ⊤ | 真 | 恒真 |
| ⊥ | 假 | 恒假 |
| ¬ | 非 | 否定 |
| ∧ | 与 | 合取 |
| ∨ | 或 | 析取 |
| → | 蕴含 | 条件 |
| ↔ | 等价 | 双条件 |

### 1.2 自然演绎系统

**合取引入 (∧I)**:

```
Γ ⊢ φ    Γ ⊢ ψ
─────────────── (∧I)
   Γ ⊢ φ ∧ ψ
```

**合取消去 (∧E)**:

```
Γ ⊢ φ ∧ ψ          Γ ⊢ φ ∧ ψ
───────── (∧E₁)    ───────── (∧E₂)
  Γ ⊢ φ              Γ ⊢ ψ
```

**蕴含引入 (→I)**:

```
Γ, φ ⊢ ψ
──────── (→I)
Γ ⊢ φ → ψ
```

**蕴含消去/假言推理 (→E/MP)**:

```
Γ ⊢ φ → ψ    Γ ⊢ φ
─────────────────── (→E)
      Γ ⊢ ψ
```

### 1.3 在Rust形式化中的应用

**类型判断作为命题**:

```
Γ ⊢ e : T    (在上下文Γ中，表达式e具有类型T)
```

**示例**:

```
 x: i32 ⊢ x : i32
───────────────── (Var)
    ⊢ (λx.x) : i32 → i32
```

---

## 二、一阶逻辑 (First-Order Logic)

### 2.1 语法

```
项 t ::= x | f(t₁, ..., tₙ)
公式 φ ::= P(t₁, ..., tₙ) | ¬φ | φ ∧ ψ | φ ∨ ψ | φ → ψ | ∀x.φ | ∃x.φ
```

### 2.2 量词规则

**全称引入 (∀I)**:

```
Γ ⊢ φ(x)    x ∉ FV(Γ)
───────────────────── (∀I)
    Γ ⊢ ∀x.φ(x)
```

**全称消去 (∀E)**:

```
Γ ⊢ ∀x.φ(x)
─────────── (∀E)
Γ ⊢ φ(t)
```

**存在引入 (∃I)**:

```
Γ ⊢ φ(t)
───────── (∃I)
Γ ⊢ ∃x.φ(x)
```

**存在消去 (∃E)**:

```
Γ ⊢ ∃x.φ(x)    Γ, φ(y) ⊢ ψ    y ∉ FV(Γ, ψ)
────────────────────────────────────────── (∃E)
                Γ ⊢ ψ
```

### 2.3 在Rust形式化中的应用

**所有权唯一性**:

```
∀x.∀o₁.∀o₂. owns(x, o₁) ∧ owns(x, o₂) → o₁ = o₂
```

**借用规则**:

```
∀r. mutable(r) → ¬∃r'. r' ≠ r ∧ valid(r')
```

---

## 三、高阶逻辑 (Higher-Order Logic)

### 3.1 类型化λ演算

**简单类型**:

```
τ ::= ι | τ → τ
```

**项**:

```
e ::= x | λx:τ.e | e e
```

**类型判断**:

```
Γ, x:τ ⊢ e : τ'
──────────────── (→I)
Γ ⊢ λx:τ.e : τ → τ'

Γ ⊢ e₁ : τ → τ'    Γ ⊢ e₂ : τ
───────────────────────────── (→E)
        Γ ⊢ e₁ e₂ : τ'
```

### 3.2 在Rust形式化中的应用

**高阶类型**:

```rust
// Rust中的高阶函数对应高阶逻辑
fn map<F, T, U>(f: F, v: Vec<T>) -> Vec<U>
where F: Fn(T) -> U

// 逻辑表示: map : (T → U) → Vec<T> → Vec<U>
```

**类型构造器**:

```
Vec : Type → Type
Option : Type → Type
Result : Type → Type → Type
```

---

## 四、模态逻辑 (Modal Logic)

### 4.1 基本模态算子

**必然性 (□)**:

- □φ : "φ必然为真"
- 在所有可达世界中为真

**可能性 (◇)**:

- ◇φ : "φ可能为真"
- 在至少一个可达世界中为真

**关系**:

```
□φ ↔ ¬◇¬φ
◇φ ↔ ¬□¬φ
```

### 4.2 在程序验证中的应用

**霍尔逻辑**:

```
{P} C {Q}    (如果P成立，执行C后Q成立)
```

**时序逻辑**:

```
□safe    (程序始终安全)
◇terminates    (程序终将终止)
```

### 4.3 在Rust中的应用

**安全性保证**:

```
□(well-typed(program) → ¬data_race)
```

**终结合理性**:

```
◇(expr →* value)
```

---

## 五、等式逻辑

### 5.1 等式规则

**自反性**:

```
──────── (Refl)
Γ ⊢ t = t
```

**对称性**:

```
Γ ⊢ t₁ = t₂
─────────── (Sym)
Γ ⊢ t₂ = t₁
```

**传递性**:

```
Γ ⊢ t₁ = t₂    Γ ⊢ t₂ = t₃
───────────────────────── (Trans)
       Γ ⊢ t₁ = t₃
```

**替换**:

```
Γ ⊢ t₁ = t₂    Γ ⊢ φ(t₁)
─────────────────────── (Subst)
      Γ ⊢ φ(t₂)
```

### 5.2 在Rust形式化中的应用

**语义等价**:

```
e₁ ≅ e₂    (表达式e₁和e₂语义等价)
```

**类型相等**:

```
T₁ = T₂    (类型T₁和T₂相等)
```

---

## 六、归纳逻辑

### 6.1 结构归纳

**原理**: 要证明性质P对所有归纳定义的值成立，只需证明：

1. P对所有基础情形成立
2. 若P对子结构成立，则对构造情形也成立

**在Rust中的应用**:

**表达式求值**:

```
∀e. Γ ⊢ e : T → (∃v. e →* v)

证明: 对e的结构进行归纳
- 基础: e是值，已满足
- 归纳: e = e₁ op e₂，假设对e₁和e₂成立
```

### 6.2 自然数归纳

**原理**:

```
P(0)    ∀n. P(n) → P(n+1)
─────────────────────────
      ∀n. P(n)
```

**应用**: 证明迭代次数相关的性质

---

## 七、逻辑系统选择指南

| 逻辑系统 | 表达能力 |  decidability | 适用场景 |
| :--- | :--- | :--- | :--- |
| 命题逻辑 | 低 | 可判定 | 布尔推理 |
| 一阶逻辑 | 中 | 半可判定 | 一般推理 |
| 高阶逻辑 | 高 | 不可判定 | 类型理论 |
| 模态逻辑 | 中 | 可判定 | 时序性质 |
| 分离逻辑 | 高 | 不可判定 | 内存推理 |

---

## 八、与Rust形式化的联系

### 8.1 类型即命题

**Curry-Howard同构**:

```
类型 ≃ 命题
程序 ≃ 证明
```

**Rust示例**:

```rust
// T 对应 ⊤ (真)
fn unit() -> () { () }

// ! 对应 ⊥ (假)
fn diverge() -> ! { loop {} }

// Option<T> 对应 T ∨ ⊤
enum Option<T> {
    Some(T),  // T
    None,     // ⊤
}

// Result<T, E> 对应 T ∨ E
enum Result<T, E> {
    Ok(T),    // T
    Err(E),   // E
}
```

### 8.2 所有权即线性逻辑

**线性逻辑**:

```
A ⊗ B    (乘法合取，资源组合)
A ⊸ B    (线性蕴含，资源转换)
!A       (指数，可复制资源)
```

**Rust对应**:

```
ownership ≃ 线性类型
&mut T ≃ 独占资源
&T ≃ 可读资源
Copy ≃ !A (可复制)
```

---

**维护者**: Rust Formal Methods Research Team
**最后更新**: 2026-02-28
**状态**: ✅ 逻辑基础文档完成
