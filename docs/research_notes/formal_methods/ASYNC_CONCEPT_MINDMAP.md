# 异步编程概念思维导图

> **创建日期**: 2026-02-24
> **级别**: L1/L2
> **类型**: 思维导图

---

## 概念层次结构

```
                            异步编程概念
                                 │
            ┌────────────────────┼────────────────────┐
            │                    │                    │
       【核心概念】          【执行模型】          【关键抽象】
            │                    │                    │
    ┌───────┴───────┐    ┌───────┴───────┐    ┌───────┴───────┐
    │               │    │               │    │               │
  Future        async  轮询驱动         事件循环   Pin           Waker
    │            await   │               │      │               │
  ├─Pending       ├─挂起  ├─Poll          ├─调度  ├─固定内存地址   ├─唤醒机制
  ├─Ready         ├─恢复  ├─Ready         ├─回调  └─自引用结构     └─通知执行器
  └─State Machine └─状态机 └─Waker传递     └─驱动
```

---

## 核心概念详解

### Future trait

```rust
pub trait Future {
    type Output;
    fn poll(self: Pin<&mut Self>, cx: &mut Context<'_>) -> Poll<Self::Output>;
}
```

| 状态 | 含义 | 图示 |
| :--- | :--- | :--- |
| `Pending` | 未完成，等待中 | ⏳ |
| `Ready(T)` | 已完成，返回值 | ✅ |

---

## 执行器生态

```
执行器选择
├── tokio
│   ├── 多线程调度
│   ├── 网络/IO集成
│   └── 生产环境首选
│
├── async-std
│   ├── 标准库API风格
│   └── 简洁接口
│
└── smol
    ├── 轻量级
    └── 嵌入式友好
```

---

## Pin与自引用

```
Pin<P<T>>
├── 保证内存位置不变
├── 支持自引用结构
└── 与Unpin trait配合
```

| 类型 | 是否Unpin | 需要Pin |
| :--- | :---: | :---: |
| 普通类型 | 是 | 否 |
| 自引用结构 | 否 | 是 |

---

## 与其他概念的关系

```
异步编程
├── 借用检查 → Future lifetime约束
├── 所有权 → async move / async &self
├── Send/Sync → 跨线程任务调度
└── 并发 → 并行执行多个Future
```

---

## 学习路径

1. **L1**: 理解`async/await`语法
2. **L2**: 掌握`Pin<Waker>`机制
3. **L3**: 实现自定义Future

---

**维护者**: Rust Formal Methods Research Team
**最后更新**: 2026-02-24
**状态**: ✅ 已完成 - 思维导图 9/15
