# Facade å½¢å¼åŒ–åˆ†æ

> **åˆ›å»ºæ—¥æœŸ**: 2026-02-12
> **æœ€åæ›´æ–°**: 2026-02-20
> **Rust ç‰ˆæœ¬**: 1.93.0+ (Edition 2024)
> **çŠ¶æ€**: âœ… å·²å®Œæˆ
> **åˆ†ç±»**: ç»“æ„å‹
> **å®‰å…¨è¾¹ç•Œ**: çº¯ Safe
> **23 æ¨¡å¼çŸ©é˜µ**: [README Â§23 æ¨¡å¼å¤šç»´å¯¹æ¯”çŸ©é˜µ](../README.md#23-æ¨¡å¼å¤šç»´å¯¹æ¯”çŸ©é˜µ) ç¬¬ 10 è¡Œï¼ˆFacadeï¼‰
> **è¯æ˜æ·±åº¦**: L2ï¼ˆå®Œæ•´è¯æ˜è‰å›¾ï¼‰

---

## ğŸ“Š ç›®å½•

- [Facade å½¢å¼åŒ–åˆ†æ](#facade-å½¢å¼åŒ–åˆ†æ)
  - [ğŸ“Š ç›®å½•](#-ç›®å½•)
  - [å½¢å¼åŒ–å®šä¹‰](#å½¢å¼åŒ–å®šä¹‰)
    - [æ¦‚å¿µå®šä¹‰-å±æ€§å…³ç³»-è§£é‡Šè®ºè¯ å±‚æ¬¡æ±‡æ€»](#æ¦‚å¿µå®šä¹‰-å±æ€§å…³ç³»-è§£é‡Šè®ºè¯-å±‚æ¬¡æ±‡æ€»)
  - [Rust å®ç°ä¸ä»£ç ç¤ºä¾‹](#rust-å®ç°ä¸ä»£ç ç¤ºä¾‹)
  - [è¯æ˜æ€è·¯](#è¯æ˜æ€è·¯)
  - [å…¸å‹åœºæ™¯](#å…¸å‹åœºæ™¯)
  - [å®Œæ•´åœºæ™¯ç¤ºä¾‹ï¼šæ—¥å¿—ç³»ç»Ÿå¤–è§‚](#å®Œæ•´åœºæ™¯ç¤ºä¾‹æ—¥å¿—ç³»ç»Ÿå¤–è§‚)
  - [ç›¸å…³æ¨¡å¼](#ç›¸å…³æ¨¡å¼)
  - [å®ç°å˜ä½“](#å®ç°å˜ä½“)
  - [åä¾‹ï¼šå¤–è§‚æš´éœ²å­ç³»ç»Ÿç»†èŠ‚](#åä¾‹å¤–è§‚æš´éœ²å­ç³»ç»Ÿç»†èŠ‚)
  - [é€‰å‹å†³ç­–æ ‘](#é€‰å‹å†³ç­–æ ‘)
  - [ä¸ GoF å¯¹æ¯”](#ä¸-gof-å¯¹æ¯”)
  - [è¾¹ç•Œ](#è¾¹ç•Œ)
  - [ä¸ Rust 1.93 çš„å¯¹åº”](#ä¸-rust-193-çš„å¯¹åº”)
  - [å®è´¨å†…å®¹äº”ç»´è‡ªæ£€](#å®è´¨å†…å®¹äº”ç»´è‡ªæ£€)

---

## å½¢å¼åŒ–å®šä¹‰

**Def 1.1ï¼ˆFacade ç»“æ„ï¼‰**:

è®¾ $F$ ä¸ºå¤–è§‚ç±»å‹ï¼Œ$S_1, \ldots, S_n$ ä¸ºå­ç³»ç»Ÿç±»å‹ã€‚Facade æ»¡è¶³ï¼š

- $F$ æŒæœ‰æˆ–å¯è®¿é—® $S_1, \ldots, S_n$
- $\exists \mathit{simplified\_op} : F \to R$ï¼Œå°è£…å¯¹å­ç³»ç»Ÿçš„è°ƒç”¨åºåˆ—
- å®¢æˆ·ç«¯ä»…é€šè¿‡ $F$ çš„ `pub` æ–¹æ³•è®¿é—®ï¼›å­ç³»ç»Ÿå¯ç§æœ‰

**Axiom FA1**ï¼šå¤–è§‚ç®€åŒ–æ¥å£ï¼Œéšè—å­ç³»ç»Ÿå¤æ‚æ€§ã€‚

**Axiom FA2**ï¼šå¤–è§‚åè°ƒè°ƒç”¨é¡ºåºï¼›å­ç³»ç»Ÿé—´ä¾èµ–ç”± $F$ ç®¡ç†ã€‚

**å®šç† FA-T1**ï¼šæ¨¡å—ç³»ç»Ÿä¸ `pub` å¯è§æ€§ä¿è¯å°è£…è¾¹ç•Œã€‚ç”± Rust æ¨¡å—è¯­ä¹‰ã€‚

**æ¨è®º FA-C1**ï¼šFacade ä¸ºçº¯ Safeï¼›ä»…ç”¨ç»“æ„ä½“èšåˆã€ç§æœ‰å­—æ®µã€`pub fn` å§”æ‰˜ï¼Œæ—  `unsafe`ã€‚ç”± FA-T1 åŠ [safe_unsafe_matrix](../../05_boundary_system/safe_unsafe_matrix.md) SBM-T1ã€‚

### æ¦‚å¿µå®šä¹‰-å±æ€§å…³ç³»-è§£é‡Šè®ºè¯ å±‚æ¬¡æ±‡æ€»

| å±‚æ¬¡ | å†…å®¹ | æœ¬é¡µå¯¹åº” |
| :--- | :--- | :--- |
| **æ¦‚å¿µå®šä¹‰å±‚** | Def 1.1ï¼ˆFacade ç»“æ„ï¼‰ã€Axiom FA1/FA2ï¼ˆç®€åŒ–æ¥å£ã€åè°ƒè°ƒç”¨ï¼‰ | ä¸Š |
| **å±æ€§å…³ç³»å±‚** | Axiom FA1/FA2 â†’ å®šç† FA-T1 â†’ æ¨è®º FA-C1ï¼›ä¾èµ–æ¨¡å—è¯­ä¹‰ã€safe_unsafe_matrix | ä¸Š |
| **è§£é‡Šè®ºè¯å±‚** | è¯æ˜æ€è·¯ï¼šå°è£…è¾¹ç•Œï¼›åä¾‹ï¼šå¤–è§‚æš´éœ²å­ç³»ç»Ÿç»†èŠ‚ | Â§è¯æ˜æ€è·¯ã€Â§åä¾‹ |

---

## Rust å®ç°ä¸ä»£ç ç¤ºä¾‹

```rust
// å­ç³»ç»Ÿï¼ˆé€šå¸¸ä¸ºç§æœ‰æ¨¡å—ï¼‰
struct SubsystemA;
impl SubsystemA {
    fn operation_a(&self) -> String { "A".into() }
}

struct SubsystemB;
impl SubsystemB {
    fn operation_b(&self, s: &str) -> String {
        format!("B({})", s)
    }
}

// å¤–è§‚
pub struct Facade {
    a: SubsystemA,
    b: SubsystemB,
}

impl Facade {
    pub fn new() -> Self {
        Self {
            a: SubsystemA,
            b: SubsystemB,
        }
    }
    pub fn simplified_op(&self) -> String {
        let x = self.a.operation_a();
        self.b.operation_b(&x)
    }
}

// å®¢æˆ·ç«¯ä»…ä½¿ç”¨ Facade
let f = Facade::new();
assert_eq!(f.simplified_op(), "B(A)");
```

**å½¢å¼åŒ–å¯¹åº”**ï¼š`Facade` å³ $F$ï¼›`SubsystemA`ã€`SubsystemB` å³ $S_1$ã€$S_2$ï¼›`simplified_op` å³ $\mathit{simplified\_op}$ã€‚

---

## è¯æ˜æ€è·¯

1. **å°è£…**ï¼š`a`ã€`b` ä¸ºç§æœ‰å­—æ®µï¼›å®¢æˆ·ç«¯ä»…é€šè¿‡ `simplified_op` è®¿é—®ã€‚
2. **æ‰€æœ‰æƒ**ï¼š`Facade` æ‹¥æœ‰å­ç³»ç»Ÿï¼›`&self` å€Ÿç”¨ï¼Œå§”æ‰˜è°ƒç”¨åˆæ³•ã€‚

---

## å…¸å‹åœºæ™¯

| åœºæ™¯ | è¯´æ˜ |
| :--- | :--- |
| åº“/API ç®€åŒ– | å¤æ‚ SDK å°è£…ä¸ºç®€å•å…¥å£ |
| å­ç³»ç»Ÿåè°ƒ | ç¼–æ’å¤šä¸ªæ¨¡å—çš„è°ƒç”¨é¡ºåº |
| é—ç•™ç³»ç»Ÿ | å°è£…æ—§æ¥å£ä¸ºæ–°æ¥å£ |

---

## å®Œæ•´åœºæ™¯ç¤ºä¾‹ï¼šæ—¥å¿—ç³»ç»Ÿå¤–è§‚

**åœºæ™¯**ï¼šæ—¥å¿—éœ€ç»ç”±æ ¼å¼åŒ–ã€å†™å…¥ã€è½®è½¬ä¸‰ä¸ªå­ç³»ç»Ÿï¼›å®¢æˆ·ç«¯ä»…éœ€ `log(level, message)`ã€‚

```rust
mod formatter {
    pub(super) fn format(level: &str, msg: &str) -> String {
        format!("[{}] {}", level, msg)
    }
}

mod writer {
    pub(super) fn write(s: &str) { println!("{}", s); }
}

mod rotator {
    pub(super) fn maybe_rotate() { /* æŒ‰å¤§å°/æ—¶é—´è½®è½¬ */ }
}

pub struct LogFacade;

impl LogFacade {
    pub fn log(level: &str, msg: &str) {
        rotator::maybe_rotate();
        let formatted = formatter::format(level, msg);
        writer::write(&formatted);
    }
}

// å®¢æˆ·ç«¯ï¼šLogFacade::log("INFO", "started");
```

**å½¢å¼åŒ–å¯¹åº”**ï¼š`LogFacade` ä¸º $F$ï¼›formatterã€writerã€rotator ä¸ºç§æœ‰å­ç³»ç»Ÿï¼›`log` ä¸º $\mathit{simplified\_op}$ï¼›Axiom FA1 ç”± `pub(super)` éšè—å®ç°ä¿è¯ã€‚

---

## ç›¸å…³æ¨¡å¼

| æ¨¡å¼ | å…³ç³» |
| :--- | :--- |
| [Adapter](adapter.md) | Facade ç®€åŒ–å¤šæ¥å£ï¼›Adapter è½¬æ¢å•æ¥å£ |
| [Mediator](../03_behavioral/mediator.md) | Facade åè°ƒå­ç³»ç»Ÿï¼›Mediator åè°ƒåŒäº‹ |
| [Proxy](proxy.md) | Proxy å§”æ‰˜å•å¯¹è±¡ï¼›Facade èšåˆå¤šå¯¹è±¡ |

---

## å®ç°å˜ä½“

| å˜ä½“ | è¯´æ˜ | é€‚ç”¨ |
| :--- | :--- | :--- |
| ç»“æ„ä½“èšåˆ | `struct Facade { a: A, b: B }` | æŒæœ‰å­ç³»ç»Ÿ |
| æ¨¡å— | `mod facade { pub fn op() }` | å‡½æ•°çº§ç®€åŒ– |
| trait | `trait Facade { fn op(&self); }` | å¤šå®ç° |

---

## åä¾‹ï¼šå¤–è§‚æš´éœ²å­ç³»ç»Ÿç»†èŠ‚

**é”™è¯¯**ï¼šå¤–è§‚å°†å­ç³»ç»Ÿç±»å‹ä½œä¸º `pub` å­—æ®µæˆ–æ–¹æ³•å‚æ•°æš´éœ²ï¼Œç ´åå°è£…ã€‚

```rust
pub struct BadFacade {
    pub a: SubsystemA,  // æš´éœ²å†…éƒ¨ï¼Œå®¢æˆ·ç«¯å¯ç›´æ¥æ“ä½œ
}
```

**åæœ**ï¼šå®¢æˆ·ç«¯ä¾èµ–å­ç³»ç»Ÿï¼Œå¤–è§‚å¤±å»ç®€åŒ–æ¥å£çš„æ„ä¹‰ï¼›è¿å Axiom FA1ã€‚

---

## é€‰å‹å†³ç­–æ ‘

```text
éœ€è¦ç®€åŒ–å¤šå­ç³»ç»Ÿè°ƒç”¨ï¼Ÿ
â”œâ”€â”€ æ˜¯ â†’ ä»…åè°ƒè°ƒç”¨é¡ºåºï¼Ÿ â†’ Facadeï¼ˆç»“æ„ä½“èšåˆï¼‰
â”‚       â””â”€â”€ éœ€è°ƒè§£å¯¹è±¡é—´é€šä¿¡ï¼Ÿ â†’ Mediator
â”œâ”€â”€ è½¬æ¢å•æ¥å£ï¼Ÿ â†’ Adapter
â””â”€â”€ å§”æ‰˜å•å¯¹è±¡ï¼Ÿ â†’ Proxy
```

---

## ä¸ GoF å¯¹æ¯”

| GoF | Rust å¯¹åº” | å·®å¼‚ |
| :--- | :--- | :--- |
| å¤–è§‚ç±» | ç»“æ„ä½“æˆ–æ¨¡å— | ç­‰ä»· |
| å­ç³»ç»Ÿ | ç§æœ‰å­—æ®µ | å®Œå…¨ç­‰ä»· |
| ç®€åŒ–æ¥å£ | pub fn | ç­‰ä»· |

---

## è¾¹ç•Œ

| ç»´åº¦ | åˆ†ç±» |
| :--- | :--- |
| å®‰å…¨ | çº¯ Safe |
| æ”¯æŒ | åŸç”Ÿ |
| è¡¨è¾¾ | ç­‰ä»· |

---

## ä¸ Rust 1.93 çš„å¯¹åº”

| 1.93 ç‰¹æ€§ | ä¸æœ¬æ¨¡å¼ | è¯´æ˜ |
| :--- | :--- | :--- |
| æ— æ–°å¢å½±å“ | â€” | 1.93 æ— å½±å“ Facade è¯­ä¹‰çš„å˜æ›´ |
| 92 é¡¹è½ç‚¹ | æ—  | æœ¬æ¨¡å¼æœªæ¶‰åŠ [RUST_193_COUNTEREXAMPLES_INDEX](../../../RUST_193_COUNTEREXAMPLES_INDEX.md) ç‰¹å®šé¡¹ |

---

## å®è´¨å†…å®¹äº”ç»´è‡ªæ£€

| è‡ªæ£€é¡¹ | çŠ¶æ€ | è¯´æ˜ |
| :--- | :--- | :--- |
| å½¢å¼åŒ– | âœ… | Def 1.1ã€å®šç† FA-T1ï¼ˆL2ï¼‰ |
| ä»£ç  | âœ… | å¯è¿è¡Œç¤ºä¾‹ã€æ—¥å¿—å¤–è§‚ |
| åœºæ™¯ | âœ… | å…¸å‹åœºæ™¯ã€å®Œæ•´ç¤ºä¾‹ |
| åä¾‹ | âœ… | å¤–è§‚æš´éœ²å­ç³»ç»Ÿç»†èŠ‚ |
| è¡”æ¥ | âœ… | ownershipã€CE-T1 |
| æƒå¨å¯¹åº” | âœ… | [GoF](../README.md#ä¸-gof-åŸä¹¦å¯¹åº”)ã€[Fowler EAA](https://martinfowler.com/eaaCatalog/)ã€[formal_methods](../../../formal_methods/README.md) |
