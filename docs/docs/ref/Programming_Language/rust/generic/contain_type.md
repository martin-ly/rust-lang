# Rust 中的集合类型

Rust 提供了多种集合类型，包括以下几种：

- **线性集合**：
  - `Vec<T>`：动态数组，可以动态增长和缩小。它是基于连续内存存储的，适用于需要快速随机访问的场景。
  - `VecDeque<T>`：双端队列，允许在两端进行高效的插入和删除操作。
  - `LinkedList<T>`：双向链表，允许高效的插入和删除操作，但随机访问较慢。
  - `BinaryHeap<T>`：二叉堆，支持高效的最小值或最大值检索和删除操作。

- **关联集合**：
  - `HashMap<K, V>`：哈希映射，允许以平均 O(1) 的时间复杂度进行键值对的插入、删除和查找操作。
  - `BTreeMap<K, V>`：基于 B 树的映射，提供键的有序性，支持以 O(log n) 的时间复杂度进行插入、删除和查找操作。

- **无序集合**：
  - `HashSet<T>`：哈希集合，基于哈希表实现，允许快速的元素存在性检查。
  - `BTreeSet<T>`：基于 B 树的集合，提供元素的有序性，支持排序和范围操作。

## 目录

- [Rust 中的集合类型](#rust-中的集合类型)
  - [目录](#目录)
  - [遵守的 trait](#遵守的-trait)
  - [如何统一看待这些类型](#如何统一看待这些类型)

## 遵守的 trait

Rust 的集合类型通常遵守以下 trait：

- **`From`**：允许从其他数据结构创建集合类型。例如，`Vec<T>` 实现了 `From<[T]>`，可以将一个固定大小的数组转换为 `Vec<T>`。
- **`Default`**：允许创建一个空的集合对象。例如，可以通过 `Vec::default()` 创建一个空的动态数组。
- **`Iterator`**：提供了集合的遍历能力。集合类型通常通过 `into_iter`、`iter` 和 `iter_mut` 方法实现迭代器。
- **`Extend`**：允许将多个元素扩展到集合中。例如，`Vec<T>` 实现了 `Extend<T>`，可以使用 `extend(iter)` 将多个元素添加到动态数组中。
- **`IntoIterator`**：允许集合类型被用作迭代器。这使得集合类型可以被用于 `for` 循环等迭代操作。
- **`Clone` 和 `Copy`**：允许集合类型的浅拷贝和深拷贝操作。例如，`Vec<T>` 实现了 `Clone`，可以创建一个新的动态数组，包含与原数组相同的元素。

## 如何统一看待这些类型

尽管 Rust 的集合类型具有不同的实现和性能特征，但它们都共享一些共同的 trait 和设计原则，可以从以下几个方面统一看待这些类型：

- **目的**：它们都旨在高效地存储和管理各种类型的数据。无论是线性集合、关联集合还是无序集合，Rust 的集合类型都提供了一种灵活且高效的方式来组织和操作数据。

- **所有权和借用**：集合类型拥有存储在其内部的数据。所有权由集合对象持有，可以通过引用或借用的方式访问集合中的元素。
- 例如，`Vec<T>` 拥有其元素的所有权，通过 `&Vec<T>` 可以获取集合的不可变引用，通过 `&mut Vec<T>` 可以获取可变引用。

- **API 设计**：Rust 的集合类型通常提供一致的 API，使得用户可以轻松地理解如何与它们交互。
- 它们都支持常见的集合操作，如插入、删除、查找和遍历。例如，`Vec<T>`、`LinkedList<T>` 和 `VecDeque<T>` 都提供了 `push` 和 `pop` 方法来添加和删除元素。

- **迭代能力**：所有集合类型都实现了 `IntoIterator` trait，这意味着它们都可以被用于迭代操作。
- 无论集合的底层实现如何，都可以通过迭代器访问和处理集合中的元素。例如，可以使用 `for` 循环遍历 `Vec<T>`、`HashMap<K, V>` 和 `HashSet<T>` 中的元素。

- **可扩展性**：集合类型的设计也考虑到了可扩展性。开发人员可以通过实现自定义的集合类型或扩展现有的集合类型来满足特定的需求。
- 例如，可以创建一个自定义的链表类型，继承 `LinkedList<T>` 的部分功能并添加自定义的实现。
