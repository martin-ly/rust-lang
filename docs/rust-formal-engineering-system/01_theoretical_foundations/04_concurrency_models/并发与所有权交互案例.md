# å¹¶å‘ä¸æ‰€æœ‰æƒäº¤äº’æ¡ˆä¾‹

> **åˆ›å»ºæ—¥æœŸ**: 2025-11-11
> **æœ€åæ›´æ–°**: 2025-11-11
> **Rust ç‰ˆæœ¬**: 1.91.0 (Edition 2024) âœ…
> **çŠ¶æ€**: å·²å®Œå–„ âœ…

---

## ğŸ“Š ç›®å½•

- [å¹¶å‘ä¸æ‰€æœ‰æƒäº¤äº’æ¡ˆä¾‹](#å¹¶å‘ä¸æ‰€æœ‰æƒäº¤äº’æ¡ˆä¾‹)
  - [ğŸ“Š ç›®å½•](#-ç›®å½•)
  - [1. è·¨çº¿ç¨‹æ‰€æœ‰æƒç§»åŠ¨](#1-è·¨çº¿ç¨‹æ‰€æœ‰æƒç§»åŠ¨)
  - [2. ç”Ÿå‘½å‘¨æœŸä¸å€Ÿç”¨](#2-ç”Ÿå‘½å‘¨æœŸä¸å€Ÿç”¨)
  - [3. Arc/Mutexè·¨çº¿ç¨‹å…±äº«](#3-arcmutexè·¨çº¿ç¨‹å…±äº«)
  - [4. åä¾‹ä¸è¾¹ç•Œ](#4-åä¾‹ä¸è¾¹ç•Œ)
  - [5. è‡ªåŠ¨åŒ–æ£€æµ‹ä¸å·¥ç¨‹ç»éªŒ](#5-è‡ªåŠ¨åŒ–æ£€æµ‹ä¸å·¥ç¨‹ç»éªŒ)

## 1. è·¨çº¿ç¨‹æ‰€æœ‰æƒç§»åŠ¨

- ä»£ç ç¤ºä¾‹ï¼š

```rust
use std::thread;
let v = vec![1, 2, 3];
let handle = thread::spawn(move || {
    println!("{:?}", v);
});
handle.join().unwrap();
```

- è¯´æ˜ï¼šé€šè¿‡moveé—­åŒ…å°†æ‰€æœ‰æƒç§»åŠ¨åˆ°æ–°çº¿ç¨‹ã€‚
- ç†è®ºåˆ†æï¼šSend traitä¿è¯å®‰å…¨ç§»åŠ¨ã€‚
- å·¥ç¨‹å®è·µï¼šé¿å…æ‚¬å‚å¼•ç”¨ã€‚

## 2. ç”Ÿå‘½å‘¨æœŸä¸å€Ÿç”¨

- ä»£ç ç¤ºä¾‹ï¼š

```rust
use std::thread;
let r = &10;
let handle = thread::spawn(move || {
    println!("{}", r);
});
handle.join().unwrap(); // ç¼–è¯‘é”™è¯¯ï¼šrçš„ç”Ÿå‘½å‘¨æœŸä¸æ»¡è¶³Send
```

- è¯´æ˜ï¼šå€Ÿç”¨çš„ç”Ÿå‘½å‘¨æœŸéœ€æ»¡è¶³Sendã€‚
- ç†è®ºåˆ†æï¼šç”Ÿå‘½å‘¨æœŸä¸Send/SyncååŒã€‚
- å·¥ç¨‹å®è·µï¼šé¿å…æ‚¬å‚å¼•ç”¨ã€æ•°æ®ç«äº‰ã€‚

## 3. Arc/Mutexè·¨çº¿ç¨‹å…±äº«

- ä»£ç ç¤ºä¾‹ï¼š

```rust
use std::sync::{Arc, Mutex};
use std::thread;
let data = Arc::new(Mutex::new(0));
let mut handles = vec![];
for _ in 0..10 {
    let data = data.clone();
    handles.push(thread::spawn(move || {
        let mut num = data.lock().unwrap();
        *num += 1;
    }));
}
for h in handles { h.join().unwrap(); }
```

- è¯´æ˜ï¼šArcå®ç°å¤šçº¿ç¨‹å®‰å…¨å…±äº«ï¼ŒMutexä¿è¯äº’æ–¥ã€‚
- ç†è®ºåˆ†æï¼š`Arc<T>`: Send+Sync, `Mutex<T>`: Send+Syncã€‚
- å·¥ç¨‹å®è·µï¼šé¿å…æ­»é”ã€æ•°æ®ç«äº‰ã€‚

## 4. åä¾‹ä¸è¾¹ç•Œ

- `Rc<T>`ã€`RefCell<T>`è·¨çº¿ç¨‹ä½¿ç”¨å¯¼è‡´æœªå®ç°Send/Syncï¼Œç¼–è¯‘æŠ¥é”™ã€‚
- å…¸å‹åä¾‹ï¼š

```rust
use std::rc::Rc;
use std::thread;
let rc = Rc::new(1);
thread::spawn(move || {
    println!("{}", rc);
}); // ç¼–è¯‘é”™è¯¯ï¼šRc<T>æœªå®ç°Send
```

## 5. è‡ªåŠ¨åŒ–æ£€æµ‹ä¸å·¥ç¨‹ç»éªŒ

- è‡ªåŠ¨åŒ–æ£€æµ‹å·¥å…·ï¼šPoloniusã€Loomã€MIR borrow checkerã€‚
- å·¥ç¨‹ç»éªŒï¼šåˆç†ä½¿ç”¨Arc/Mutexã€ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€CIé›†æˆã€‚

---

> æœ¬æ–‡æ¡£å°†æŒç»­é€’å½’è¡¥å……ï¼Œæ¬¢è¿ç»“åˆæœ€æ–°ç†è®ºã€å·¥ç¨‹æ¡ˆä¾‹ã€è‡ªåŠ¨åŒ–å·¥å…·ã€åä¾‹ä¸å‰æ²¿è¶‹åŠ¿é€’äº¤è¡¥å……ï¼Œæ¨åŠ¨Rustå¹¶å‘ä¸æ‰€æœ‰æƒäº¤äº’æ¡ˆä¾‹ä½“ç³»ä¸æ–­è¿›åŒ–ã€‚

"

---
