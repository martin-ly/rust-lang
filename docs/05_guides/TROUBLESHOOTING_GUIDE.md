# æ•…éšœæ’æŸ¥æŒ‡å—

**åˆ›å»ºæ—¥æœŸ**: 2025-12-11
**æœ€åæ›´æ–°**: 2026-01-26
**Rust ç‰ˆæœ¬**: 1.93.0+
**Edition**: 2024

---

## ğŸ“‹ ç›®å½•

- [æ•…éšœæ’æŸ¥æŒ‡å—](#æ•…éšœæ’æŸ¥æŒ‡å—)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [ğŸ“‹ æ¦‚è¿°](#-æ¦‚è¿°)
  - [ğŸ”§ ç¼–è¯‘é”™è¯¯](#-ç¼–è¯‘é”™è¯¯)
    - [1. æ‰€æœ‰æƒé”™è¯¯](#1-æ‰€æœ‰æƒé”™è¯¯)
    - [2. ç”Ÿå‘½å‘¨æœŸé”™è¯¯](#2-ç”Ÿå‘½å‘¨æœŸé”™è¯¯)
    - [3. ç±»å‹ä¸åŒ¹é…](#3-ç±»å‹ä¸åŒ¹é…)
  - [ğŸ› è¿è¡Œæ—¶é”™è¯¯](#-è¿è¡Œæ—¶é”™è¯¯)
    - [1. Panic é”™è¯¯](#1-panic-é”™è¯¯)
    - [2. æ­»é”](#2-æ­»é”)
    - [3. å†…å­˜æ³„æ¼](#3-å†…å­˜æ³„æ¼)
  - [âš¡ æ€§èƒ½é—®é¢˜](#-æ€§èƒ½é—®é¢˜)
    - [1. ç¼–è¯‘æ—¶é—´è¿‡é•¿](#1-ç¼–è¯‘æ—¶é—´è¿‡é•¿)
    - [2. è¿è¡Œæ—¶æ€§èƒ½é—®é¢˜](#2-è¿è¡Œæ—¶æ€§èƒ½é—®é¢˜)
  - [ğŸ”Œ ç½‘ç»œé—®é¢˜](#-ç½‘ç»œé—®é¢˜)
    - [1. è¿æ¥è¶…æ—¶](#1-è¿æ¥è¶…æ—¶)
    - [2. DNS è§£æå¤±è´¥](#2-dns-è§£æå¤±è´¥)
  - [ğŸ§ª æµ‹è¯•é—®é¢˜](#-æµ‹è¯•é—®é¢˜)
    - [1. æµ‹è¯•å¤±è´¥](#1-æµ‹è¯•å¤±è´¥)
    - [2. å¼‚æ­¥æµ‹è¯•é—®é¢˜](#2-å¼‚æ­¥æµ‹è¯•é—®é¢˜)
  - [ğŸ“š è°ƒè¯•æŠ€å·§](#-è°ƒè¯•æŠ€å·§)
    - [1. ä½¿ç”¨ println](#1-ä½¿ç”¨-println)
    - [2. ä½¿ç”¨ dbg! å®](#2-ä½¿ç”¨-dbg-å®)
    - [3. ä½¿ç”¨è°ƒè¯•å™¨](#3-ä½¿ç”¨è°ƒè¯•å™¨)
    - [4. ä½¿ç”¨æ—¥å¿—](#4-ä½¿ç”¨æ—¥å¿—)
  - [ğŸ” å¸¸è§é—®é¢˜ FAQ](#-å¸¸è§é—®é¢˜-faq)
    - [Q: å¦‚ä½•æŸ¥çœ‹è¯¦ç»†çš„ç¼–è¯‘é”™è¯¯ï¼Ÿ](#q-å¦‚ä½•æŸ¥çœ‹è¯¦ç»†çš„ç¼–è¯‘é”™è¯¯)
    - [Q: å¦‚ä½•æ¸…ç†ç¼–è¯‘ç¼“å­˜ï¼Ÿ](#q-å¦‚ä½•æ¸…ç†ç¼–è¯‘ç¼“å­˜)
    - [Q: å¦‚ä½•æ›´æ–°ä¾èµ–ï¼Ÿ](#q-å¦‚ä½•æ›´æ–°ä¾èµ–)
    - [Q: å¦‚ä½•æŸ¥çœ‹ä¾èµ–æ ‘ï¼Ÿ](#q-å¦‚ä½•æŸ¥çœ‹ä¾èµ–æ ‘)
  - [é”™è¯¯ç å¿«é€ŸæŸ¥æ‰¾](#é”™è¯¯ç å¿«é€ŸæŸ¥æ‰¾)
  - [ğŸ“š ç›¸å…³èµ„æº](#-ç›¸å…³èµ„æº)

---

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›å¸¸è§é—®é¢˜çš„æ’æŸ¥å’Œè§£å†³æ–¹æ¡ˆï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜ã€‚

---

## ğŸ”§ ç¼–è¯‘é”™è¯¯

### 1. æ‰€æœ‰æƒé”™è¯¯

**é”™è¯¯ä¿¡æ¯**:

```text
error[E0382]: borrow of moved value: `x`
```

**åŸå› **: å€¼è¢«ç§»åŠ¨åå†æ¬¡ä½¿ç”¨

**è§£å†³æ–¹æ¡ˆ**:

```rust
// âŒ é”™è¯¯
let x = String::from("hello");
let y = x;  // x è¢«ç§»åŠ¨
println!("{}", x);  // é”™è¯¯ï¼

// âœ… æ­£ç¡®
let x = String::from("hello");
let y = x.clone();  // å…‹éš†è€Œéç§»åŠ¨
println!("{}", x);

// æˆ–ä½¿ç”¨å¼•ç”¨
let x = String::from("hello");
let y = &x;  // å€Ÿç”¨è€Œéç§»åŠ¨
println!("{}", x);
```

### 2. ç”Ÿå‘½å‘¨æœŸé”™è¯¯

**é”™è¯¯ä¿¡æ¯**:

```text
error[E0597]: `x` does not live long enough
```

**åŸå› **: å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸä¸å¤Ÿé•¿

**è§£å†³æ–¹æ¡ˆ**:

```rust
// âŒ é”™è¯¯
fn get_ref() -> &str {
    let s = String::from("hello");
    &s  // s åœ¨å‡½æ•°ç»“æŸæ—¶è¢«ä¸¢å¼ƒ
}

// âœ… æ­£ç¡®
fn get_ref() -> String {
    let s = String::from("hello");
    s  // è¿”å›æ‰€æœ‰æƒ
}

// æˆ–ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸå‚æ•°
fn get_ref<'a>(s: &'a str) -> &'a str {
    s
}
```

### 3. ç±»å‹ä¸åŒ¹é…

**é”™è¯¯ä¿¡æ¯**:

```
error[E0308]: mismatched types
```

**åŸå› **: ç±»å‹ä¸åŒ¹é…

**è§£å†³æ–¹æ¡ˆ**:

```rust
// âŒ é”™è¯¯
let x: i32 = "42".parse().unwrap();  // éœ€è¦æŒ‡å®šç±»å‹

// âœ… æ­£ç¡®
let x: i32 = "42".parse().unwrap();
// æˆ–
let x = "42".parse::<i32>().unwrap();
```

---

## ğŸ› è¿è¡Œæ—¶é”™è¯¯

### 1. Panic é”™è¯¯

**é”™è¯¯ä¿¡æ¯**:

```
thread 'main' panicked at 'index out of bounds'
```

**åŸå› **: æ•°ç»„è¶Šç•Œè®¿é—®

**è§£å†³æ–¹æ¡ˆ**:

```rust
// âŒ é”™è¯¯
let arr = [1, 2, 3];
let value = arr[10];  // panic!

// âœ… æ­£ç¡®
let arr = [1, 2, 3];
if let Some(value) = arr.get(10) {
    // å®‰å…¨è®¿é—®
} else {
    // å¤„ç†è¶Šç•Œæƒ…å†µ
}
```

### 2. æ­»é”

**ç—‡çŠ¶**: ç¨‹åºæŒ‚èµ·ï¼Œæ— å“åº”

**åŸå› **: å¤šä¸ªé”çš„è·å–é¡ºåºä¸ä¸€è‡´

**è§£å†³æ–¹æ¡ˆ**:

```rust
// âŒ å¯èƒ½å¯¼è‡´æ­»é”
let mutex1 = Arc::new(Mutex::new(0));
let mutex2 = Arc::new(Mutex::new(0));

// çº¿ç¨‹1: å…ˆé” mutex1ï¼Œå†é” mutex2
// çº¿ç¨‹2: å…ˆé” mutex2ï¼Œå†é” mutex1

// âœ… è§£å†³æ–¹æ¡ˆï¼šç»Ÿä¸€é”çš„é¡ºåº
// æ‰€æœ‰çº¿ç¨‹éƒ½æŒ‰ç›¸åŒé¡ºåºè·å–é”
```

### 3. å†…å­˜æ³„æ¼

**ç—‡çŠ¶**: å†…å­˜ä½¿ç”¨æŒç»­å¢é•¿

**åŸå› **: å¾ªç¯å¼•ç”¨ï¼ˆRcï¼‰æˆ–æœªé‡Šæ”¾èµ„æº

**è§£å†³æ–¹æ¡ˆ**:

```rust
// âŒ å¾ªç¯å¼•ç”¨
use std::rc::Rc;
use std::cell::RefCell;

struct Node {
    next: Option<Rc<RefCell<Node>>>,
}

// âœ… ä½¿ç”¨ Weak æ‰“ç ´å¾ªç¯
use std::rc::{Rc, Weak};

struct Node {
    next: Option<Weak<RefCell<Node>>>,
}
```

---

## âš¡ æ€§èƒ½é—®é¢˜

### 1. ç¼–è¯‘æ—¶é—´è¿‡é•¿

**åŸå› **: ä¾èµ–è¿‡å¤šæˆ–ä»£ç ç»“æ„é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**:

```toml
# Cargo.toml
[profile.dev]
incremental = true  # å¯ç”¨å¢é‡ç¼–è¯‘

# ä½¿ç”¨ workspace ä¾èµ–
[dependencies]
serde = { workspace = true }
```

### 2. è¿è¡Œæ—¶æ€§èƒ½é—®é¢˜

**è¯Šæ–­å·¥å…·**:

```bash
# ä½¿ç”¨ perf (Linux)
perf record --call-graph=dwarf ./target/release/my_app
perf report

# ä½¿ç”¨ cargo-flamegraph
cargo flamegraph --bin my_app
```

**ä¼˜åŒ–æŠ€å·§**:

- ä½¿ç”¨ `release` æ¨¡å¼ç¼–è¯‘
- å¯ç”¨ LTOï¼ˆLink Time Optimizationï¼‰
- ä½¿ç”¨ `Vec::with_capacity` é¢„åˆ†é…
- é¿å…ä¸å¿…è¦çš„å…‹éš†

---

## ğŸ”Œ ç½‘ç»œé—®é¢˜

### 1. è¿æ¥è¶…æ—¶

**é”™è¯¯ä¿¡æ¯**:

```
error: timeout while waiting for connection
```

**è§£å†³æ–¹æ¡ˆ**:

```rust
use tokio::time::{timeout, Duration};

// è®¾ç½®è¶…æ—¶
match timeout(Duration::from_secs(5), connect()).await {
    Ok(result) => result?,
    Err(_) => {
        eprintln!("è¿æ¥è¶…æ—¶");
        // å¤„ç†è¶…æ—¶
    }
}
```

### 2. DNS è§£æå¤±è´¥

**é”™è¯¯ä¿¡æ¯**:

```
error: failed to resolve hostname
```

**Rust 1.93 æ”¹è¿›**ï¼šRust 1.93 æ›´æ–°äº† musl åˆ° 1.2.5ï¼Œæ˜¾è‘—æ”¹è¿›äº† DNS è§£æå™¨çš„å¯é æ€§ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤§å‹ DNS è®°å½•å’Œé€’å½’åç§°æœåŠ¡å™¨ã€‚å¦‚æœä½¿ç”¨ musl ç›®æ ‡ï¼Œå‡çº§åˆ° Rust 1.93 å¯ä»¥è§£å†³è®¸å¤š DNS è§£æé—®é¢˜ã€‚

**è§£å†³æ–¹æ¡ˆ**:

```rust
use std::net::TcpStream;

// Rust 1.93+ (musl 1.2.5) æ”¹è¿›äº† DNS è§£æ
// å¯¹äºé™æ€é“¾æ¥çš„ musl äºŒè¿›åˆ¶æ–‡ä»¶ï¼ŒDNS è§£ææ›´å¯é 
let stream = TcpStream::connect("example.com:80")?;

// æˆ–è€…ä½¿ç”¨å¼‚æ­¥ DNS è§£æ
use tokio::net::TcpStream;

let stream = TcpStream::connect("example.com:80").await?;
```

**å¦‚æœä»é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥æ·»åŠ é‡è¯•æœºåˆ¶**:

```rust
use std::net::TcpStream;
use std::time::Duration;

// æ·»åŠ é‡è¯•æœºåˆ¶
let mut retries = 3;
while retries > 0 {
    match TcpStream::connect_timeout(
        &"example.com:80".parse()?,
        Duration::from_secs(5)
    ) {
        Ok(stream) => {
            println!("è¿æ¥æˆåŠŸ");
            break;
        }
        Err(e) => {
            retries -= 1;
            if retries == 0 {
                return Err(e);
            }
            std::thread::sleep(Duration::from_secs(1));
        }
    }
}
```

**musl 1.2.5 æ”¹è¿›è¯´æ˜**ï¼ˆRust 1.93+ï¼‰ï¼š

- æ”¹è¿›äº† DNS è§£æå™¨ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤§å‹ DNS è®°å½•
- æ›´å¥½åœ°å¤„ç†é€’å½’åç§°æœåŠ¡å™¨
- æé«˜äº†é™æ€é“¾æ¥ musl äºŒè¿›åˆ¶æ–‡ä»¶çš„ç½‘ç»œå¯é æ€§

**å…¼å®¹æ€§æ£€æŸ¥**ï¼š

- ç¡®ä¿ä½¿ç”¨ libc >= 0.2.146ï¼ˆå¦‚æœä½¿ç”¨ musl ç›®æ ‡ï¼‰

**å‡çº§å»ºè®®**ï¼š

- å¦‚æœä½¿ç”¨ musl ç›®æ ‡ä¸”é‡åˆ° DNS è§£æé—®é¢˜ï¼Œå¼ºçƒˆå»ºè®®å‡çº§åˆ° Rust 1.93.0+

---

## ğŸ§ª æµ‹è¯•é—®é¢˜

### 1. æµ‹è¯•å¤±è´¥

**è¯Šæ–­æ­¥éª¤**:

1. æ£€æŸ¥æµ‹è¯•è¾“å‡º
2. è¿è¡Œå•ä¸ªæµ‹è¯•: `cargo test test_name`
3. å¯ç”¨è¯¦ç»†è¾“å‡º: `cargo test -- --nocapture`
4. æ£€æŸ¥æµ‹è¯•ç¯å¢ƒ

### 2. å¼‚æ­¥æµ‹è¯•é—®é¢˜

**é”™è¯¯ä¿¡æ¯**:

```
error: future cannot be sent between threads safely
```

**è§£å†³æ–¹æ¡ˆ**:

```rust
// âœ… ç¡®ä¿ Future æ˜¯ Send
#[tokio::test]
async fn test_async() {
    // ä½¿ç”¨ Arc è€Œé Rc
    let data = Arc::new(Mutex::new(0));
    // ...
}
```

---

## ğŸ“š è°ƒè¯•æŠ€å·§

### 1. ä½¿ç”¨ println

```rust
println!("è°ƒè¯•ä¿¡æ¯: {:?}", value);
```

### 2. ä½¿ç”¨ dbg! å®

```rust
let value = dbg!(calculate_value());
```

### 3. ä½¿ç”¨è°ƒè¯•å™¨

```bash
# ä½¿ç”¨ gdb
gdb ./target/debug/my_app

# ä½¿ç”¨ lldb (macOS)
lldb ./target/debug/my_app
```

### 4. ä½¿ç”¨æ—¥å¿—

```rust
use tracing::{info, error, warn};

info!("ä¿¡æ¯: {}", value);
warn!("è­¦å‘Š: {}", value);
error!("é”™è¯¯: {}", value);
```

---

## ğŸ” å¸¸è§é—®é¢˜ FAQ

### Q: å¦‚ä½•æŸ¥çœ‹è¯¦ç»†çš„ç¼–è¯‘é”™è¯¯ï¼Ÿ

A: ä½¿ç”¨ `cargo build --verbose` æˆ– `RUST_BACKTRACE=1 cargo run`

### Q: å¦‚ä½•æ¸…ç†ç¼–è¯‘ç¼“å­˜ï¼Ÿ

A: ä½¿ç”¨ `cargo clean` æ¸…ç†æ‰€æœ‰ç¼–è¯‘äº§ç‰©

### Q: å¦‚ä½•æ›´æ–°ä¾èµ–ï¼Ÿ

A: ä½¿ç”¨ `cargo update` æ›´æ–°ä¾èµ–ç‰ˆæœ¬

### Q: å¦‚ä½•æŸ¥çœ‹ä¾èµ–æ ‘ï¼Ÿ

A: ä½¿ç”¨ `cargo tree` æŸ¥çœ‹ä¾èµ–å…³ç³»

---

## é”™è¯¯ç å¿«é€ŸæŸ¥æ‰¾

å¸¸è§é”™è¯¯ç  â†’ æœ¬é¡¹ç›®æ–‡æ¡£æ˜ å°„è§ [ERROR_CODE_MAPPING.md](../02_reference/ERROR_CODE_MAPPING.md)ã€‚

---

## ğŸ“š ç›¸å…³èµ„æº

- [Rust é”™è¯¯ç´¢å¼•](https://doc.rust-lang.org/error-index.html)
- [Rust å¸¸è§é—®é¢˜](https://doc.rust-lang.org/book/appendix-06-translation.html)
- [Rust æ€§èƒ½ä¹¦](https://nnethercote.github.io/perf-book/)

---

**ç»´æŠ¤è€…**: Rust å­¦ä¹ é¡¹ç›®å›¢é˜Ÿ
**çŠ¶æ€**: âœ… æŒç»­æ›´æ–°
**æœ€åæ›´æ–°**: 2026-01-26
