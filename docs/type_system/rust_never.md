# `!`类型 never type

在 Rust 中，`!` 类型被称为 "never" 类型，它代表一个永远不会发生的值。
这个类型通常与那些永远不会返回的函数一起使用，比如那些会一直循环或者最终导致程序崩溃的函数。

## 定义

`!` 类型没有直接的定义，因为它不是一个常规的类型。
它是 Rust 编译器内置的，用来表示一个函数没有返回值。
当一个函数使用 `!` 作为返回类型时，
它告诉 Rust 编译器这个函数会无限期地运行下去，或者在某个点上以其他方式终止。

## 使用场景

### 1. **无限循环**：当一个函数需要无限循环时，可以使用 `!` 类型作为返回值

```rust
fn infinite_loop() -> ! {
    loop {}
}
```

### 2. **错误处理**：在某些情况下，函数可能会遇到错误情况并立即退出，使用 `!` 可以表示这种情况

```rust
fn might_panic(a: i32, b: i32) -> ! {
    assert!(a != 0, "Division by zero");
    b / a
}
```

### 3. **异步编程**：在异步编程中，`!` 类型用于表示一个 `Future` 可能永远不会完成

```rust
async fn async_infinite_loop() -> ! {
    loop {
        // 无限循环的异步操作
    }
}
```

## 特点

- `!` 类型是 Rust 中唯一的一个没有大小的类型。
- 它不能被实例化或存储在内存中。
- 它不能被传递或返回，因为这样的操作会导致类型不匹配。
- 任何实现了 `!` 类型的函数都不能有返回语句。

## 负特征 (Negative Trait Bounds)

除了 `!` 类型，Rust 中还有一个概念叫做负特征（`!Trait`），这与 `!` 类型不同。
负特征用于指示某个类型不实现特定的 trait。
例如：

```rust
fn foo<T: !Send>(x: T) {
    // T 不能被 Send
}
```

在这个例子中，`!Send` 表示类型参数 `T` 不能实现 `Send` trait，这是一种类型系统层面的限制。

总结来说，`!` 类型是 Rust 中一个特殊的概念，用于表示某些函数或异步任务永远不会正常返回，而是会无限期地运行或以其他方式结束。
