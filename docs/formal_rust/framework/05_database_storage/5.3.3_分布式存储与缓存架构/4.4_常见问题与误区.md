# 分布式存储与缓存架构 - 常见问题与误区

## 1. 常见问题

### 1.1 数据一致性丢失

- 问题：主从/多副本间同步延迟，导致读写不一致。
- 建议：合理配置同步策略，关键业务用强一致方案。

### 1.2 缓存穿透/雪崩

- 问题：缓存失效或击穿导致后端压力骤增。
- 建议：多级缓存、限流、降级保护。

### 1.3 分片/副本配置不合理

- 问题：分片过多/过少、副本数不足，影响扩展性和容错。
- 建议：结合业务量动态调整，监控分片副本状态。

### 1.4 网络分区与脑裂

- 问题：分布式系统网络异常导致脑裂，数据不一致。
- 建议：采用Raft等一致性协议，监控网络健康。

### 1.5 持久化与备份缺失

- 问题：缓存/存储无持久化，数据丢失风险高。
- 建议：定期备份，关键数据多地冗余。

## 2. 常见误区

### 2.1 盲目追求高可用

- 误区：过度分片/副本，反而增加复杂度和成本。
- 建议：按需扩展，平衡可用性与成本。

### 2.2 忽视一致性与延迟权衡

- 误区：只关注性能，忽视一致性需求。
- 建议：关键业务优先一致性，非关键业务可容忍延迟。

### 2.3 只用单一缓存方案

- 误区：所有场景只用Redis，忽视多级/本地缓存。
- 建议：结合本地、分布式、多级缓存优化架构。

### 2.4 忽视监控与告警

- 误区：系统无监控，故障难以发现和定位。
- 建议：完善监控体系，关键指标实时告警。

## 3. 最佳实践建议

- 合理配置分片、副本、同步策略。
- 多级缓存+降级保护，提升系统韧性。
- 建立完善监控、备份与恢复机制。
- 持续关注云原生、Serverless等新趋势。
