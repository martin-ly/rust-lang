# 工作流设计模式

## 1. 顺序/并行/条件/循环/事件驱动模式

- 顺序执行、并行执行、条件分支、循环控制、事件驱动

## 2. 补偿、分散-聚合、状态机模式

- 补偿模式：操作可逆与错误恢复
- 分散-聚合：并行子任务聚合结果
- 状态机：状态转换驱动流程

## 3. 工程案例

```rust
// 顺序+并行+补偿模式组合
async fn workflow() {
    step1().await;
    let (a, b) = tokio::join!(step2a(), step2b());
    if let Err(e) = step3().await { compensate().await; }
}
```

## 4. 批判性分析与未来展望

- 设计模式提升流程表达力与健壮性，但复杂模式组合与异常处理需关注
- 未来可探索自动化模式识别与智能补偿生成
