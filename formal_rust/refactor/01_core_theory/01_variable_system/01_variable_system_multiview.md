# 1. 变量系统多维视角（01_variable_system_multiview）

## 目录

- [1. 变量系统多维视角（01\_variable\_system\_multiview）](#1-变量系统多维视角01_variable_system_multiview)
  - [目录](#目录)
  - [1.1 不变性（Immutability）](#11-不变性immutability)
  - [1.1.1 定义与本质](#111-定义与本质)
  - [1.1.2 多维视角分析](#112-多维视角分析)
  - [1.1.3 代码示例](#113-代码示例)
  - [1.1.4 适用场景与优势](#114-适用场景与优势)
  - [1.1.5 局限与批判](#115-局限与批判)
  - [1.1.6 交叉引用](#116-交叉引用)
  - [1.2 可变性（Mutability）](#12-可变性mutability)
  - [1.2.1 定义与本质](#121-定义与本质)
  - [1.2.2 多维视角分析](#122-多维视角分析)
  - [1.2.3 代码示例](#123-代码示例)
  - [1.2.4 适用场景与优势](#124-适用场景与优势)
  - [1.2.5 局限与批判](#125-局限与批判)
  - [1.2.6 交叉引用](#126-交叉引用)

## 1.1 不变性（Immutability）

## 1.1.1 定义与本质

**定义 1.1（不变性）** 设 $v$ 为变量，若在其生命周期 $L(v)$ 内，其值不可更改，则称 $v$ 具有不变性。

- Rust 默认变量不可变，需显式声明 `mut` 才可变。
- 不变性有助于提升代码安全性和可预测性。

## 1.1.2 多维视角分析

- 静态分析视角：编译期保证不可变变量不会被修改。
- 并发安全视角：不变性天然线程安全。
- 数学视角：不变性变量可视为常量函数 $f(x) = c$。

## 1.1.3 代码示例

```rust
let x = 5;
// x = 6; // 编译错误：不可变变量不能赋值
```

## 1.1.4 适用场景与优势

- 适用于常量、配置、并发场景。
- 优势：简化推理、提升安全性。

## 1.1.5 局限与批判

- 局限：需频繁声明 `mut` 时，代码冗长。
- 批判：过度不变性可能影响灵活性。

## 1.1.6 交叉引用

- [可变性（1.2）](#12-可变性mutability)
- [内部可变性（1.3）](#13-内部可变性interior-mutability)

## 1.2 可变性（Mutability）

## 1.2.1 定义与本质

**定义 1.2（可变性）** 设 $v$ 为变量，若存在 $t_1, t_2 \in L(v)$，使得 $v(t_1) \neq v(t_2)$，则称 $v$ 具有可变性。

- Rust 需用 `mut` 显式声明可变变量。
- 可变性允许变量在生命周期内多次赋值。

## 1.2.2 多维视角分析

- 静态分析视角：编译器追踪可变变量的所有赋值点。
- 并发安全视角：可变变量需加锁或用原子类型。
- 数学视角：可变变量为一般函数 $f: T \to V$，$f(t)$ 可变。

## 1.2.3 代码示例

```rust
let mut y = 10;
y = 20; // 合法
```

## 1.2.4 适用场景与优势

- 适用于计数器、状态机等需变更状态的场景。
- 优势：灵活、表达力强。

## 1.2.5 局限与批判

- 局限：易引入竞态条件。
- 批判：滥用可变性降低代码可维护性。

## 1.2.6 交叉引用

- [不变性（1.1）](#11-不变性immutability)
- [内部可变性（1.3）](#13-内部可变性interior-mutability)
