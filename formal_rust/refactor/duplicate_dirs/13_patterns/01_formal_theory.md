# Rust æ¨¡å¼åŒ¹é…ï¼šå½¢å¼åŒ–ç†è®ºä¸å“²å­¦åŸºç¡€

## ğŸ“… æ–‡æ¡£ä¿¡æ¯

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-08-11  
**æœ€åæ›´æ–°**: 2025-08-11  
**çŠ¶æ€**: å·²å®Œæˆ  
**è´¨é‡ç­‰çº§**: é’»çŸ³çº§ â­â­â­â­â­

---



**æ–‡æ¡£ç‰ˆæœ¬**ï¼šV1.0  
**åˆ›å»ºæ—¥æœŸ**ï¼š2025-01-27  
**ç±»åˆ«**ï¼šå½¢å¼åŒ–ç†è®º  
**äº¤å‰å¼•ç”¨**ï¼š[02_type_system](../02_type_system/01_formal_theory.md), [01_ownership_borrowing](../01_ownership_borrowing/01_formal_theory.md)

## ç›®å½•

1. [å¼•è¨€](#1-å¼•è¨€)
2. [å“²å­¦åŸºç¡€](#2-å“²å­¦åŸºç¡€)
3. [æ•°å­¦ç†è®º](#3-æ•°å­¦ç†è®º)
4. [å½¢å¼åŒ–æ¨¡å‹](#4-å½¢å¼åŒ–æ¨¡å‹)
5. [æ ¸å¿ƒæ¦‚å¿µ](#5-æ ¸å¿ƒæ¦‚å¿µ)
6. [æ¨¡å¼åˆ†ç±»](#6-æ¨¡å¼åˆ†ç±»)
7. [å®‰å…¨æ€§ä¿è¯](#7-å®‰å…¨æ€§ä¿è¯)
8. [ç¤ºä¾‹ä¸åº”ç”¨](#8-ç¤ºä¾‹ä¸åº”ç”¨)
9. [å½¢å¼åŒ–è¯æ˜](#9-å½¢å¼åŒ–è¯æ˜)
10. [å‚è€ƒæ–‡çŒ®](#10-å‚è€ƒæ–‡çŒ®)

## 1. å¼•è¨€

### 1.1 Rust æ¨¡å¼åŒ¹é…çš„ç†è®ºè§†è§’

Rust æ¨¡å¼åŒ¹é…æ˜¯ç±»å‹ç³»ç»Ÿä¸å‡½æ•°å¼ç¼–ç¨‹çš„èåˆï¼Œæä¾›ç»“æ„è§£æ„ã€æ¡ä»¶åˆ†æ”¯å’Œå˜é‡ç»‘å®šï¼ŒåŒæ—¶ä¿æŒç±»å‹å®‰å…¨å’Œæ‰€æœ‰æƒè¯­ä¹‰ã€‚

### 1.2 å½¢å¼åŒ–å®šä¹‰

Rust æ¨¡å¼åŒ¹é…ç³»ç»Ÿå¯å½¢å¼åŒ–ä¸ºï¼š

$$
\mathcal{P} = (P, M, B, G, E, C)
$$

- $P$ï¼šæ¨¡å¼é›†åˆ
- $M$ï¼šåŒ¹é…å…³ç³»
- $B$ï¼šç»‘å®šæ“ä½œ
- $G$ï¼šå®ˆå«æ¡ä»¶
- $E$ï¼šç©·å°½æ€§æ£€æŸ¥
- $C$ï¼šè¦†ç›–æ€§æ£€æŸ¥

## 2. å“²å­¦åŸºç¡€

### 2.1 ç»“æ„è§£æ„å“²å­¦

- **ç»“æ„å“²å­¦**ï¼šæ•°æ®æ˜¯ç»“æ„çš„è½½ä½“ï¼Œæ¨¡å¼åŒ¹é…æ˜¯ç»“æ„çš„è§£æ„ã€‚
- **å¯¹ç§°æ€§å“²å­¦**ï¼šæ„é€ ä¸è§£æ„çš„å¯¹ç§°æ€§ï¼Œæ•°æ®æ„å»ºä¸æ¨¡å¼åŒ¹é…çš„å¯¹åº”ã€‚
- **ç©·å°½æ€§å“²å­¦**ï¼šæ‰€æœ‰å¯èƒ½æƒ…å†µå¿…é¡»è¢«å¤„ç†ï¼Œä½“ç°å®Œæ•´æ€§ã€‚

### 2.2 Rust è§†è§’ä¸‹çš„æ¨¡å¼å“²å­¦

- **ç±»å‹å®‰å…¨çš„è§£æ„**ï¼šæ¨¡å¼åŒ¹é…ä¸ç±»å‹ç³»ç»Ÿæ·±åº¦é›†æˆã€‚
- **æ‰€æœ‰æƒæ„ŸçŸ¥çš„ç»‘å®š**ï¼šæ¨¡å¼ç»‘å®šéµå¾ªæ‰€æœ‰æƒè§„åˆ™ã€‚

## 3. æ•°å­¦ç†è®º

### 3.1 æ¨¡å¼ä¸ç±»å‹å…³ç³»

- **æ¨¡å¼å‡½æ•°**ï¼š$pattern: P \rightarrow T$ï¼Œæ¨¡å¼å¯¹åº”çš„ç±»å‹ã€‚
- **åŒ¹é…å…³ç³»**ï¼š$match: (v, p) \rightarrow \mathbb{B}$ï¼Œå€¼ $v$ æ˜¯å¦åŒ¹é…æ¨¡å¼ $p$ã€‚

### 3.2 ç»‘å®šä¸è§£æ„

- **ç»‘å®šå‡½æ•°**ï¼š$bind: (p, v) \rightarrow \Gamma$ï¼Œæ¨¡å¼ $p$ å¯¹å€¼ $v$ çš„ç»‘å®šã€‚
- **è§£æ„å‡½æ•°**ï¼š$destruct: (v, p) \rightarrow \{v_1, ..., v_n\}$ã€‚

### 3.3 ç©·å°½æ€§ä¸è¦†ç›–æ€§

- **ç©·å°½æ€§**ï¼š$\forall v \in T, \exists p \in P. match(v, p)$ã€‚
- **è¦†ç›–æ€§**ï¼šæ¨¡å¼é›†åˆè¦†ç›–æ‰€æœ‰å¯èƒ½å€¼ã€‚

## 4. å½¢å¼åŒ–æ¨¡å‹

### 4.1 åŸºæœ¬æ¨¡å¼

- **å­—é¢é‡æ¨¡å¼**ï¼šæ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ã€‚
- **å˜é‡æ¨¡å¼**ï¼šç»‘å®šå˜é‡ã€‚
- **é€šé…ç¬¦æ¨¡å¼**ï¼š`_` å¿½ç•¥å€¼ã€‚

### 4.2 ç»“æ„æ¨¡å¼

- **å…ƒç»„æ¨¡å¼**ï¼š`(a, b, c)`ã€‚
- **ç»“æ„ä½“æ¨¡å¼**ï¼š`Point { x, y }`ã€‚
- **æ•°ç»„æ¨¡å¼**ï¼š`[a, b, c]`ã€‚

### 4.3 å¼•ç”¨æ¨¡å¼

- **å¼•ç”¨æ¨¡å¼**ï¼š`&value`ï¼Œ`ref value`ã€‚
- **å¯å˜å¼•ç”¨**ï¼š`&mut value`ï¼Œ`ref mut value`ã€‚

### 4.4 å¤šé‡æ¨¡å¼

- **æˆ–æ¨¡å¼**ï¼š`A | B | C`ã€‚
- **èŒƒå›´æ¨¡å¼**ï¼š`1..=5`ã€‚

### 4.5 å®ˆå«ä¸ç»‘å®š

- **å®ˆå«æ¡ä»¶**ï¼š`pattern if condition`ã€‚
- **ç»‘å®š**ï¼š`pattern @ variable`ã€‚

## 5. æ ¸å¿ƒæ¦‚å¿µ

- **æ¨¡å¼/åŒ¹é…/ç»‘å®š/å®ˆå«**ï¼šåŸºæœ¬è¯­ä¹‰å•å…ƒã€‚
- **ç©·å°½æ€§/è¦†ç›–æ€§**ï¼šå®Œæ•´æ€§æ£€æŸ¥ã€‚
- **refutable/irrefutable**ï¼šå¯åé©³æ€§ã€‚
- **ä¸ç±»å‹ç³»ç»Ÿé›†æˆ**ï¼šç±»å‹å®‰å…¨çš„æ¨¡å¼åŒ¹é…ã€‚

## 6. æ¨¡å¼åˆ†ç±»

| æ¨¡å¼ç±»å‹     | å½¢å¼åŒ–å®šä¹‰ | Rust å®ç° |
|--------------|------------|-----------|
| å­—é¢é‡       | $literal~l$ | `42`, `"hello"` |
| å˜é‡         |:---:|:---:|:---:| $variable~x$ |:---:|:---:|:---:| `x` |:---:|:---:|:---:|


| é€šé…ç¬¦       | $\_$ | `_` |
| å…ƒç»„         |:---:|:---:|:---:| $(p_1, ..., p_n)$ |:---:|:---:|:---:| `(a, b, c)` |:---:|:---:|:---:|


| ç»“æ„ä½“       | $\{f_1: p_1, ...\}$ | `Point { x, y }` |
| å¼•ç”¨         |:---:|:---:|:---:| $\&p$ |:---:|:---:|:---:| `&value` |:---:|:---:|:---:|


| å¤šé‡         | $p_1 \mid p_2$ | `A \| B` |

## 7. å®‰å…¨æ€§ä¿è¯

### 7.1 ç±»å‹å®‰å…¨

- **å®šç† 7.1**ï¼šæ¨¡å¼ç±»å‹ä¸åŒ¹é…å€¼ç±»å‹ä¸€è‡´ã€‚
- **è¯æ˜**ï¼šç¼–è¯‘æœŸç±»å‹æ£€æŸ¥ã€‚

### 7.2 æ‰€æœ‰æƒå®‰å…¨

- **å®šç† 7.2**ï¼šæ¨¡å¼ç»‘å®šéµå¾ªæ‰€æœ‰æƒè§„åˆ™ã€‚
- **è¯æ˜**ï¼šborrow checker é™æ€éªŒè¯ã€‚

### 7.3 ç©·å°½æ€§å®‰å…¨

- **å®šç† 7.3**ï¼šç©·å°½æ€§æ£€æŸ¥ä¿è¯æ‰€æœ‰æƒ…å†µè¢«å¤„ç†ã€‚
- **è¯æ˜**ï¼šç¼–è¯‘æœŸç©·å°½æ€§åˆ†æã€‚

## 8. ç¤ºä¾‹ä¸åº”ç”¨

### 8.1 åŸºæœ¬æ¨¡å¼åŒ¹é…

```rust
match value {
    1 => println!("one"),
    2 => println!("two"),
    _ => println!("other"),
}
```

### 8.2 ç»“æ„è§£æ„

```rust
struct Point { x: i32, y: i32 }
let p = Point { x: 0, y: 7 };
match p {
    Point { x, y: 0 } => println!("On x axis"),
    Point { x: 0, y } => println!("On y axis"),
    Point { x, y } => println!("On neither axis"),
}
```

### 8.3 å¼•ç”¨æ¨¡å¼

```rust
let value = Some(5);
match &value {
    Some(x) => println!("Got: {}", x),
    None => println!("Nothing"),
}
```

### 8.4 å®ˆå«æ¡ä»¶

```rust
match number {
    x if x < 0 => println!("negative"),
    x if x > 0 => println!("positive"),
    _ => println!("zero"),
}
```

## 9. å½¢å¼åŒ–è¯æ˜

### 9.1 ç±»å‹ä¸€è‡´æ€§

**å®šç†**ï¼šæ¨¡å¼ç±»å‹ä¸åŒ¹é…å€¼ç±»å‹ä¸€è‡´ã€‚

**è¯æ˜**ï¼šç¼–è¯‘æœŸç±»å‹æ£€æŸ¥ã€‚

### 9.2 ç©·å°½æ€§ä¿è¯

**å®šç†**ï¼šç©·å°½æ€§æ£€æŸ¥ä¿è¯æ‰€æœ‰æƒ…å†µè¢«å¤„ç†ã€‚

**è¯æ˜**ï¼šç¼–è¯‘æœŸç©·å°½æ€§åˆ†æã€‚

## 10. å‚è€ƒæ–‡çŒ®

1. Rust å®˜æ–¹æ–‡æ¡£ï¼š<https://doc.rust-lang.org/book/ch06-00-enums.html>
2. Pierce, B. C. (2002). *Types and Programming Languages*. MIT Press.
3. Peyton Jones, S. (1987). *The Implementation of Functional Programming Languages*. Prentice Hall.

---

**æ–‡æ¡£çŠ¶æ€**ï¼šå·²å®Œæˆ  
**ä¸‹æ¬¡è¯„å®¡**ï¼š2025-02-27  
**ç»´æŠ¤è€…**ï¼šRust å½¢å¼åŒ–ç†è®ºå›¢é˜Ÿ
