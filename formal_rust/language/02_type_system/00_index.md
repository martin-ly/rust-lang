# 02. 类型系统（Type System）

## 目录

1. [引言](#1-引言)
2. [类型系统理论基础](#2-类型系统理论基础)
    1. [类型分类与代数数据类型](#21-类型分类与代数数据类型)
    2. [类型推导与类型安全](#22-类型推导与类型安全)
    3. [型变（Variance）与子类型](#23-型变variance与子类型)
    4. [类型系统的形式化定义](#24-类型系统的形式化定义)
3. [泛型与多态性](#3-泛型与多态性)
    1. [参数多态与泛型函数](#31-参数多态与泛型函数)
    2. [泛型结构体与枚举](#32-泛型结构体与枚举)
    3. [特征约束与 trait bounds](#33-特征约束与-trait-bounds)
    4. [单态化与零成本抽象](#34-单态化与零成本抽象)
4. [特征系统与接口](#4-特征系统与接口)
    1. [trait 定义与实现](#41-trait-定义与实现)
    2. [trait 对象与动态分发](#42-trait-对象与动态分发)
    3. [关联类型与常量](#43-关联类型与常量)
5. [生命周期与依存类型](#5-生命周期与依存类型)
    1. [生命周期标注与推断](#51-生命周期标注与推断)
    2. [生命周期的型变与依存关系](#52-生命周期的型变与依存关系)
    3. [生命周期的形式化符号](#53-生命周期的形式化符号)
6. [类型系统的多表征](#6-类型系统的多表征)
    1. [图示：类型系统结构](#61-图示类型系统结构)
    2. [表格：类型分类与特性对比](#62-表格类型分类与特性对比)
    3. [公式：类型推导与安全性](#63-公式类型推导与安全性)
    4. [代码示例](#64-代码示例)
7. [工程实现与最佳实践](#7-工程实现与最佳实践)
8. [哲学批判与设计哲学](#8-哲学批判与设计哲学)
9. [参考文献与交叉引用](#9-参考文献与交叉引用)

---

> **内部链接示例**：
> - [类型推导与类型安全](#22-类型推导与类型安全)
> - [生命周期的型变与依存关系](#52-生命周期的型变与依存关系)
> - [代码示例](#64-代码示例)

---

> **图示（Mermaid）**：
> ```mermaid
> graph TD;
>   A[类型分类] --> B[泛型与多态];
>   B --> C[特征系统];
>   C --> D[生命周期系统];
>   D --> E[类型安全与推导];
> ```

> **表格：类型分类与特性对比**
> | 类型类别   | 特性         | 示例           |
> |------------|--------------|----------------|
> | 原始类型   | Copy, Sized  | i32, bool      |
> | 复合类型   | 可变/不可变  | struct, tuple  |
> | 枚举类型   | 多态, 匹配   | Option, Result |
> | trait对象  | 动态分发     | dyn Trait      |

> **公式：类型推导与安全性**
> $$
> \Gamma \vdash e : T \implies \exists\ type(e) \land\ safe(e)
> $$

> **代码示例**
> ```rust
> fn identity<T>(x: T) -> T { x }
> let a = identity(42); // i32
> let b = identity("hello"); // &str
> ```

---

> **交叉引用**：
> - [所有权与借用](../01_ownership_borrowing/00_index.md)
> - [控制流](../03_control_flow/00_index.md)
> - [泛型系统](../04_generics/00_index.md) 