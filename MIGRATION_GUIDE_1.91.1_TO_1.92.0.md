# Rust 1.91.1 â†’ 1.92.0 è¿ç§»æŒ‡å—

**è¿ç§»æ—¥æœŸ**: 2025-12-11
**Rustç‰ˆæœ¬**: 1.92.0+
**é€‚ç”¨é¡¹ç›®**: rust-lang å­¦ä¹ é¡¹ç›®

---

## ğŸ“‹ ç›®å½•

- [Rust 1.91.1 â†’ 1.92.0 è¿ç§»æŒ‡å—](#rust-1911--1920-è¿ç§»æŒ‡å—)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [ğŸ¯ è¿ç§»æ¦‚è¿°](#-è¿ç§»æ¦‚è¿°)
    - [è¿ç§»ç›®æ ‡](#è¿ç§»ç›®æ ‡)
    - [é¢„è®¡æ—¶é—´](#é¢„è®¡æ—¶é—´)
  - [ğŸ“Š å˜æ›´æ‘˜è¦](#-å˜æ›´æ‘˜è¦)
    - [Rust 1.92.0 ä¸»è¦å˜æ›´](#rust-1920-ä¸»è¦å˜æ›´)
      - [è¯­è¨€ç‰¹æ€§ (9é¡¹)](#è¯­è¨€ç‰¹æ€§-9é¡¹)
      - [æ ‡å‡†åº“ API (3é¡¹)](#æ ‡å‡†åº“-api-3é¡¹)
      - [æ€§èƒ½ä¼˜åŒ– (4é¡¹)](#æ€§èƒ½ä¼˜åŒ–-4é¡¹)
  - [1. ç‰ˆæœ¬æ›´æ–°æ­¥éª¤](#1-ç‰ˆæœ¬æ›´æ–°æ­¥éª¤)
    - [æ­¥éª¤ 1: æ›´æ–° Rust å·¥å…·é“¾](#æ­¥éª¤-1-æ›´æ–°-rust-å·¥å…·é“¾)
    - [æ­¥éª¤ 2: æ›´æ–° Cargo.toml](#æ­¥éª¤-2-æ›´æ–°-cargotoml)
    - [æ­¥éª¤ 3: æ›´æ–° README æ–‡æ¡£](#æ­¥éª¤-3-æ›´æ–°-readme-æ–‡æ¡£)
  - [2. æ–°ç‰¹æ€§ä½¿ç”¨](#2-æ–°ç‰¹æ€§ä½¿ç”¨)
    - [2.1 MaybeUninit æ”¹è¿›](#21-maybeuninit-æ”¹è¿›)
    - [2.2 NonZero::div\_ceil](#22-nonzerodiv_ceil)
    - [2.3 rotate\_right](#23-rotate_right)
    - [2.4 Location::file\_as\_c\_str](#24-locationfile_as_c_str)
  - [3. ä¾èµ–æ›´æ–°](#3-ä¾èµ–æ›´æ–°)
    - [3.1 æ›´æ–°ä¾èµ–ç‰ˆæœ¬](#31-æ›´æ–°ä¾èµ–ç‰ˆæœ¬)
    - [3.2 é‡è¦ä¾èµ–æ›´æ–°](#32-é‡è¦ä¾èµ–æ›´æ–°)
    - [3.3 æ£€æŸ¥å…¼å®¹æ€§](#33-æ£€æŸ¥å…¼å®¹æ€§)
  - [4. ä»£ç è¿ç§»](#4-ä»£ç è¿ç§»)
    - [4.1 ç¼–è¯‘æ£€æŸ¥](#41-ç¼–è¯‘æ£€æŸ¥)
    - [4.2 æµ‹è¯•éªŒè¯](#42-æµ‹è¯•éªŒè¯)
    - [4.3 ä»£ç æ›´æ–°å»ºè®®](#43-ä»£ç æ›´æ–°å»ºè®®)
      - [ä½¿ç”¨æ–° API](#ä½¿ç”¨æ–°-api)
      - [åˆ©ç”¨æ”¹è¿›çš„ Lint](#åˆ©ç”¨æ”¹è¿›çš„-lint)
  - [5. å¸¸è§é—®é¢˜](#5-å¸¸è§é—®é¢˜)
    - [é—®é¢˜1: ç¼–è¯‘é”™è¯¯ - ç‰ˆæœ¬ä¸åŒ¹é…](#é—®é¢˜1-ç¼–è¯‘é”™è¯¯---ç‰ˆæœ¬ä¸åŒ¹é…)
    - [é—®é¢˜2: ä¾èµ–ç‰ˆæœ¬å†²çª](#é—®é¢˜2-ä¾èµ–ç‰ˆæœ¬å†²çª)
    - [é—®é¢˜3: æ–°ç‰¹æ€§ä¸å¯ç”¨](#é—®é¢˜3-æ–°ç‰¹æ€§ä¸å¯ç”¨)
  - [6. éªŒè¯æ­¥éª¤](#6-éªŒè¯æ­¥éª¤)
    - [æ­¥éª¤ 1: ç¼–è¯‘éªŒè¯](#æ­¥éª¤-1-ç¼–è¯‘éªŒè¯)
    - [æ­¥éª¤ 2: æµ‹è¯•éªŒè¯](#æ­¥éª¤-2-æµ‹è¯•éªŒè¯)
    - [æ­¥éª¤ 3: æ„å»ºéªŒè¯](#æ­¥éª¤-3-æ„å»ºéªŒè¯)
    - [æ­¥éª¤ 4: åŠŸèƒ½éªŒè¯](#æ­¥éª¤-4-åŠŸèƒ½éªŒè¯)
  - [7. å›æ»šæ–¹æ¡ˆ](#7-å›æ»šæ–¹æ¡ˆ)
    - [æ­¥éª¤ 1: å®‰è£…æ—§ç‰ˆæœ¬](#æ­¥éª¤-1-å®‰è£…æ—§ç‰ˆæœ¬)
    - [æ­¥éª¤ 2: æ¢å¤é…ç½®æ–‡ä»¶](#æ­¥éª¤-2-æ¢å¤é…ç½®æ–‡ä»¶)
    - [æ­¥éª¤ 3: æ¢å¤ä¾èµ–](#æ­¥éª¤-3-æ¢å¤ä¾èµ–)
  - [ğŸ“š ç›¸å…³èµ„æº](#-ç›¸å…³èµ„æº)
    - [å®˜æ–¹æ–‡æ¡£](#å®˜æ–¹æ–‡æ¡£)
    - [é¡¹ç›®æ–‡æ¡£](#é¡¹ç›®æ–‡æ¡£)
  - [âœ… è¿ç§»æ£€æŸ¥æ¸…å•](#-è¿ç§»æ£€æŸ¥æ¸…å•)

---

## ğŸ¯ è¿ç§»æ¦‚è¿°

æœ¬æŒ‡å—å¸®åŠ©ä½ å°†é¡¹ç›®ä» Rust 1.91.1 è¿ç§»åˆ° Rust 1.92.0ã€‚

### è¿ç§»ç›®æ ‡

- âœ… æ›´æ–°æ‰€æœ‰é…ç½®æ–‡ä»¶åˆ° Rust 1.92.0
- âœ… ä½¿ç”¨ Rust 1.92.0 æ–°ç‰¹æ€§
- âœ… æ›´æ–°ä¾èµ–åˆ°å…¼å®¹ç‰ˆæœ¬
- âœ… éªŒè¯æ‰€æœ‰ä»£ç æ­£å¸¸å·¥ä½œ

### é¢„è®¡æ—¶é—´

- **å°å‹é¡¹ç›®**: 1-2 å°æ—¶
- **ä¸­å‹é¡¹ç›®**: 2-4 å°æ—¶
- **å¤§å‹é¡¹ç›®**: 4-8 å°æ—¶

---

## ğŸ“Š å˜æ›´æ‘˜è¦

### Rust 1.92.0 ä¸»è¦å˜æ›´

#### è¯­è¨€ç‰¹æ€§ (9é¡¹)

1. **MaybeUninit è¡¨ç¤ºå’Œæœ‰æ•ˆæ€§æ–‡æ¡£åŒ–**
2. **è”åˆä½“å­—æ®µçš„åŸå§‹å¼•ç”¨å®‰å…¨è®¿é—®**
3. **æ”¹è¿›çš„è‡ªåŠ¨ç‰¹å¾å’Œ Sized è¾¹ç•Œå¤„ç†**
4. **é›¶å¤§å°æ•°ç»„çš„ä¼˜åŒ–å¤„ç†**
5. **#[track_caller] å’Œ #[no_mangle] çš„ç»„åˆä½¿ç”¨**
6. **æ›´ä¸¥æ ¼çš„ Never ç±»å‹ Lint**
7. **å…³è”é¡¹çš„å¤šä¸ªè¾¹ç•Œ**
8. **å¢å¼ºçš„é«˜é˜¶ç”Ÿå‘½å‘¨æœŸåŒºåŸŸå¤„ç†**
9. **æ”¹è¿›çš„ unused_must_use Lint è¡Œä¸º**

#### æ ‡å‡†åº“ API (3é¡¹)

1. **NonZero<u{N}>::div_ceil**
2. **Location::file_as_c_str**
3. **<[_]>::rotate_right**

#### æ€§èƒ½ä¼˜åŒ– (4é¡¹)

1. **è¿­ä»£å™¨æ–¹æ³•ç‰¹åŒ–**
2. **ç®€åŒ–çš„å…ƒç»„æ‰©å±•**
3. **å¢å¼ºçš„ EncodeWide Debug ä¿¡æ¯**
4. **iter::Repeat ä¸­çš„æ— é™å¾ªç¯ panic**

---

## 1. ç‰ˆæœ¬æ›´æ–°æ­¥éª¤

### æ­¥éª¤ 1: æ›´æ–° Rust å·¥å…·é“¾

```bash
# æ›´æ–° rustup
rustup update stable

# éªŒè¯ç‰ˆæœ¬
rustc --version  # åº”è¯¥æ˜¾ç¤º rustc 1.92.0 æˆ–æ›´é«˜
```

### æ­¥éª¤ 2: æ›´æ–° Cargo.toml

**æ ¹ç›®å½• Cargo.toml**:

```toml
[package]
rust-version = "1.92.0"  # æ›´æ–°è¿™é‡Œ
```

**Cargo.workspace**:

```toml
[workspace]
target-rust-version = "1.92"  # æ›´æ–°è¿™é‡Œ
```

**æ‰€æœ‰ crate çš„ Cargo.toml**:

```toml
[package]
rust-version = "1.92"  # æ›´æ–°æ‰€æœ‰ crate
```

### æ­¥éª¤ 3: æ›´æ–° README æ–‡æ¡£

æ›´æ–°æ‰€æœ‰ README.md ä¸­çš„ç‰ˆæœ¬å¼•ç”¨ï¼š

```markdown
**Rustç‰ˆæœ¬**: 1.92.0+  # ä» 1.91.1+ æ›´æ–°
**æœ€åæ›´æ–°**: 2025-12-11
```

---

## 2. æ–°ç‰¹æ€§ä½¿ç”¨

### 2.1 MaybeUninit æ”¹è¿›

**ä¹‹å‰**:

```rust
use std::mem::MaybeUninit;

let mut data: MaybeUninit<[u8; 1024]> = MaybeUninit::uninit();
```

**ç°åœ¨** (1.92.0):

```rust
use std::mem::MaybeUninit;

// æ›´æ¸…æ™°çš„æ–‡æ¡£å’Œç±»å‹è¡¨ç¤º
let mut data: MaybeUninit<[u8; 1024]> = MaybeUninit::uninit();
// ä½¿ç”¨æ›´å®‰å…¨ï¼Œæ–‡æ¡£æ›´å®Œå–„
```

### 2.2 NonZero::div_ceil

**æ–° API**:

```rust
use std::num::NonZeroU32;

let n = NonZeroU32::new(10).unwrap();
let result = n.div_ceil(NonZeroU32::new(3).unwrap());
assert_eq!(result, 4);
```

### 2.3 rotate_right

**æ–°æ–¹æ³•**:

```rust
let mut v = vec![1, 2, 3, 4, 5];
v.rotate_right(2);
assert_eq!(v, vec![4, 5, 1, 2, 3]);
```

### 2.4 Location::file_as_c_str

**æ–° API**:

```rust
use std::panic::Location;

let location = Location::caller();
let file = location.file_as_c_str();
println!("File: {:?}", file);
```

---

## 3. ä¾èµ–æ›´æ–°

### 3.1 æ›´æ–°ä¾èµ–ç‰ˆæœ¬

è¿è¡Œä»¥ä¸‹å‘½ä»¤æ›´æ–°ä¾èµ–ï¼š

```bash
cargo update
```

### 3.2 é‡è¦ä¾èµ–æ›´æ–°

ä»¥ä¸‹ä¾èµ–å·²æ›´æ–°åˆ° Rust 1.92.0 å…¼å®¹ç‰ˆæœ¬ï¼š

- `http`: 1.3.1 â†’ 1.4.0 (é‡å¤§ç‰ˆæœ¬æ›´æ–°)
- `redis`: 1.0.0-rc.3 â†’ 1.0.1 (RC åˆ°ç¨³å®šç‰ˆ)
- `actix-web`: 4.12.0 â†’ 4.12.1
- `reqwest`: 0.12.24 â†’ 0.12.25
- `tracing`: 0.1.41 â†’ 0.1.43

### 3.3 æ£€æŸ¥å…¼å®¹æ€§

```bash
# æ£€æŸ¥ä¾èµ–å…¼å®¹æ€§
cargo tree

# æ£€æŸ¥è¿‡æ—¶ä¾èµ–
cargo outdated
```

---

## 4. ä»£ç è¿ç§»

### 4.1 ç¼–è¯‘æ£€æŸ¥

```bash
# æ£€æŸ¥æ‰€æœ‰ä»£ç 
cargo check --workspace

# æ£€æŸ¥ç‰¹å®š crate
cargo check --package c01_ownership_borrow_scope
```

### 4.2 æµ‹è¯•éªŒè¯

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
cargo test --workspace

# è¿è¡Œç‰¹å®šæµ‹è¯•
cargo test --test rust_192_features_tests
```

### 4.3 ä»£ç æ›´æ–°å»ºè®®

#### ä½¿ç”¨æ–° API

```rust
// ä½¿ç”¨æ–°çš„ rotate_right
let mut data = vec![1, 2, 3, 4, 5];
data.rotate_right(2);

// ä½¿ç”¨ NonZero::div_ceil
use std::num::NonZeroU32;
let n = NonZeroU32::new(10).unwrap();
let result = n.div_ceil(NonZeroU32::new(3).unwrap());
```

#### åˆ©ç”¨æ”¹è¿›çš„ Lint

```rust
// æ”¹è¿›çš„ unused_must_use ä¼šæ›´å¥½åœ°æ£€æµ‹æœªä½¿ç”¨çš„ Result
fn returns_result() -> Result<(), Error> {
    Ok(())
}

// ç°åœ¨ä¼šæœ‰æ›´å¥½çš„è­¦å‘Š
returns_result();  // è­¦å‘Šï¼šæœªä½¿ç”¨ Result
```

---

## 5. å¸¸è§é—®é¢˜

### é—®é¢˜1: ç¼–è¯‘é”™è¯¯ - ç‰ˆæœ¬ä¸åŒ¹é…

**é”™è¯¯ä¿¡æ¯**:

```
error: package `xxx` requires rustc 1.91.1 or newer
```

**è§£å†³æ–¹æ¡ˆ**:

```bash
# æ›´æ–° rustup
rustup update stable

# è®¾ç½®é»˜è®¤å·¥å…·é“¾
rustup default stable
```

### é—®é¢˜2: ä¾èµ–ç‰ˆæœ¬å†²çª

**é”™è¯¯ä¿¡æ¯**:

```
error: failed to select a version for `xxx`
```

**è§£å†³æ–¹æ¡ˆ**:

```bash
# æ›´æ–° Cargo.lock
cargo update

# å¦‚æœä»æœ‰é—®é¢˜ï¼Œæ£€æŸ¥ Cargo.toml ä¸­çš„ç‰ˆæœ¬çº¦æŸ
```

### é—®é¢˜3: æ–°ç‰¹æ€§ä¸å¯ç”¨

**é”™è¯¯ä¿¡æ¯**:

```
error: `div_ceil` is not a member of trait `NonZeroU32`
```

**è§£å†³æ–¹æ¡ˆ**:

```bash
# ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ Rust ç‰ˆæœ¬
rustc --version  # åº”è¯¥æ˜¯ 1.92.0+

# æ¸…ç†å¹¶é‡æ–°æ„å»º
cargo clean
cargo build
```

---

## 6. éªŒè¯æ­¥éª¤

### æ­¥éª¤ 1: ç¼–è¯‘éªŒè¯

```bash
# æ£€æŸ¥æ‰€æœ‰ä»£ç 
cargo check --workspace --all-targets

# åº”è¯¥çœ‹åˆ°: Finished `dev` profile
```

### æ­¥éª¤ 2: æµ‹è¯•éªŒè¯

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
cargo test --workspace

# åº”è¯¥çœ‹åˆ°: test result: ok
```

### æ­¥éª¤ 3: æ„å»ºéªŒè¯

```bash
# Release æ„å»º
cargo build --workspace --release

# åº”è¯¥æˆåŠŸå®Œæˆ
```

### æ­¥éª¤ 4: åŠŸèƒ½éªŒè¯

```bash
# è¿è¡Œç¤ºä¾‹
cargo run --example rust_192_features_demo

# åº”è¯¥æ­£å¸¸è¿è¡Œå¹¶æ˜¾ç¤ºè¾“å‡º
```

---

## 7. å›æ»šæ–¹æ¡ˆ

å¦‚æœè¿ç§»é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥å›æ»šåˆ° Rust 1.91.1ï¼š

### æ­¥éª¤ 1: å®‰è£…æ—§ç‰ˆæœ¬

```bash
rustup install 1.91.1
rustup default 1.91.1
```

### æ­¥éª¤ 2: æ¢å¤é…ç½®æ–‡ä»¶

æ¢å¤ `Cargo.toml` ä¸­çš„ç‰ˆæœ¬å·ï¼š

```toml
rust-version = "1.91.1"  # æ¢å¤æ—§ç‰ˆæœ¬
```

### æ­¥éª¤ 3: æ¢å¤ä¾èµ–

```bash
# å¦‚æœæœ‰ Cargo.lock å¤‡ä»½ï¼Œæ¢å¤å®ƒ
# æˆ–è€…é‡æ–°ç”Ÿæˆ
cargo update
```

---

## ğŸ“š ç›¸å…³èµ„æº

### å®˜æ–¹æ–‡æ¡£

- [Rust 1.92.0 Release Notes](https://releases.rs/docs/1.92.0/)
- [Rust 1.92.0 ç‰¹æ€§å®ç°](./crates/c01_ownership_borrow_scope/src/rust_192_features.rs)
- [Rust 1.92.0 ç¤ºä¾‹ä»£ç ](./crates/c01_ownership_borrow_scope/examples/rust_192_features_demo.rs)

### é¡¹ç›®æ–‡æ¡£

- [Rust 1.92.0 æ›´æ–°æŠ¥å‘Š](./RUST_192_FINAL_UPDATE_REPORT.md)
- [ä¾èµ–æ›´æ–°æŠ¥å‘Š](./DEPENDENCY_UPDATE_2025_12_11.md)

---

## âœ… è¿ç§»æ£€æŸ¥æ¸…å•

- [ ] Rust å·¥å…·é“¾æ›´æ–°åˆ° 1.92.0
- [ ] æ‰€æœ‰ Cargo.toml ä¸­çš„ rust-version æ›´æ–°
- [ ] æ‰€æœ‰ README.md ä¸­çš„ç‰ˆæœ¬å¼•ç”¨æ›´æ–°
- [ ] ä¾èµ–æ›´æ–°å®Œæˆ
- [ ] ä»£ç ç¼–è¯‘é€šè¿‡
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] Release æ„å»ºæˆåŠŸ
- [ ] åŠŸèƒ½éªŒè¯å®Œæˆ

---

**æœ€åæ›´æ–°**: 2025-12-11
**ç»´æŠ¤è€…**: Rust å­¦ä¹ é¡¹ç›®å›¢é˜Ÿ
**çŠ¶æ€**: âœ… **è¿ç§»æŒ‡å—å®Œæˆ**
